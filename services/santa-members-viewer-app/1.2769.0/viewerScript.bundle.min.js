!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.viewerScript=t():e.viewerScript=t()}(self,()=>(()=>{var e={186:(e,t)=>{"use strict";t.wn=t.xA=t.rH=t.Kh=t.ZJ=t.tt=t.DI=t.sV=t.dn=void 0,t.AV=t.qq=void 0,t.dn="14bcded7-0066-7c35-14d7-466cb3f09103",t.sV="140603ad-af8d-84a5-2c80-a0f60cb47351",t.DI="13d21c63-b5ec-5912-8397-c3a5ddb27a97",t.tt="14724f35-6794-cd1a-0244-25fd138f9242",t.ZJ="1380b703-ce81-ff05-f115-39571d94dfcd",t.Kh="14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",t.rH="b976560c-3122-4351-878f-453f337b7245",t.xA="14dbefd2-01b4-fb61-32a7-3abd44da4908",t.wn="14f25924-5664-31b2-9568-f9c5ed98c9b1",t.qq="148c2287-c669-d849-d153-463c7486a694",t.AV="1537b24e-29d1-6d8f-b8e1-d6860f2f70b9";var r={}},447:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function m(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||h}function b(){}function _(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||h}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=m.prototype;var y=_.prototype=new b;y.constructor=_,g(y,m.prototype),y.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,P={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&t.ref,void 0!==t.key&&""+t.key,t)S.call(t,i)&&!I.hasOwnProperty(i)&&(o[i]=t[i]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(i in e.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:r,type:e,key:s,ref:a,props:o,_owner:P.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var O=/\/+/g;function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||null;var u=!1;if(null===e)0;else switch(a){case"string":case"number":0;break;case"object":switch(e.$$typeof){case r:case n:0}}if(u)return s(e),""===o?"."+R(u,0):o,w(s)?(null!=e&&e.replace(O,"$&/")+"/",C(s,t,i,"",function(e){return e})):null!=s&&(E(s)&&function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(O,"$&/")+"/")+e),t.push(s)),1;if(w(e))for(var l=0;l<e.length;l++){var c=o+R(e[l],l);C(a,t,i,c,s)}else if(function(e){return null===e||"object"!=typeof e?null:"function"==typeof(p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(c.call(e),0;!e.next().done;)C(a.value,t,i,o+R(a,l++),s);else if("object"===a)throw String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function M(e,t,r){if(null==e)return e;var n=[],i=0;return C(e,n,"","",function(e){return t.call(r,e,i++)}),n}function x(e){if(-1===e._status){var t=e._result;t().then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},T={transition:null};function D(){throw Error("act(...) is not supported in production builds of React.")}},735:(e,t,r)=>{"use strict";r(447)},213:(e,t,r)=>{var n=r(174);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},662:(e,t,r)=>{var n=r(114).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},174:(e,t,r)=>{var n=r(114).default,i=r(662);e.exports=function(e){var t=i(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},114:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="https://static.parastorage.com/services/santa-members-viewer-app/b78115a4c6f3ab59847e055ef2b87e18eae5dda4de759f86809bc4d9/";var n={};return(()=>{"use strict";r.r(n),r.d(n,{createControllers:()=>Gu,exports:()=>ku,initAppForPage:()=>Bu});var e={};r.r(e),r.d(e,{default:()=>gn});var t={};r.r(t),r.d(t,{default:()=>iu});var i={};r.r(i),r.d(i,{default:()=>ou});var o={};r.r(o),r.d(o,{exports:()=>mu,initAppForPage:()=>vu});var s="BLOCKS_WIDGET",a=["ar","arc","bcc","bqi","ckb","dv","fa","glk","ha","he","khw","ks","ku","mzn","pnb","ps","sd","ug","ur","yi"];var u,l,c,f,d=function(e){return e},p=function(e){var t=e.dsn,r=e.environment,n=e.release,i=e.withDataCallback,o=e.tags;return{dsn:t,config:{enabled:!0,release:n,dataCallback:i?d:void 0,environment:r,tags:o}}},h=function(e){return e.isEnabled&&e.currentLanguage?e.currentLanguage:void 0},g=function(){return r.p},v=function(e){return void 0===e&&"undefined"!=typeof window&&(e=window.location.search),new URLSearchParams(e)},m=function(e){return e&&e.split("-")[0]},b=function(e,t,r){var n=h(e.multilingual),i=t.language;if(r){var o=v().get("regionalLanguage");o&&(i=o)}return n||i||"en"},y=function(e){return"backend"===e.rendering.env},w=function(e){return e.isInSEO()},S=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})},P=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},I=function(){throw new Error("Translations has not been initialized yet")},A=function(e){var t=e.language,n=e.defaultTranslations,i=e.prefix,o=void 0===i?"messages":i,s=e.defaultLanguage,a=e.availableLanguages,u=e.localeDistPath,l=e.initI18n,c=e.basePath,f=this;this.t=I,this.all={},this.init=function(e){var t=void 0===e?{}:e,n=t.prepopulated,i=t.wait,o=void 0!==i&&i,s=t.useSuspense,a=void 0!==s&&s;return S(f,void 0,void 0,function(){var e,t,i,s=this;return P(this,function(u){switch(u.label){case 0:if(e=this.config,t=new Set(e.availableLanguages||[]),!this._initI18n)throw new Error("Can't initialize i18n without initI18n method.");return this.i18n=this._initI18n({locale:e.language,useSuspense:a,wait:o,messages:n,disableAutoInit:!0,asyncMessagesLoader:function(n){var i;return"en"===n?Promise.resolve(e.defaultTranslations):t.has(n)?fetch("".concat(null!==(i=s.basePath)&&void 0!==i?i:r.p).concat(s.localeDistPath,"/").concat(e.prefix,"_").concat(n,".json")).then(function(t){return t.ok?t.json():Promise.reject(new Error("Can't load locale: ".concat(e.language)))}):Promise.reject(new Error("Locale assets for ".concat(n," are not provided")))}}),[4,this.i18n.init()];case 1:if(u.sent(),!(i=this.i18n.getResourceBundle(e.language,"translation"))&&t.has(e.language))throw new Error("Unexpected missing translations for language ".concat(e.language));return this.all=i||e.defaultTranslations||{},this.t=function(e,t){return s.i18n.t(e,t)},[2,this]}})})},this.config={availableLanguages:a,language:m(t),defaultTranslations:n,prefix:o,defaultLanguage:s},this.localeDistPath=u,this._initI18n=l,this.i18n=null,this.basePath=c},E=function(e){var t;this.entry="viewerScript";var r,n=e.seoAPI,i=e.windowAPI,o=e.siteAPI,s=e.appData;this.isSSR="backend"===i.rendering.env,this.isSEO=w(n),this.isMobile="Mobile"===i.formFactor,this.isEditor="Editor"===i.viewMode,this.isPreview="Preview"===i.viewMode,this.isViewer="Site"===i.viewMode,this.isBlocksPreview=Boolean(null===(t=null==s?void 0:s.appData)||void 0===t?void 0:t.blocksPreviewData),this.language=b(i,o,this.isEditor),this.isRTL=(r=this.language,a.includes(m(r))),this.multilingual=i.multilingual,this.appDefinitionId=s.appDefinitionId},O=function(){return O=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},O.apply(this,arguments)},R=function(e,t){var r={};return e.visitorId?r.forSiteVisitors=O(O({},e),{visitorId:e.visitorId}):r.forSiteOwner=O(O({},e),{loggedInUserId:e.loggedInUserId}),t&&(r.overrideCriteria=t),r},C=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})},M=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};!function(e){e.SuccessRate="SuccessRate",e.SuccessRateQuality="SuccessRateQuality",e.Duration="Duration",e.ErrorRate="ErrorRate"}(u||(u={})),function(e){e.Alerting="alerting",e.Ok="ok"}(l||(l={})),function(e){e.Info="INFO",e.Warn="WARN",e.Error="ERROR",e.Debug="DEBUG"}(c||(c={})),function(e){e.Start="START",e.Finish="FINISH"}(f||(f={}));var x,N;!function(e){e.Standalone="standalone",e.BusinessManager="business-manager",e.Viewer="viewer",e.Editor="editor",e.EditorSettings="editor:settings",e.Mobile="mobile",e.Standards="standards"}(x||(x={})),function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(N||(N={}));var T=function(e,t){var r=t.componentId,n=t.sentryConfig,i=t.sentryEnvironment;return e.createPanoramaClient({fullArtifactId:"com.wixpress.wixcode.santa-members-viewer-app",artifactVersion:"b78115a4c6f3ab59847e055ef2b87e18eae5dda4de759f86809bc4d9",componentId:r,sentryDsn:null==n?void 0:n.DSN,sentryEnvironment:i})};var D,U,L=function(){function e(e){var t=e.httpClient;this.reportError=function(e){console.warn("You are trying to report an error, but didn't configure sentry in `.application.json`\n\nPlease read the docs for more information https://bo.wix.com/pages/yoshi/docs/editor-flow/structure-api/app-configuration/#applicationjson","Error: ",e)},this._httpClient=t}return Object.defineProperty(e.prototype,"httpClient",{get:function(){var e=this._httpClient;return e},enumerable:!1,configurable:!0}),e}(),k=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),B=function(){return B=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},B.apply(this,arguments)},F=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})},j=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},V=function(e){function t(t){var r,n,i,o,s=t.experimentsConfig,a=t.essentials,u=t.platformBI,l=t.biLoggerFactory,c=t.monitoring,f=t.sentryConfig,d=t.windowAPI,h=t.seoAPI,g=t.siteAPI,v=t.userAPI,m=t.appData,_=t.translationsConfig,S=t.defaultTranslations,P=void 0===S?null:S,I=t.biLogger,O=t.projectName,N=t.appName,D=t.prepopulatedData,U=t.optionalDeps,L=U.createHttpClient,k=U.initI18n,F=U.createExperiments,j=U.createErrorHandler,V=t.localeDistPath,W=t.shouldUseEssentials,G=t.basePath,$=this;$=e.call(this,{httpClient:W?null==a?void 0:a.httpClient:null==L?void 0:L({isSSR:y(d),getAppToken:function(){var e,t;return null!==(t=null===(e=g.getAppToken)||void 0===e?void 0:e.call(g,m.appDefinitionId))&&void 0!==t?t:m.instance}})})||this,$.essentials=a,$.windowAPI=d,$.siteAPI=g,$.seoAPI=h,$.userAPI=v,$.appName=N,$.projectName=O,$.prepopulatedData=D,$.basePath=G,$.environment=new E({appData:m,windowAPI:d,seoAPI:h,siteAPI:g});var K=b(d,g,$.environment.isEditor);if(a&&(a.errorHandler?$._errorHandler=a.errorHandler:k&&j&&($._errorHandler=j({biLoggerOrFactory:a.biLoggerFactory,initI18n:k,language:K,appDefId:m.appDefinitionId,createErrorMonitor:a.createErrorMonitor})),"function"==typeof a.createPanoramaClient&&($.panoramaClient=T(a,{platform:x.Viewer,componentId:"viewer-script",sentryConfig:f,sentryEnvironment:"Viewer:Worker"}).createClientForComponent())),$._errorHandler&&(null===(n=null===(r=$._httpClient)||void 0===r?void 0:r.setErrorHandler)||void 0===n||n.call(r,$._errorHandler)),$.localeDistPath=V,$.getCurrencyFormatter=null,$.formatCurrency=null,$.formatAddress=null,$.essentials&&"formatAddress"in $.essentials&&($.formatAddress=$.essentials.formatAddress),$.essentials&&"createCurrencyFormatterWithDefaults"in $.essentials&&($.getCurrencyFormatter=$.essentials.createCurrencyFormatterWithDefaults({language:K}),$.getCurrencyFormatter&&($.formatCurrency=$.getCurrencyFormatter())),$.translations=!1===(null==_?void 0:_.enabled)?null:new A({language:K,defaultTranslations:P,prefix:null==_?void 0:_.prefix,availableLanguages:null==_?void 0:_.availableLanguages,localeDistPath:V,initI18n:k}),$.experiments=null,$._experimentsPromise=null,s){var H=$.environment.isViewer?{siteOwnerId:null==u?void 0:u.ownerId,visitorId:null==u?void 0:u.visitorId}:{siteOwnerId:null==u?void 0:u.ownerId,loggedInUserId:v.currentUser.id},Y=(null==u?void 0:u.metaSiteId)?{entityId:null==u?void 0:u.metaSiteId}:void 0;if(W)$._experimentsPromise=s.centralized&&!(null==D?void 0:D.experiments)?Promise.resolve($.essentials.experiments):function(e,t,r,n,i,o){return C(void 0,void 0,void 0,function(){var s,a;return M(this,function(u){switch(u.label){case 0:return s=e({useNewApi:!0,requestContext:R(n,i),baseUrl:o}),r?(s.add(r),[2,s]):t?(a=t.scopes.map(function(e){return s.load(e)}),[4,Promise.all(a)]):[2,s];case 1:return u.sent(),[2,s]}})})}($.essentials.createExperiments,s,null==D?void 0:D.experiments,H,Y,$.environment.isSSR?"https://wix.com":void 0);else{var J=F({prepopulated:null==D?void 0:D.experiments,experimentsConfig:s,baseUrl:$.environment.isSSR?"https://wix.com":void 0,ctx:H,overrideCriteria:Y});$._experimentsPromise=J.init()}}if(null==D?void 0:D.biLogger)$.bi=null==D?void 0:D.biLogger;else if(I){var q=void 0;W?q=$.essentials.biLoggerFactory():l&&(q=l()),q&&($.bi=I(q)({}))}if($.sentry=null,$.errorMonitor=null,null==D?void 0:D.sentryMonitor)$.sentry=null==D?void 0:D.sentryMonitor;else if(null==D?void 0:D.errorMonitor)$.errorMonitor=null==D?void 0:D.errorMonitor;else if(f)if(f.errorMonitor&&(null==a?void 0:a.createErrorMonitor))$.errorMonitor=a.createErrorMonitor({dsn:f.DSN,environment:"Viewer:Worker",appName:null!==(i=$.appName)&&void 0!==i?i:"santa-members-viewer-app",version:"b78115a4c6f3ab59847e055ef2b87e18eae5dda4de759f86809bc4d9",fullArtifactId:"com.wixpress.wixcode.santa-members-viewer-app",componentId:"viewer-script",tags:{isSSR:y(d),isSEO:w(h)}});else{var z=p({dsn:f.DSN,environment:"Viewer:Worker",release:"".concat(null!==(o=$.appName)&&void 0!==o?o:"santa-members-viewer-app","@").concat("b78115a4c6f3ab59847e055ef2b87e18eae5dda4de759f86809bc4d9"),withDataCallback:!0,tags:{isSSR:y(d),isSEO:w(h)}});$.sentry=null==c?void 0:c.createMonitor(z.dsn,function(e){return B(B({},e),z.config)})}return $.sentry&&($.reportError=function(e){return"string"==typeof e?$.sentry.captureMessage(e):$.sentry.captureException(e),$.sentry.lastEventId()}),$.errorMonitor&&($.reportError=function(e){return"string"==typeof e?$.errorMonitor.captureMessage(e):$.errorMonitor.captureException(e)}),$}return k(t,e),t.prototype.init=function(){var e,t;return F(this,void 0,void 0,function(){var r;return j(this,function(n){switch(n.label){case 0:return r=this,[4,this._experimentsPromise];case 1:return r.experiments=n.sent(),[4,null===(e=this.translations)||void 0===e?void 0:e.init({prepopulated:null===(t=this.prepopulatedData)||void 0===t?void 0:t.translations})];case 2:return n.sent(),[2]}})})},Object.defineProperty(t.prototype,"errorHandler",{get:function(){var e;return null!==(e=this._errorHandler)&&void 0!==e?e:{withErrorHandler:function(e){return e()},getResolvedError:function(){return{message:""}},showError:function(){},reportRetryAttempt:function(){}}},enumerable:!1,configurable:!0}),t.prototype.createTranslations=function(e,t,r){var n,i=e.translationsConfig,o=e.defaultTranslations,s=e.localeDistPath;if(!1===(null==i?void 0:i.enabled))return null;if(s===this.localeDistPath&&(null==r?void 0:r.basePath)===this.basePath)return this.translations;var a=b(this.windowAPI,this.siteAPI,this.environment.isEditor);return new A({language:a,defaultTranslations:o,availableLanguages:null==i?void 0:i.availableLanguages,prefix:null==i?void 0:i.prefix,localeDistPath:s,initI18n:null==t?void 0:t.initI18n,basePath:null!==(n=null==r?void 0:r.basePath)&&void 0!==n?n:this.basePath})},t}(L),W=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})},G=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},$=function(e){return W(void 0,void 0,void 0,function(){var t,r,n,i,o,s;return G(this,function(a){switch(a.label){case 0:return[4,Promise.all([e.getPlatformApi("location"),e.getPlatformApi("user"),e.getPlatformApi("window"),e.getPlatformApi("site"),e.getPlatformApi("seo")])];case 1:return t=a.sent(),r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],[2,{locationAPI:r,userAPI:n,windowAPI:i,siteAPI:o,seoAPI:s}]}})})},K={},H=function(e){D=e},Y=function(e){U=e},J=function(){return K},q=function(e){K=e},z=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})},X=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Z=function(e){return"function"==typeof e};var Q=function(){return Q=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Q.apply(this,arguments)};function ee(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}Object.create;function te(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}Object.create;"function"==typeof SuppressedError&&SuppressedError;var re,ne=function(e,t){return e.localeCompare(t)};!function(e){e.Number="Number",e.Boolean="Boolean",e.String="String",e.Text="Text",e.Object="Object"}(re||(re={}));var ie=function(e,t){var r=t.isMobile,n=t.language,i=void 0===n?"en":n;return"function"==typeof e.dangerousKeyTransformationOverride?e.dangerousKeyTransformationOverride(e.key,{isMobile:r,language:i}):function(e,t,r){if("string"!=typeof e)throw new Error("`generateKey` expects key to be passed and be a string");if(!t)throw new Error("`generateKey` expects options to be passed");return Object.keys(r).sort(ne).reduce(function(e,n){var i=r[n]===t[n],o=!t[n]&&!r[n];return i||o?e:e+"\u25b6\ufe0e"+("boolean"!=typeof t[n]||r[n]?n+":"+t[n]:n)},e)}(e.key,{m:r,l:i},{m:!1,l:"en"})},oe=function(){var e,t=this;this.handlers=((e={})[re.Object]={serialize:function(e){return"string"==typeof e?(console.error("\u26a0\ufe0f Seems like you are calling `settings.set(param, JSON.stringify(value))`. Please, pass a plain object/array and tpa-settings will serializate it."),e):JSON.stringify(e)},deserialize:function(e){return"string"!=typeof e?e:JSON.parse(e)}},e),this.serialize=function(e,r){return e.type===re.Object?t.handlers[re.Object].serialize(r):r},this.deserialize=function(e,r){return e.type===re.Object?t.handlers[re.Object].deserialize(r):r}},se=new oe;function ae(e,t,r){void 0===r&&(r={});var n,i=function(e){return e.type===re.Text}(t),o=function(e,t){return{languageAndMobile:ie(e,{isMobile:t.isMobile,language:t.language}),language:ie(e,{isMobile:!1,language:t.language}),mobile:ie(e,{isMobile:t.isMobile}),original:e.key}}(t,{isMobile:r.isMobile,language:i?r.language:void 0}),s=function(e){return void 0===e.inheritDesktop||e.inheritDesktop}(t);return i?void 0!==e[o.languageAndMobile]?n=e[o.languageAndMobile]:s&&void 0!==e[o.language]&&(n=e[o.language]):void 0!==e[o.mobile]?n=e[o.mobile]:s&&void 0!==e[o.original]&&(n=e[o.original]),se.deserialize(t,n)}var ue=!1;function le(e,t,r,n){void 0===r&&(r={});var i=ee(r,[]);void 0===n&&(n="COMPONENT");var o=e;e.COMPONENT||(ue||(console.warn("`getSettingsValue` or `getSettingsValues` should accept whole public data object. Probably, data was passed only for one scope."),ue=!0),o={COMPONENT:e,APP:{}});var s="COMPONENT"===n&&t.inheritFromAppScope,a=ae(o[n],t,i);return void 0===a&&s&&(a=ae(o.APP,t,i)),t.getDefaultValue&&void 0===a?function(e,t,r,n){var i,o;void 0===n&&(n={});var s=null!==(i=n.t)&&void 0!==i?i:function(e){var t=e.environmentLabel;return function(e){throw new Error("It is not possible to translate ".concat(e,". Translate function was not passed to the ").concat(t))}}({environmentLabel:null!==(o=n.environmentLabel)&&void 0!==o?o:"`getSettingsValue` function"});return r.getDefaultValue({isMobile:n.isMobile,isRTL:n.isRTL,isEditorX:n.isEditorX,t:s,presetId:n.presetId,experiments:n.experiments,getSettingParamValue:function(r,i){return void 0===i&&(i={}),le(e,r,Q(Q(Q({},n),i),{t:s}),t)}})}(o,n,t,i):a}var ce=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fe=function(e){function t(t){var r,n=this;(n=e.call(this,t)||this).entry="viewerScript";var i,o=t.config,s=t.widgetId,a=t.locationAPI.query;return n.isEditorX=function(e){var t;return null!==(t=null==e?void 0:e.booleans.responsive)&&void 0!==t&&t}(null===(r=null==o?void 0:o.style)||void 0===r?void 0:r.styleParams),n.isADI=(void 0===(i=a)&&(i={}),"onboarding"===i.dsOrigin),n.isClassicEditor=function(e){return void 0===e&&(e={}),"Editor1.4"===e.dsOrigin}(a),n.widgetId=s,n}return ce(t,e),t}(E),de=function(e,t){return{name:e.name,message:e.message,stack:e.stack,errorId:t}},pe=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})},he=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function ge(e,t){return pe(this,void 0,void 0,function(){return he(this,function(r){switch(r.label){case 0:return[4,this.controllerConfig.platformAPIs.platformApiProvider.getPlatformApi("window")];case 1:return r.sent().openModal("".concat((n=this.componentName||"",i=e,o=this.controllerConfig.appParams.instance,s="".concat(n,"/").concat(i),"https://editor.wixapps.net/render/prod/modals/".concat("santa-members-viewer-app","/").concat("b78115a4c6f3ab59847e055ef2b87e18eae5dda4de759f86809bc4d9","/").concat(s,"?instance=").concat(o))),t),[2]}var n,i,o,s})})}var ve=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),me=function(){return me=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},me.apply(this,arguments)},be=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})},_e=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},ye=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},we=function(e){function t(t){var r,n,i,o,s,a,u,l=t.viewerScriptFlowAPI,c=t.controllerConfig,f=t.appDefinitionId,d=t.widgetId,g=t.componentId,v=t.componentName,m=t.biLogger,b=t.prepopulatedData,_=t.translations,S=t.fedopsConfig,P=t.sentryConfig,I=t.shouldUseEssentials,A=t.multilingualDisabled,E=t.panoramaClient,O=t.locationAPI,R=t.windowAPI,C=t.siteAPI,M=t.seoAPI,x=this;(x=e.call(this,{httpClient:c.essentials.httpClient})||this).appLoadStarted=function(){if(null!==x.fedops){var e=x.fedops.appLoadStarted;e.call(x.fedops),x.fedops.appLoadStarted=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];console.warn("\u{1f97a} Seems like you're trying to call `fedopsLogger.appLoadStarted` and `fedopsLogger.appLoaded` in your controller.\nWe are already logging load events for SSR and CSR environments, so you can remove these calls from your project."),e.call.apply(e,ye([x.fedops],t,!1))}}},x.essentials=c.essentials,x.controllerConfig=c,x.errorHandler=null!==(r=x.essentials.errorHandler)&&void 0!==r?r:l.errorHandler,x.experiments=l.experiments,x.bi=l.bi,x.prepopulatedData=b,x.componentName=v;var N=c.platformAPIs;if(x.panoramaClient=E.createClientForComponent(),x.getCurrencyFormatter=l.getCurrencyFormatter,x.formatCurrency=null===(n=x.getCurrencyFormatter)||void 0===n?void 0:n.call(x),x.formatAddress=l.formatAddress,x.environment=new fe({locationAPI:O,windowAPI:R,siteAPI:C,seoAPI:M,appData:c.appParams,config:c.config,widgetId:d}),!l.bi&&m)if(I){var T=x.essentials.biLoggerFactory();x.bi=m(T)({})}else(null===(i=c.platformAPIs)||void 0===i?void 0:i.biLoggerFactory)&&(x.bi=m(null===(o=c.platformAPIs)||void 0===o?void 0:o.biLoggerFactory())({}));if(x.sentry=null,x.errorMonitor=null,(null==b?void 0:b.sentryMonitor)||(null==b?void 0:b.errorMonitor))x.sentry=null!==(s=null==b?void 0:b.sentryMonitor)&&void 0!==s?s:null,x.errorMonitor=null!==(a=null==b?void 0:b.errorMonitor)&&void 0!==a?a:null;else if(P)if(P.errorMonitor&&x.essentials.createErrorMonitor)x.errorMonitor=x.essentials.createErrorMonitor({dsn:P.DSN,environment:"Viewer:Worker",appName:"santa-members-viewer-app",version:"b78115a4c6f3ab59847e055ef2b87e18eae5dda4de759f86809bc4d9",fullArtifactId:"com.wixpress.wixcode.santa-members-viewer-app",componentId:g,tags:{componentId:g,componentName:v,isSSR:y(R),isSEO:w(M)}});else{var D=p({dsn:P.DSN,environment:"Viewer:Worker",release:"".concat("santa-members-viewer-app","@").concat("b78115a4c6f3ab59847e055ef2b87e18eae5dda4de759f86809bc4d9"),withDataCallback:!0,tags:{componentId:g,componentName:v,isSSR:y(R),isSEO:w(M)}});x.sentry=null===(u=N.monitoring)||void 0===u?void 0:u.createMonitor(D.dsn,function(e){return me(me({},e),D.config)})}return x.sentry&&(x.reportError=function(e){return"string"==typeof e?x.sentry.captureMessage(e):x.sentry.captureException(e),x.sentry.lastEventId()}),x.errorMonitor&&(x.reportError=function(e){return"string"==typeof e?x.errorMonitor.captureMessage(e):x.errorMonitor.captureException(e)}),x.fedops=null,!1!==(null==S?void 0:S.enabled)&&((null==b?void 0:b.fedopsLogger)?x.fedops=null==b?void 0:b.fedopsLogger:x.fedops=I?x.essentials.fedopsLogger:N.fedOpsLoggerFactory.getLoggerForWidget({appId:f,widgetId:d,paramsOverrides:{corrId:x.controllerConfig.compId}}),x.environment.isSSR&&x.appLoadStarted(),x.fedops.interactionStarted("controller-load")),x.environment.isSSR&&(null==E||E.reportLoadStart()),x.translations=_,x.viewerScriptFlowAPI=l,x.settings={get:function(e){var t,r,n;return le(null!==(r=null===(t=x.controllerConfig.config)||void 0===t?void 0:t.publicData)&&void 0!==r?r:{},e,{t:null===(n=x.translations)||void 0===n?void 0:n.t,experiments:x.experiments,isMobile:x.environment.isMobile,language:A?void 0:h(x.environment.multilingual)})}},x.openModal=ge,x}return ve(t,e),t.prototype.init=function(){var e,t;return be(this,void 0,void 0,function(){return _e(this,function(r){switch(r.label){case 0:return null!==(null===(e=this.translations)||void 0===e?void 0:e.i18n)?[3,2]:[4,this.translations.init({prepopulated:null===(t=this.prepopulatedData)||void 0===t?void 0:t.translations,useSuspense:this.environment.isEditor||this.environment.isADI})];case 1:r.sent(),r.label=2;case 2:return null!==this.fedops&&this.fedops.interactionEnded("controller-load"),[2]}})})},t.prototype.updateControllerConfig=function(e){this.controllerConfig.config=e},t.prototype.handleError=function(e){var t;this.sentry&&(this.reportError(e),t=this.sentry.lastEventId()),this.errorMonitor&&(t=this.reportError(e)),this.controllerConfig.setProps({_workerError:de(e,t)})},t.prototype.withErrorBoundary=function(e){var t=this;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{e.apply(void 0,r)}catch(e){e instanceof Error&&t.handleError(e)}}},t}(L),Se={language:"_language",translations:"_translations",multilingual:"_multilingual",experiments:"_experiments",biMethods:"_biMethods",openModal:"__openModal__",biUtil:"_biUtil",mobile:"_mobile",isRTL:"_isRTL",isSSR:"_isSSR",isSEO:"_isSEO",appDefinitionId:"_appDefinitionId",widgetId:"_widgetId",fedopsLogger:"_fedopsLogger",sentry:"_sentry",errorMonitor:"_errorMonitor",publicData:"_publicData",styles:"__styles",enabledHOCs:"_enabledHOCs",onAppLoaded:"_onAppLoaded",onAppLoadStarted:"_onAppLoadStarted",error:"_workerError",errorMonitorWithOptions:"__errorMonitorWithOptions",logger:"__logger",transactionWithAction:"__transactionWithAction",shouldReportAppLoadStarted:"shouldReportAppLoadStarted"},Pe=function(){function e(){this.store={}}return e.prototype.init=function(){},e.prototype.getProps=function(){return this.store},e.prototype.getProp=function(e){var t=this.getPrivateKey(e);return this.store[t]},e.prototype.spreadProp=function(e){var t,r=this.getPrivateKey(e);return(t={})[r]=this.store[r],t},e.prototype.getPrivateKey=function(t){return e.PropsMap[t]},e.prototype.getFromExternalStore=function(e,t){return t[this.getPrivateKey(e)]},e.prototype.setProp=function(e,t){var r=this.getPrivateKey(e);this.store[r]=t},e.prototype.isHOCEnabled=function(e){return this.getProp("enabledHOCs")[e]},e.prototype.isFlowPropsReceived=function(){return!!this.getProp("enabledHOCs")},e.PropsMap=Se,e}(),Ie=function(e){return function(t){var r;return e.controllerConfig.config.publicData=t,(r={})[Pe.PropsMap.publicData]=t,r}},Ae=function(){return Ae=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ae.apply(this,arguments)},Ee=function(e){return function(t){var r,n,i;return e.controllerConfig.config.style.styleParams=(void 0===(n=e.controllerConfig.config.style.styleParams)&&(n={}),void 0===(i=t)&&(i={}),Ae(Ae({},n),{colors:Ae(Ae({},n.colors),i.colors),booleans:Ae(Ae({},n.booleans),i.booleans),fonts:Ae(Ae({},n.fonts),i.fonts),numbers:Ae(Ae({},n.numbers),i.numbers)})),(r={})[Pe.PropsMap.styles]=e.controllerConfig.config.style.styleParams,r}},Oe=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})},Re=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ce=function(e,t,r,n,i,o){return Oe(void 0,void 0,void 0,function(){var i,s,a,u,l,c,f,d;return Re(this,function(p){switch(p.label){case 0:return i=o(),s=T(r.essentials,{platform:x.Viewer,componentId:t.id,sentryConfig:t.sentryConfig,sentryEnvironment:"Viewer:Worker"}),[4,$(r.platformAPIs.platformApiProvider)];case 1:return a=p.sent(),u=a.locationAPI,l=a.windowAPI,c=a.siteAPI,f=a.seoAPI,d=new we({translations:n.createTranslations(t,e,{basePath:g()}),componentId:t.id,componentName:t.componentName,viewerScriptFlowAPI:n,appDefinitionId:t.appDefinitionId,widgetId:t.id,translationsConfig:t.translationsConfig,persistentAcrossPages:t.persistentAcrossPages,biLogger:t.biLogger,fedopsConfig:t.fedopsConfig,sentryConfig:t.sentryConfig,controllerConfig:r,shouldUseEssentials:t.shouldUseEssentials,multilingualDisabled:t.multilingualDisabled,panoramaClient:s,locationAPI:u,windowAPI:l,siteAPI:c,seoAPI:f}),[2,t.method({controllerConfig:r,flowAPI:d,appData:i,dangerousPublicDataOverride:Ie(d),dangerousStylesOverride:Ee(d)})]}})})},Me=r(186);const xe=async e=>!!await(null==e?void 0:e.site.isAppSectionInstalled({sectionId:"member_page",appDefinitionId:Me.rH})),Ne=async e=>!!e&&e.site.isAppSectionInstalled({sectionId:"member_settings_page",appDefinitionId:Me.rH}),Te=[Me.dn,Me.tt,Me.qq,Me.sV,"14ebe801-d78a-daa9-c9e5-0286a891e46f","14dbef06-cc42-5583-32a7-3abd44da4908",Me.AV,"476dc2dd-e16e-43b0-a0aa-1a486c78fbe2"],De="b976560c-3122-4351-878f-453f337b7245",Ue="14f25924-5664-31b2-9568-f9c5ed98c9b1";let Le=function(e){return e.MissingMemberId="Error: please provide site member ID",e.RouteNotFound="Error: route not found by provided widgetId:",e.MissingMembersAreaPage="Error: missing members area page - failed to find prefix",e.MissingMembersAreaSettingsPage="Error: missing members area settings page - failed to find prefix",e.CannotNavigateToMemberNoPublicPage="Error: cannot navigate to member, no public page",e.MissingRoutes="Error: members area viewer has no routes",e.NotInitializedWixCodeApi="Error: wixCodeApi not properly initialized",e.CannotFindPageToNavigateTo="Error: cannot find page to navigate to by provided widgetId and appDefinitionId. Check if correct widgetId or appDefId is passed.",e.SectionUrlNotFound="Error: section URL was not found",e}({}),ke=function(e){return e.EnablePublicAppData="specs.membersArea.enableAppData",e.EnableNotifications="specs.membersArea.enableNotificationsOnV2",e.UseNotificationsV2Api="specs.ping.membersAreaUseNotificationsV2Api",e.HideNotificationsCounterInDropdownAndMemberMenus="specs.ping.membersArea.hideNotificationsCounterInDropdownAndMemberMenus",e}({});const Be="{userName}",Fe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i;let je=function(e){return e.Profile="Profile",e.Settings="Settings",e}({});const Ve="initialData",We="@members_login",Ge="@members_menu",$e="@members-login-bar",Ke="@members-menu";var He=function(e){return e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical",e}(He||{});let Ye,Je;const qe=(e,t)=>()=>{try{!function(e){try{var t;Je&&(null==(t=Ye)||t.transaction(e).start())}catch(e){var r;const t="Failed to start fedops interaction, reason: "+e;null==(r=Ye)||r.errorMonitor().reportError(new Error(t))}}(e);const r=t();return function(e){try{var t;Je&&(null==(t=Ye)||t.transaction(e).finish())}catch(e){var r;const t="Failed to end fedops interaction, reason: "+e;null==(r=Ye)||r.errorMonitor().reportError(new Error(t))}}(e),r}catch(e){var r;throw console.error(e),null==(r=Ye)||r.errorMonitor().reportError(e),e}};function ze(e){if(!e||!e[0])return[];return Object.keys(e[0]).includes("isVisible")?function(e){return e.map(e=>({link:e.link,isVisibleInMenuBar:e.isVisible,isVisibleInMobileMenuBar:e.isVisibleMobile,visibleForRoles:e.visibleForRoles}))}(e):function(e){return e.map(e=>({link:e.l,isVisibleInMenuBar:!e.hmb,isVisibleInMobileMenuBar:!e.hmmb,visibleForRoles:e.vfr||[]}))}(e)}var Xe=r(213),Ze=r.n(Xe);let Qe;function et(){return Qe}const tt=(()=>{let e,t=null,r=null,n=[],i=[],o=null;return{getFlowAPI:()=>t,setFlowAPI:e=>t=e,getWixCodeAPI:()=>r,setWixCodeAPI:e=>r=e,getRoutes:()=>n,setRoutes:e=>n=e,getSettingsRoutes:()=>i,setSettingsRoutes:e=>i=e,getGlobalControllerConfig:()=>o,setGlobalControllerConfig:e=>o=e,getMembersLoginWidgets:()=>e||[],setMembersLoginWidgets:t=>e=t}})(),rt=e=>e($e),nt=e=>e.map(e=>{var t;if(null!=(t=e.items)&&t.length)return{...e,items:nt(e.items)};const{linkMetaData:r}=e;if(!r)return e;const n=["type","target","rel","linkPopupId","anchorDataId","anchorCompId","docInfo"],i=Object.fromEntries(Object.entries(r).filter(e=>{let[t,r]=e;return n.includes(t)&&void 0!==r}));return{...e,linkMetaData:i}});function it(e){let{location:t}=e;const{prefix:r,path:n,query:i}=t,o=Object.keys(i).length>0?`?${(e=>Object.keys(e).map(t=>`${t}=${e[t]}`).join("&"))(i)}`:"";return`/${r}/${n.join("/")}${o}`}function ot(e){let{menuItem:t,publicRouterConfig:r={},privateRouterConfig:n={},viewedUser:i}=e,o=t.link;i&&0===o.indexOf(`/${i.slug}/`)&&(o=o.replace(`/${i.slug}/`,`/${Be}/`));const s=o.split("/"),a=s.indexOf(Be),u=a>-1?"/"+s.splice(a,s.length).join("/"):"/"+s[s.length-1],l=r.patterns||{},c=n.patterns||{};return l[u]||c[u]}function st(e){let{menuItems:t,publicRouterPrefix:r}=e;const n=t.filter(e=>!!e.link||e.items&&e.items.length>0);return n.forEach(e=>{if(e.link&&0===e.link.indexOf(`undefined/${Be}`)){const t=e.link.split("/");e.link=`/${r}/${Be}/${t[2]}`}}),n.forEach(e=>{if(!e.link)return;if(4===e.link.split("/").length&&-1===e.link.indexOf(Be)){const t=e.link.split("/");"https:"!==t[0]&&"http:"!==t[0]&&(e.link=`/${t[1]}/${Be}/${t[3]}`)}}),n}function at(e){let{slug:t,options:r,wixCodeApi:n}=e;const[i]=it(n).split("?"),o=function(e,t){if(!t)return e;const[,...r]=e.split("/");return r[1].match(Fe)?(r[1]=t,`/${r.join("/")}`):e}(i,t),s=r.find(e=>{let{link:t}=e;return t===o});return s?s.value:null}function ut(e){let{menuItems:t,parsedRoutersConfigs:r,userRoles:n,viewedUser:i,appsCounters:o,excludedCounters:s}=e;const a=null==r?void 0:r.find(e=>"public"===e.type),u=null==r?void 0:r.find(e=>"private"===e.type),l=function(e){let{menuItems:t,publicRouterConfig:r,privateRouterConfig:n,userRoles:i=[],viewedUser:o}=e;return t.filter(e=>{if(!e.link)return!0;const t=ot({menuItem:e,publicRouterConfig:r,privateRouterConfig:n,viewedUser:o});if(!t||!t.appData||!t.appData.visibleForRoles||0===t.appData.visibleForRoles.length)return!0;const{visibleForRoles:s=[]}=t.appData;return!!s.some(e=>i.indexOf(e)>-1)})}({menuItems:t,publicRouterConfig:a,privateRouterConfig:u,userRoles:n,viewedUser:i}),c=function(e){var t;let{menuItems:r,appsCounters:n,publicRouterConfig:i,privateRouterConfig:o,viewedUser:s,excludedCounters:a}=e;return r.forEach(e=>{e.displayCount=null}),null!=n&&null!=(t=n.apps)&&t.length?(n.apps.forEach(e=>{r.forEach(t=>{if(!t.link)return;const r=ot({menuItem:t,publicRouterConfig:i,privateRouterConfig:o,viewedUser:s});if(r&&r.appData.appDefinitionId===e.appDefId){const n=r.appData.numbers&&r.appData.numbers.key;if(!n||null!=a&&a.includes(n))return;const i=e.numbers&&e.numbers[n];i&&(t.displayCount=i.count)}})}),r):r}({menuItems:l,appsCounters:o,publicRouterConfig:a,privateRouterConfig:u,viewedUser:i,excludedCounters:s});return function(e){let{menuItems:t,viewedUser:r}=e;return t.map(e=>(e.link&&e.link.indexOf(Be)>-1&&(e.link=e.link.replace(Be,r.slug)),e))}({menuItems:c,viewedUser:i})}function lt(e){let{menuItems:t,parsedRoutersConfigs:r=[],viewedUserRoles:n,viewedUser:i,currentUser:o,appsCounters:s,parsedConfigItems:a,publicRouterPrefix:u,experiments:l}=e;const c=!i.id&&o?o:i,f=function(e){let{menuItems:t,parsedConfigItems:r}=e;if(r)return t.filter(e=>{const t=r.find(t=>t.link===e.link),{isVisibleInMenuBar:n}=t||{};return"boolean"!=typeof n||n})}({menuItems:st({menuItems:t,publicRouterPrefix:u}),parsedConfigItems:a}),d=function(e){let{menuItems:t,currentUser:r,viewedUser:n,parsedRoutersConfigs:i=[]}=e;if(!n.id)return t;if(r&&r.id===n.id)return t;const o=i.find(e=>"private"===e.type);return t.filter(e=>!e.link||!ot({menuItem:e,viewedUser:n,privateRouterConfig:o}))}({menuItems:f||[],currentUser:o,viewedUser:i,parsedRoutersConfigs:r}),p=ut({menuItems:d,parsedRoutersConfigs:r,userRoles:n,viewedUser:c,appsCounters:s,excludedCounters:ht({experiments:l})});return p.forEach(e=>{e.items&&e.items.length>0&&(e.items=lt({menuItems:e.items,parsedRoutersConfigs:r,viewedUserRoles:n,viewedUser:i,currentUser:o,appsCounters:s,parsedConfigItems:a,publicRouterPrefix:u}))}),function(e){let{menuItems:t}=e;return t.filter(e=>!!e.link||e.items&&e.items.length>0)}({menuItems:p})}function ct(e){let{menuItems:t,parsedRoutersConfigs:r,userRoles:n,viewedUser:i,appsCounters:o,publicRouterPrefix:s,excludedCounters:a,experiments:u}=e;const l=st({menuItems:t,publicRouterPrefix:s});return ut({menuItems:nt(l),parsedRoutersConfigs:r,userRoles:n,viewedUser:i,appsCounters:o,excludedCounters:a})}function ft(e){let{menu:t,parsedRoutersConfigs:r,currentUserRoles:n,currentUser:i,appsCounters:o,memoryStorage:s,publicRouterPrefix:a,experiments:u,isMobile:l}=e;const c=Boolean((null==t?void 0:t.accountNavBar)&&t.accountNavBar.navBarItems&&t.accountNavBar.menuItems&&l),f=c?t.accountNavBar.navBarItems:t.navBarItems||[],d=c?null==t?void 0:t.accountNavBar.menuItems:t.menuItems||[],p=`login-dropdown-menu-initial-items-${t.id}`;let h=JSON.parse(s.getItem(p));if(!h){const e=JSON.stringify(d);s.setItem(p,e),h=d}const g=ct({menuItems:f,parsedRoutersConfigs:r,userRoles:n,viewedUser:i,appsCounters:o,publicRouterPrefix:a,experiments:u}),v=ct({menuItems:h,parsedRoutersConfigs:r,userRoles:n,viewedUser:i,appsCounters:o,publicRouterPrefix:a,experiments:u,excludedCounters:ht({experiments:u})});c?(t.accountNavBar.navBarItems=g,t.accountNavBar.menuItems=v):(t.navBarItems=g,t.menuItems=v)}const dt=e=>{let{menu:t,parsedRoutersConfigs:r,viewedUser:n,flowAPI:i}=e;return t.onItemClick(e=>{var t;let{item:o}=e;const s=function(e){let{item:t,viewedUser:r,parsedRoutersConfigs:n}=e;const i=t.link.replace(`/${r.slug}/`,`/${Be}/`),o=null==n?void 0:n.find(e=>"public"===e.type),s=null==n?void 0:n.find(e=>"private"===e.type),a=i.split("/"),u=a.indexOf(Be),l=u>-1?"/"+a.splice(u,a.length).join("/"):"/"+a[a.length-1],c=(null==o?void 0:o.patterns)||{},f=(null==s?void 0:s.patterns)||{};return c[l]||f[l]}({item:o,parsedRoutersConfigs:r,viewedUser:n}),{appDefinitionId:a,appPageId:u}=s.appData;null==(t=i.bi)||t.report({evid:866,src:69,endpoint:"members-app-uou",params:{pageName:u,component:"ma-navigation",originAppId:a,action:"menu-item-click"}})})};function pt(e){let{wixCodeApi:t,menu:r,parsedRoutersConfigs:n,viewedUserRoles:i,currentUser:o,viewedUser:s,appsCounters:a,parsedConfigItems:u,memoryStorage:l,publicRouterPrefix:c,experiments:f,isMobile:d,flowAPI:p}=e;const h=d&&void 0!==r.options&&void 0===r.items,g=h?r.options||[]:r.items||[],v=`members-menu-initial-items-${r.id}`;let m=JSON.parse(l.getItem(v));if(!m){const e=JSON.stringify(g);l.setItem(v,e),m=g}const b=lt({menuItems:m,parsedRoutersConfigs:n,viewedUserRoles:i,currentUser:o,viewedUser:s,appsCounters:a,parsedConfigItems:u,publicRouterPrefix:c,experiments:f});dt({menu:r,parsedRoutersConfigs:n,flowAPI:p,viewedUser:s}),h?(r.options=b,function(e){let{menu:t,options:r,viewedUser:n,wixCodeApi:i}=e;if(t.autoNavigation)return;const o=(n||{}).slug;t.value=at({slug:o,options:r,wixCodeApi:i}),function(e){let{menu:t,options:r,wixCodeApi:n}=e;null==t.onChange||t.onChange(e=>{let{target:t}=e;const i=t.value,o=(r.find(e=>{let{value:t}=e;return t===i})||{}).link;o&&n.location.to(o)})}({menu:t,options:r,wixCodeApi:i})}({menu:r,options:b,viewedUser:s,wixCodeApi:t})):r.items=b}function ht(e){let{experiments:t}=e;return(null==t?void 0:t.enabled(ke.HideNotificationsCounterInDropdownAndMemberMenus))?["notificationsCount"]:[]}function gt(e){let{$w:t,wixCodeApi:r,parsedRoutersConfigs:n=[],viewedUserRoles:i=[],currentUser:o,viewedUser:s,appsCounters:a,parsedConfigItems:u,memoryStorage:l,publicRouterPrefix:c,experiments:f,isMobile:d,flowAPI:p}=e;const h=t(Ge),g=t(Ke);h.forEach(e=>pt({wixCodeApi:r,menu:e,parsedRoutersConfigs:n,viewedUserRoles:i,currentUser:o,viewedUser:s,appsCounters:a,parsedConfigItems:u,memoryStorage:l,publicRouterPrefix:c,experiments:f,isMobile:d,flowAPI:p})),g.forEach(e=>pt({wixCodeApi:r,menu:e,parsedRoutersConfigs:n,viewedUserRoles:i,currentUser:o,viewedUser:s,appsCounters:a,parsedConfigItems:u,memoryStorage:l,publicRouterPrefix:c,experiments:f,isMobile:d,flowAPI:p}))}function vt(e){const t=e.find(e=>"public"===JSON.parse(e.config).type);if(!t)return;const r=JSON.parse(t.config),n=t.prefix,i=Object.keys(r.patterns??{}),o=i.find(e=>!0===r.patterns[e].socialHome);if(o)return{routerPrefix:n,patternKey:o,pageData:r.patterns[o]};if(i.length>0){const e=i[0];return{routerPrefix:n,patternKey:e,pageData:r.patterns[e]}}}const mt=()=>{};class bt{constructor(e){let{appRouters:t,routerReturnedData:r,wixCodeApi:n,cacheService:i,flowAPI:o}=e;Ze()(this,"wixLocation",void 0),Ze()(this,"wixSite",void 0),Ze()(this,"isMobile",void 0),Ze()(this,"appRouters",void 0),Ze()(this,"routerReturnedData",void 0),Ze()(this,"wixCodeApi",void 0),Ze()(this,"cacheService",void 0),Ze()(this,"flowAPI",void 0),this.wixLocation=n.location,this.wixSite=n.site,this.isMobile="Mobile"===n.window.formFactor,this.appRouters=t,this.routerReturnedData=r,this.wixCodeApi=n,this.cacheService=i,this.flowAPI=o}async matchRoute(e){let{appDefinitionId:t,sectionId:r,onSuccess:n=mt,onError:i=mt}=e;t&&r||i("Error: please provide app ID and section ID for navigation");let o=!1;if(this.appRouters.forEach(e=>{if(o)return;const i=JSON.parse(e.config);return i.patterns&&Object.keys(i.patterns).forEach(s=>{if(o)return;const a=i.patterns[s];a.appData&&a.appData.appDefinitionId===t&&a.appData.appPageId===r&&(o=!0,n(e.prefix,s))})}),!o){const e=((await this.wixSite.getSiteStructure()).pages||[]).filter(e=>e.applicationId===t&&!e.prefix).pop();return e?(o=!0,n("",e.url)):i(`Error: can not resolve route for app ${t} and page ${r}`)}}getRoute(e,t){return this.appRouters.find(r=>{const n=JSON.parse(r.config);return!!n.patterns&&Object.entries(n.patterns).some(r=>{var n,i;let[,o]=r;return(null==(n=o.appData)?void 0:n.appDefinitionId)===e&&(null==(i=o.appData)?void 0:i.appPageId)===t})})}getRouterOptions(e){const t=(e.appRouters||[]).map(e=>({...e,config:JSON.parse(e.config)})),r=t.map(e=>e.config);return{publicRouterPrefix:t.find(e=>"public"===e.config.type).prefix,parsedRoutersConfigs:r,parsedRouters:t}}getMenuRenderOptions(e){let{config:t,userService:r,appsCounters:n,enablePreview:i,flowAPI:o}=e;const{$w:s,appParams:a}=t,{parsedRoutersConfigs:u,publicRouterPrefix:l,parsedRouters:c}=this.getRouterOptions(a),f=r.getViewedUser();return{$w:s,wixCodeApi:this.wixCodeApi,publicRouterPrefix:l,parsedRoutersConfigs:u,appsCounters:n,memoryStorage:et(),parsedConfigItems:ze(t.config),currentUser:r.getCurrentUser(),viewedUser:i?{...f,id:"00000000-0000-0000-0000-000000000000"}:f,viewedUserRoles:r.getRoles()[f.id]||[],isMobile:this.isMobile,experiments:t.essentials.experiments,flowAPI:o,parsedRouters:c}}static hasSocialApp(e){const{applicationId:t}=e;return Te.indexOf(t)>-1}async hasSocialPages(e,t){if(!this.appRouters)throw t&&t("App routers not initialised"),new Error("App routers not initialised");const r=this.appRouters.filter(e=>{const t=JSON.parse(e.config);return"public"===t.type&&t.patterns&&Object.keys(t.patterns).length>0}),{pages:n}=await this.wixSite.getSiteStructure(),i=n.filter(bt.hasSocialApp);return e&&e(r.length>0||i.length>0),r.length>0||i.length>0}async getViewedUser(e,t){var r;const n=null==(r=this.routerReturnedData)?void 0:r.memberData.memberContactId;if(n)return e&&e(n),n;throw t&&t("Error getting viewed user"),new Error("Error getting viewed user")}async navigateToSection(e,t){let{appDefinitionId:r,sectionId:n,tpaInnerRoute:i="",memberId:o=""}=e;await this.matchRoute({appDefinitionId:r,sectionId:n,onSuccess:(e,t)=>{var r,n;e&&0!==e.indexOf("/")&&(e=`/${e}`),i&&"/"!==i.charAt(0)&&(i="/"+i),null==(r=(n=this.wixLocation).to)||r.call(n,`${e}${o?t.replace(Be,o):t}${i}`)},onError:e=>{throw t&&t(e),new Error(e)}})}async getSectionUrl(e,t){let{appDefinitionId:r,sectionId:n,memberId:i="",memberSlug:o}=e;return new Promise((e,s)=>{const a=o||i;this.matchRoute({appDefinitionId:r,sectionId:n,onSuccess:(r,n)=>{r&&0===r.indexOf("/")&&(r=r.substring(1)),r||0!==n.indexOf("/")||(n=n.substring(1));let i=this.wixLocation.baseUrl;"/"!==i.slice(-1)&&(i+="/");const o=Object.keys(this.wixLocation.query).map(e=>`${e}=${this.wixLocation.query[e]}`).join("&");t&&t(`${i}${r}${a?n.replace(Be,a):n}${o?"?"+o:""}`),e(`${i}${r}${a?n.replace(Be,a):n}${o?"?"+o:""}`)},onError:()=>{t&&t(this.wixLocation.url),s(this.wixLocation.url)}})})}async getNavigatableRoles(e){const t=vt(this.appRouters);if(t){var r;return{navigatableMembersRoles:(null==(r=t.pageData.appData)?void 0:r.visibleForRoles)??[],isNavigationAllowed:!0}}return{navigatableMembersRoles:[],isNavigationAllowed:!1}}async navigateToMember(e,t){let{memberId:r,memberSlug:n}=e;const i=n||r;if(!r)throw t&&t("Error: please provide site member ID"),new Error("Error: please provide site member ID");const o=vt(this.appRouters);if(o){var s,a;const e=`/${o.routerPrefix}${o.patternKey.replace(Be,i)}`;null==(s=(a=this.wixLocation).to)||s.call(a,e)}}async getMemberPagePrefix(e,t,r){let{type:n="public"}=e;if(!this.appRouters)throw r&&r(`Can not get prefix for type ${n} - no routers`),new Error(`Can not get prefix for type ${n} - no routers`);const i=this.appRouters.filter(e=>JSON.parse(e.config).type===n).pop();if(!i)throw r&&r(`Can not get prefix for type ${n}`),new Error(`Can not get prefix for type ${n}`);return t&&t({type:n,prefix:i.prefix}),{type:n,prefix:i.prefix}}updateCounterForNotificationApp(e,t){var r;const n=t||void 0,i={appDefId:Ue,numbers:{notificationsCount:{public:!1,count:n}}};return!(null==e||null==(r=e.apps)||!r.find(e=>{let{appDefId:t}=e;return t===Ue}))?{apps:e.apps.map(e=>{var t;return e.appDefId===Ue?{...e,numbers:{...e.numbers,notificationsCount:{...null==(t=e.numbers)?void 0:t.notificationsCount,count:n}}}:e})}:{apps:[...(null==e?void 0:e.apps)||[],i]}}async setNotificationCount(e){var t;let{config:r,userService:n,displayCount:i}=e;const o=null==(t=this.wixCodeApi)||null==(t=t.site)||null==t.getAppToken?void 0:t.getAppToken(r.appParams.appDefinitionId),s=n.getCurrentUser(),a=n.getViewedUser(),u=this.updateCounterForNotificationApp(this.cacheService.getNumbers(o,s.id),i);this.cacheService.setNumbers(o,s.id,u);const l=this.getMenuRenderOptions({config:r,userService:n,appsCounters:u,enablePreview:!1,flowAPI:this.flowAPI}),{publicRouterPrefix:c,parsedRouters:f,parsedRoutersConfigs:d,parsedConfigItems:p,viewedUserRoles:h}=l,g={counters:{currentUserCounters:u,viewedUserCounters:this.cacheService.getNumbers(o,a.id)??void 0},parsedRouters:f,parsedRoutersConfigs:d,parsedConfigItems:p,currentUserRoles:n.getRoles()[s.id],viewedUserRoles:h,publicRouterPrefix:c};return qe("renderMembersMenuItems",()=>un(r,g,this.flowAPI))()}async enterPublicProfilePreviewMode(e){var t;let{config:r,userService:n}=e;const{appParams:i}=r,o=n.getViewedUser(),s=null==(t=this.wixCodeApi)||null==(t=t.site)||null==t.getAppToken?void 0:t.getAppToken(i.appDefinitionId),a=this.cacheService.hasNumbers(s,o.id)?this.cacheService.getNumbers(s,o.id):n.fetchMenuCounters(o),u=this.getMenuRenderOptions({config:r,userService:n,appsCounters:a,enablePreview:!0,flowAPI:this.flowAPI});return qe("renderMembersMenuItems",()=>gt(u))()}leavePublicProfilePreviewMode(e){var t;let{config:r,userService:n}=e;const{appParams:i}=r,o=n.getViewedUser(),s=null==(t=this.wixCodeApi)||null==(t=t.site)||null==t.getAppToken?void 0:t.getAppToken(i.appDefinitionId),a=this.cacheService.hasNumbers(s,o.id)?this.cacheService.getNumbers(s,o.id):n.fetchMenuCounters(o),u=this.getMenuRenderOptions({config:r,userService:n,appsCounters:a,enablePreview:!1,flowAPI:this.flowAPI});return qe("renderMembersMenuItems",()=>gt(u))()}clearMenus(e){let{config:t}=e;return function(e){const t=e(Ge),r=e(Ke);t.forEach(e=>{e.items=[]}),r.forEach(e=>{e.items=[]})}(null==t?void 0:t.$w)}getIsMembersAreaSeoEnabled(e){let{config:t}=e;const r=null==t?void 0:t.config.isMembersAreaSeoEnabled;return Promise.resolve(r)}isAppSectionInstalled(e){let{appDefinitionId:t,sectionId:r}=e;return!!this.getRoute(t,r)}}class _t{constructor(e){this.storage=e}hasCurrentUser(e){const t=this.getCurrentUserCacheKey(e);return this.hasItemInStorage(t)}getCurrentUser(e){const t=this.getCurrentUserCacheKey(e);return this.getItemFromStorage(t)}setCurrentUser(e,t){const r=this.getCurrentUserCacheKey(e);return this.setItemToStorage(r,t)}hasViewedUser(e,t){const r=this.getViewedUserCacheKey(e,t);return this.hasItemInStorage(r)}getViewedUser(e,t){const r=this.getViewedUserCacheKey(e,t);return this.getItemFromStorage(r)}setViewedUser(e,t,r){const n=this.getViewedUserCacheKey(e,t);return this.setItemToStorage(n,r)}hasRoles(e,t){const r=this.getRolesCacheKey(e,t);return this.hasItemInStorage(r)}getRoles(e,t){const r=this.getRolesCacheKey(e,t);return this.getItemFromStorage(r)}setRoles(e,t,r){const n=this.getRolesCacheKey(e,t);return this.setItemToStorage(n,r)}hasNumbers(e,t){const r=this.getNumbersCacheKey(e,t);return this.hasItemInStorage(r)}getNumbers(e,t){const r=this.getNumbersCacheKey(e,t);return this.getItemFromStorage(r)}setNumbers(e,t,r){const n=this.getNumbersCacheKey(e,t);return this.setItemToStorage(n,r)}hasItemInStorage(e){return!!this.storage.getItem(e)}getItemFromStorage(e){const t=this.storage.getItem(e);return t?JSON.parse(t):null}setItemToStorage(e,t){return this.storage.setItem(e,JSON.stringify(t))}getCurrentUserCacheKey(e){return`cu-${e}`}getViewedUserCacheKey(e,t){return`vu-${t}-${e}`}getRolesCacheKey(e,t){return t?`roles-${t}-${e}`:`roles-${e}`}getNumbersCacheKey(e,t){return`numbers-${t}-${e}`}}r(735);_;const yt=async(e,{withErrorHandler:t,getResolvedError:r},n)=>{try{return await t(e,n)}catch(e){return e instanceof Error&&(e.__resolvedError=r(e)),Promise.reject(e)}};var wt,St,Pt,It;!function(e){e.ABOUT="ABOUT",e.MY_ACCOUNT="MY_ACCOUNT",e.MY_REWARDS="MY_REWARDS",e.GROUPS="GROUPS",e.FORUM_POSTS="FORUM_POSTS",e.FORUM_COMMENTS="FORUM_COMMENTS",e.EVENTS="EVENTS",e.FOLLOWING_FOLLOWERS="FOLLOWING_FOLLOWERS",e.FOLLOWING_FOLLOWERS_LIGHTBOX="FOLLOWING_FOLLOWERS_LIGHTBOX",e.BLOG_COMMENTS="BLOG_COMMENTS",e.BLOG_LIKES="BLOG_LIKES",e.BLOG_POSTS="BLOG_POSTS",e.BLOG_DRAFTS="BLOG_DRAFTS",e.MY_POSTS="MY_POSTS",e.MY_CHALLENGES="MY_CHALLENGES",e.MY_PROGRAMS="MY_PROGRAMS",e.MY_SUBSCRIPTIONS="MY_SUBSCRIPTIONS",e.MY_BOOKINGS="MY_BOOKINGS",e.NOTIFICATIONS="NOTIFICATIONS",e.SETTINGS="SETTINGS",e.MY_ADDRESSES="MY_ADDRESSES",e.MY_ORDERS="MY_ORDERS",e.MY_WALLET="MY_WALLET",e.SHARED_GALLERY="SHARED_GALLERY",e.FILE_SHARE="FILE_SHARE",e.TEST_PUBLIC="TEST_PUBLIC",e.TEST_PRIVATE="TEST_PRIVATE",e.MY_WISHLIST="MY_WISHLIST",e.PROFILE_CARD="PROFILE_CARD",e.MEMBER_PAGE="MEMBER_PAGE",e.SETTINGS_PAGE="SETTINGS_PAGE"}(wt||(wt={})),function(e){e.About="14dbef06-cc42-5583-32a7-3abd44da4908",e.MyAccount="14cffd81-5215-0a7f-22f8-074b0e2401fb",e.Members="14dbefd2-01b4-fb61-32a7-3abd44da4908",e.Blog="14bcded7-0066-7c35-14d7-466cb3f09103",e.FileShare="1537b24e-29d1-6d8f-b8e1-d6860f2f70b9",e.Followers="14ebe801-d78a-daa9-c9e5-0286a891e46f",e.Forum="14724f35-6794-cd1a-0244-25fd138f9242",e.Addresses="1505b775-e885-eb1b-b665-1e485d9bf90e",e.Bookings="13d21c63-b5ec-5912-8397-c3a5ddb27a97",e.Events="140603ad-af8d-84a5-2c80-a0f60cb47351",e.Stores="1380b703-ce81-ff05-f115-39571d94dfcd",e.Wallet="4aebd0cb-fbdb-4da7-b5d1-d05660a30172",e.Notifications="14f25924-5664-31b2-9568-f9c5ed98c9b1",e.Settings="14f25dc5-6af3-5420-9568-f9c5ed98c9b1",e.SharedGallery="476dc2dd-e16e-43b0-a0aa-1a486c78fbe2",e.Subscriptions="2bef2abe-7abe-43da-889c-53c1500a328c",e.ProfilePageBob="b976560c-3122-4351-878f-453f337b7245",e.Programs="2936472a-a1ed-4ae5-9f71-614313a9f4e7",e.Rewards="16ed1ac6-01cb-4fb6-a59e-c215cce8fdf6",e.Groups="148c2287-c669-d849-d153-463c7486a694",e.TestVertical="567d5e7e-4224-4488-a24b-d1ee5f691e54",e.ContributorProfile="f9694946-7e53-4ab4-9cc7-21d275993d39"}(St||(St={})),function(e){e.MemberPage="member_page",e.SettingsPage="member_settings_page",e.About="about",e.MyAccount="member_info",e.FollowingFollowers="following_followers",e.FollowingFollowersLightbox="following_followers_modal",e.MyRewards="My Rewards",e.ForumPosts="member-posts-page",e.ForumComments="member-comments-page",e.Events="events_members_page",e.BlogComments="member-comments-page",e.BlogLikes="member-likes-page",e.BlogPosts="member-posts-page",e.BlogDrafts="member-drafts-page",e.MyPosts="My Posts",e.MyChallenges="My Challenges",e.MyPrograms="My Programs",e.MySubscriptions="My Subscriptions",e.MyBookings="bookings_member_area",e.Notifications="notifications_app",e.MyAddresses="my_addresses",e.MyOrders="order_history",e.MyWallet="my_wallet",e.Settings="settings",e.SharedGallery="Gallery",e.FileShare="wix_file_share_members_page",e.MyWishlist="wishlist",e.ContributorProfile="contributor-profile",e.Groups="My Groups",e.TestPublic="test-vertical-public-widget",e.TestPrivate="test-vertical-private-widget",e.ProfilePageBob="test-profile-page-bob"}(Pt||(Pt={})),function(e){e.About="14dbefb9-3b7b-c4e9-53e8-766defd30587",e.MyAccount="14dd1af6-3e02-63db-0ef2-72fbc7cc3136",e.MyRewards="c85a2896-9f7c-4cf1-9bf8-95852cc5219a",e.Groups="e018cc55-7b1c-4500-a2e5-969f22c8a33a",e.ForumPosts="14f0266c-e0a3-afc6-d07c-5be8e20949cd",e.ForumComments="14f51b00-3ada-272e-b6db-34d5da9dd623",e.Events="405eb115-a694-4e2b-abaa-e4762808bb93",e.FollowingFollowers="14ebe825-b273-0d5f-0fd1-e6293322b83b",e.FollowingFollowersLightbox="a26fd26a-3dd9-42ca-b381-326a9c143e38",e.BlogComments="14f260f9-c2eb-50e8-9b3c-4d21861fe58f",e.BlogLikes="14f26109-514f-f9a8-9b3c-4d21861fe58f",e.BlogPosts="14f26118-b65b-b1c1-b6db-34d5da9dd623",e.BlogDrafts="14f260e4-ea13-f861-b0ba-4577df99b961",e.MyPosts="e5a2773b-0e6b-4cbb-a012-3b4a69e92046",e.MyChallenges="384628b7-c716-4410-8fc5-4e2bd5aad178",e.MyPrograms="c88902a1-7fbf-4ff1-b19a-af39c48bc740",e.MySubscriptions="b29db04a-a8f2-4bfe-bbad-21c99c1054b5",e.MyBookings="14edb332-fdb9-2fe6-0fd1-e6293322b83b",e.Notifications="14f2595a-a352-3ff1-9b3c-4d21861fe58f",e.Settings="14f25dd2-f9b0-edc2-f38e-eded5da094aa",e.MyAddresses="151290e1-62a2-0775-6fbc-02182fad5dec",e.MyOrders="14e121c8-00a3-f7cc-6156-2c82a2ba8fcb",e.MyWallet="6467c15e-af3c-4e8d-b167-41bfb8efc32a",e.SharedGallery="11b7884b-eba1-4a47-b5c8-7afb395f966a",e.FileShare="35a4cb97-c8cd-4ee9-ac3c-89c13c8493d6",e.TestPublic="eed51e05-c783-4506-9fb3-0f5c47d6dea2",e.TestPrivate="cc87eeb5-95a9-4f49-b7c3-5246eb39fee0",e.MyWishlist="a63a5215-8aa6-42af-96b1-583bfd74cff5",e.ProfileCard="14cefc05-d163-dbb7-e4ec-cd4f2c4d6ddd",e.MemberPage="596a6688-3ad7-46f7-bb9c-00023225876d",e.SettingsPage="2f6c5608-393f-4b15-bfd8-d4e15396787a"}(It||(It={}));const At={[wt.ABOUT]:It.About,[wt.MY_ACCOUNT]:It.MyAccount,[wt.MY_REWARDS]:It.MyRewards,[wt.GROUPS]:It.Groups,[wt.FORUM_POSTS]:It.ForumPosts,[wt.FORUM_COMMENTS]:It.ForumComments,[wt.EVENTS]:It.Events,[wt.FOLLOWING_FOLLOWERS]:It.FollowingFollowers,[wt.FOLLOWING_FOLLOWERS_LIGHTBOX]:It.FollowingFollowersLightbox,[wt.BLOG_COMMENTS]:It.BlogComments,[wt.BLOG_LIKES]:It.BlogLikes,[wt.BLOG_POSTS]:It.BlogPosts,[wt.BLOG_DRAFTS]:It.BlogDrafts,[wt.MY_POSTS]:It.MyPosts,[wt.MY_CHALLENGES]:It.MyChallenges,[wt.MY_PROGRAMS]:It.MyPrograms,[wt.MY_SUBSCRIPTIONS]:It.MySubscriptions,[wt.MY_BOOKINGS]:It.MyBookings,[wt.NOTIFICATIONS]:It.Notifications,[wt.SETTINGS]:It.Settings,[wt.MY_ADDRESSES]:It.MyAddresses,[wt.MY_ORDERS]:It.MyOrders,[wt.MY_WALLET]:It.MyWallet,[wt.SHARED_GALLERY]:It.SharedGallery,[wt.FILE_SHARE]:It.FileShare,[wt.TEST_PUBLIC]:It.TestPublic,[wt.TEST_PRIVATE]:It.TestPrivate,[wt.MY_WISHLIST]:It.MyWishlist,[wt.PROFILE_CARD]:It.ProfileCard,[wt.MEMBER_PAGE]:It.MemberPage,[wt.SETTINGS_PAGE]:It.SettingsPage};It.About,wt.ABOUT,It.MyAccount,wt.MY_ACCOUNT,It.MyRewards,wt.MY_REWARDS,It.Groups,wt.GROUPS,It.ForumPosts,wt.FORUM_POSTS,It.ForumComments,wt.FORUM_COMMENTS,It.Events,wt.EVENTS,It.FollowingFollowers,wt.FOLLOWING_FOLLOWERS,It.FollowingFollowersLightbox,wt.FOLLOWING_FOLLOWERS_LIGHTBOX,It.BlogComments,wt.BLOG_COMMENTS,It.BlogLikes,wt.BLOG_LIKES,It.BlogPosts,wt.BLOG_POSTS,It.BlogDrafts,wt.BLOG_DRAFTS,It.MyPosts,wt.MY_POSTS,It.MyChallenges,wt.MY_CHALLENGES,It.MyPrograms,wt.MY_PROGRAMS,It.MySubscriptions,wt.MY_SUBSCRIPTIONS,It.MyBookings,wt.MY_BOOKINGS,It.Notifications,wt.NOTIFICATIONS,It.Settings,wt.SETTINGS,It.MyAddresses,wt.MY_ADDRESSES,It.MyOrders,wt.MY_ORDERS,It.MyWallet,wt.MY_WALLET,It.SharedGallery,wt.SHARED_GALLERY,It.FileShare,wt.FILE_SHARE,It.TestPublic,wt.TEST_PUBLIC,It.TestPrivate,wt.TEST_PRIVATE,It.MyWishlist,wt.MY_WISHLIST,It.ProfileCard,wt.PROFILE_CARD,It.MemberPage,wt.MEMBER_PAGE,It.SettingsPage,wt.SETTINGS_PAGE,It.About,Pt.About,St.About,It.MyAccount,Pt.MyAccount,St.MyAccount,It.MyRewards,Pt.MyRewards,St.Rewards,It.Groups,Pt.Groups,St.Groups,It.ForumPosts,Pt.ForumPosts,St.Forum,It.ForumComments,Pt.ForumComments,St.Forum,It.Events,Pt.Events,St.Events,It.FollowingFollowers,Pt.FollowingFollowers,St.Followers,It.FollowingFollowersLightbox,Pt.FollowingFollowersLightbox,St.ProfilePageBob,It.BlogComments,Pt.BlogComments,St.Blog,It.BlogLikes,Pt.BlogLikes,St.Blog,It.BlogPosts,Pt.BlogPosts,St.Blog,It.BlogDrafts,Pt.BlogDrafts,St.Blog,It.MyPosts,Pt.MyPosts,St.Blog,It.MyChallenges,Pt.MyChallenges,St.Programs,It.MyPrograms,Pt.MyPrograms,St.Programs,It.MySubscriptions,Pt.MySubscriptions,St.Subscriptions,It.MyBookings,Pt.MyBookings,St.Bookings,It.Notifications,Pt.Notifications,St.Notifications,It.MyAddresses,Pt.MyAddresses,St.Addresses,It.MyOrders,Pt.MyOrders,St.Stores,It.MyWishlist,Pt.MyWishlist,St.Stores,It.MyWallet,Pt.MyWallet,St.Wallet,It.Settings,Pt.Settings,St.Settings,It.SharedGallery,Pt.SharedGallery,St.SharedGallery,It.FileShare,Pt.FileShare,St.FileShare,It.TestPublic,Pt.TestPublic,St.TestVertical,It.TestPrivate,Pt.TestPrivate,St.TestVertical,It.ProfileCard,Pt.MyAccount,St.MyAccount,It.MemberPage,Pt.MemberPage,St.ProfilePageBob,It.SettingsPage,Pt.SettingsPage,St.ProfilePageBob,It.About,It.MyAccount,Me.xA,Me.dn,It.BlogLikes,Me.dn,It.BlogComments,Me.dn,It.BlogPosts,It.FileShare,It.FollowingFollowers,Me.rH,It.FollowingFollowersLightbox,Me.tt,It.ForumComments,Me.tt,It.ForumPosts,It.MyAddresses,Me.DI,It.MyBookings,Me.dn,It.BlogDrafts,Me.dn,It.MyPosts,Me.sV,It.Events,Me.ZJ,It.MyOrders,It.MyWallet,Me.ZJ,It.MyWishlist,Me.wn,It.Notifications,It.Settings,It.SharedGallery,It.MySubscriptions,It.MyChallenges,It.MyPrograms,It.MyRewards,It.SettingsPage,It.MemberPage,It.Groups,It.TestPublic,It.TestPrivate;var Et;!function(e){e.Profile="profile",e.Settings="settings",e.Standalone="standalone",e.Lightbox="lightbox"}(Et||(Et={}));const Ot=e=>{const{paths:t,states:r,vfrValues:n,data:i}=e;return i.map(e=>{const i={path:t[e.p],state:r[e.s],widgetId:(o=e.w,At[o])};var o;return e.h&&(i.home=!0),1===e.r&&(i.private=!0),0===e.r&&(i.private=!1),e.v&&(i.vfr=e.v.map(e=>n[e])),i})},Rt=e=>!!e&&!Array.isArray(e)&&"object"==typeof e&&1===e.version;const Ct=e=>e.split("#");const Mt=/{(.*)}/,xt=new RegExp(`\\.(${["wix.com","editorx.com"].join("|")})$`),Nt=new RegExp(`\\.(${["42.wixprod.net","uw2-edt-1.wixprod.net"].join("|")})$`),Tt=new RegExp(".*\\.dev.wix-code.com$");function Dt(e){const t=function(e,t){const r=t[e]||t._;if(r)return r;const n=function(e,t){return Object.entries(t).find(([t])=>{const[r,...n]=e.split(".");return n.join(".")===t})?.[1]}(e,t);if(!n&&function(e){return!!e.match(/\._base_domain_$/)}(e))return t[Ut];return n??[]}(function(e){return e.replace("create.editorx.com","editor.editorx.com")}(e.host).replace(xt,"._base_domain_").replace(Nt,"._api_base_domain_").replace(Tt,"*.dev.wix-code.com"),e.domainToMappings);var r,n;return function(e,t){const r=t?.find(t=>e.startsWith(t.destPath));if(!r)return e;return r.srcPath+e.slice(r.destPath.length)}((r=e.protoPath,n=e.data||{},r.split("/").map(e=>function(e,t){const r=e.match(Mt)||[],n=r[1];if(n){const i=e.replace(r[0],"");return function(e,t,r,n){let i=e;for(const e of t.split(".")){if(!i)return r;i=i[e]}return`${i}${n}`}(t,n,e,i)}return e}(e,n)).join("/")),t)}const Ut="www._base_domain_",Lt="function"==typeof Buffer,kt=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),Bt=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Ft=(e=>{let t={};return e.forEach((e,r)=>t[e]=r),t})(Bt),jt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Vt=String.fromCharCode.bind(String),Wt=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_")),Gt=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),$t=e=>{let t,r,n,i,o="";const s=e.length%3;for(let s=0;s<e.length;){if((r=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|i,o+=Bt[t>>18&63]+Bt[t>>12&63]+Bt[t>>6&63]+Bt[63&t]}return s?o.slice(0,s-3)+"===".substring(s):o},Kt="function"==typeof btoa?e=>btoa(e):Lt?e=>Buffer.from(e,"binary").toString("base64"):$t,Ht=Lt?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(Vt.apply(null,e.subarray(r,r+4096)));return Kt(t.join(""))},Yt=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?Vt(192|t>>>6)+Vt(128|63&t):Vt(224|t>>>12&15)+Vt(128|t>>>6&63)+Vt(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return Vt(240|t>>>18&7)+Vt(128|t>>>12&63)+Vt(128|t>>>6&63)+Vt(128|63&t)},Jt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,qt=e=>e.replace(Jt,Yt),zt=Lt?e=>Buffer.from(e,"utf8").toString("base64"):kt?e=>Ht(kt.encode(e)):e=>Kt(qt(e)),Xt=(e,t=!1)=>t?Wt(zt(e)):zt(e),Zt=e=>{if(e=e.replace(/\s+/g,""),!jt.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,i="";for(let o=0;o<e.length;)t=Ft[e.charAt(o++)]<<18|Ft[e.charAt(o++)]<<12|(r=Ft[e.charAt(o++)])<<6|(n=Ft[e.charAt(o++)]),i+=64===r?Vt(t>>16&255):64===n?Vt(t>>16&255,t>>8&255):Vt(t>>16&255,t>>8&255,255&t);return i};function Qt(e,t=""){const r={};return Object.entries(e).forEach(([e,n])=>{const i=null!==n&&"object"==typeof n&&!Array.isArray(n),o=function(e,t){return`${e}${e?".":""}${t}`}(t,e);if(i){const e=Qt(n,o);Object.assign(r,e)}else r[o]=n}),r}function er(e,t){const r=Qt(e),n=Object.entries(r).some(([e,t])=>e.includes(".")||Array.isArray(t)&&t.some(e=>"object"==typeof e));return t&&n?new URLSearchParams({".r":Xt(JSON.stringify(e),!0)}):Object.entries(r).reduce((e,[t,r])=>((Array.isArray(r)?r:[r]).forEach(n=>{null==n||Array.isArray(r)&&"object"==typeof n||e.append(t,n)}),e),new URLSearchParams)}var tr;function rr(e,t={},r){return function(n={},i){return"string"==typeof n?n:o(e,n);function o(e,t){const r={};return[null,void 0].includes(t)?t:(Object.entries(t).forEach(([t,n])=>{const i=e[t],{schemaName:o,schemaType:u}=function(e=""){const[t,r]=Ct(e);return r?{schemaName:r,schemaType:t}:{schemaName:t}}(i),l="Map"===u;let c;c=a(o)?.checkRepetable?.(n)??Array.isArray(n)?n.map(e=>s(e,o)):l?function(e,t){return Object.entries(e).reduce((e,[r,n])=>(e[r]=s(n,t),e),{})}(n,o):s(n,o),r[t]=c}),r)}function s(e,r){if(!r)return e;const n=t[r];if(a(r))return a(r).transform(e);if(n)return o(n,e);throw new Error(`${r} is neither schema nor serializable type`)}function a(e){return r[e]?.[i]}}}!function(e){e[e.TO_JSON=0]="TO_JSON",e[e.FROM_JSON=1]="FROM_JSON"}(tr||(tr={}));const nr={types:["google.protobuf.Timestamp"],[tr.TO_JSON]:{transform:e=>"string"!=typeof e&&e?e.toISOString():e},[tr.FROM_JSON]:{transform:e=>e?new Date(e):e}},ir={types:["google.protobuf.FieldMask"],[tr.TO_JSON]:{transform:e=>e.join(","),checkRepetable:e=>e.some(e=>Array.isArray(e))},[tr.FROM_JSON]:{transform:e=>"object"==typeof e?e.paths:e.split(",")}},or={types:["google.protobuf.BytesValue","BYTES"],[tr.TO_JSON]:{transform:e=>{const t=e.reduce((e,t)=>e+String.fromCharCode(t),"");return btoa(t)}},[tr.FROM_JSON]:{transform:e=>Uint8Array.from(atob(e),e=>e.charCodeAt(0))}},sr={types:["google.protobuf.Duration"],[tr.TO_JSON]:{transform:({seconds:e="0",nanos:t=0})=>{let r="";return 0!==t&&(r=`.${t.toString().padStart(9,"0")}`),`${e}${r}s`}},[tr.FROM_JSON]:{transform:e=>{const[t,r]=e.substring(0,e.length-1).split(".");return{seconds:t,nanos:ar(r)}}}};function ar(e){let t=0;if(void 0!==e){const r=3-e.length/3;t=parseInt(e,10)*Math.pow(1e3,r)}return t}const ur={types:["FLOAT","DOUBLE","google.protobuf.FloatValue","google.protobuf.DoubleValue"],[tr.TO_JSON]:{transform:e=>isFinite(e)?e:e.toString()},[tr.FROM_JSON]:{transform:e=>"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:e}};const lr=[...[nr,ir,or,sr,ur]].reduce((e,t)=>({...e,...t.types.reduce((e,r)=>({...e,[r]:t}),{})}),{});function cr(e,t={}){const r=rr(e,t,lr);return{fromJSON(e){const t=function(e){try{return JSON.parse(e)}catch(e){}}(e)||e;return r(t,tr.FROM_JSON)},toJSON:e=>r(e,tr.TO_JSON)}}var fr={},dr={};function pr(e){return Dt(Object.assign(e,{domainToMappings:{"api._api_base_domain_":[{srcPath:"/members/v1/roles",destPath:""}],_:[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"www._base_domain_":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"members.wixapps.net":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"www.wixapis.com":[{srcPath:"/members/v1/roles",destPath:"/v1/roles"}],"editor._base_domain_":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"blocks._base_domain_":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"create.editorx":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"*.dev.wix-code.com":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}],"manage._base_domain_":[{srcPath:"/_api/members/v1/roles",destPath:"/v1/roles"}]}}))}class hr{constructor(e,t){this.httpClient=e,this.errorHandler=t}async getMemberRoles(e){var t;const{data:r}=await yt(()=>this.httpClient.request(function(e){var t=cr(fr,{}),r=t.toJSON,n=t.fromJSON,i=cr(dr,{}).fromJSON;function o(t){var n=t.host,o=r(e);return{entityFqdn:"wix.members.v1.role",method:"GET",methodFqn:"com.wixpress.members.memberroles.MemberRoles.GetRoles",url:pr({protoPath:"/v1/roles/members/{memberId}",data:o,host:n}),params:er(o),transformResponse:i}}return o.fromReq=n,o.__isAmbassador=!0,o}({memberId:e})),this.errorHandler,{errorCodesMap:{}});return(null==(t=r.roles)?void 0:t.map(e=>{var t;return null==(t=e.roleKey)?void 0:t.toLocaleLowerCase()}))||[]}}var gr={},vr={};function mr(e){return Dt(Object.assign(e,{domainToMappings:{"api._api_base_domain_":[{srcPath:"/activity-counters-api",destPath:""}],"www.wixapis.com":[{srcPath:"/members/v1/activity-counters",destPath:"/v1/activity-counters"}],_:[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}],"manage._base_domain_":[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}],"www._base_domain_":[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}],"*.dev.wix-code.com":[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}],"editor._base_domain_":[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}],"blocks._base_domain_":[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}],"create.editorx":[{srcPath:"/_api/members/v1/activity-counters",destPath:"/v1/activity-counters"}]}}))}var br,_r,yr,wr,Sr,Pr,Ir,Ar,Er,Or,Rr,Cr,Mr,xr,Nr={},Tr={};function Dr(e){return Dt(Object.assign(e,{domainToMappings:{"apps._base_domain_":[{srcPath:"/_api/members-feed-viewer",destPath:""}],_:[{srcPath:"/_api/members-feed-viewer",destPath:""}],"editor._base_domain_":[{srcPath:"/_api/members-feed-viewer",destPath:""}],"blocks._base_domain_":[{srcPath:"/_api/members-feed-viewer",destPath:""}],"create.editorx":[{srcPath:"/_api/members-feed-viewer",destPath:""}],"editor.wixapps.net":[{srcPath:"/_api/members-feed-viewer",destPath:""}],"*.dev.wix-code.com":[{srcPath:"/_api/members-feed-viewer",destPath:""}]}}))}!function(e){e.UNKNOWN_NOTIFICATION_TYPE="UNKNOWN_NOTIFICATION_TYPE",e.REGULAR="REGULAR",e.ALERT_WARNING="ALERT_WARNING",e.ALERT_INFO="ALERT_INFO"}(br||(br={})),function(e){e.UNKNOWN_CHANNEL="UNKNOWN_CHANNEL",e.WEB="WEB",e.MOBILE="MOBILE"}(_r||(_r={})),function(e){e.UNKNOWN_STATUS="UNKNOWN_STATUS",e.UNSEEN="UNSEEN",e.SEEN_BUT_UNREAD="SEEN_BUT_UNREAD",e.READ="READ",e.RESOLVED="RESOLVED",e.DISMISSED="DISMISSED"}(yr||(yr={})),function(e){e.UNKNOWN_TYPE="UNKNOWN_TYPE",e.WEB_URL="WEB_URL",e.MOBILE="MOBILE",e.DASHBOARD_PAGE="DASHBOARD_PAGE"}(wr||(wr={})),function(e){e.UNKNOWN_TYPE="UNKNOWN_TYPE",e.WEB_URL="WEB_URL",e.APP="APP",e.PERSON_AVATAR="PERSON_AVATAR"}(Sr||(Sr={})),function(e){e.UNKNOWN_ACTION_TYPE="UNKNOWN_ACTION_TYPE",e.DELETE="DELETE",e.STATUS_CHANGE="STATUS_CHANGE"}(Pr||(Pr={})),function(e){e.ASC="ASC",e.DESC="DESC"}(Ir||(Ir={})),function(e){e.UNKNOWN="UNKNOWN",e.ANONYMOUS_VISITOR="ANONYMOUS_VISITOR",e.MEMBER="MEMBER",e.WIX_USER="WIX_USER",e.APP="APP"}(Ar||(Ar={})),function(e){e.UNKNOWN_TYPE="UNKNOWN_TYPE",e.TEXT="TEXT"}(Er||(Er={})),function(e){e.UNKNOWN_TYPE="UNKNOWN_TYPE",e.WIX_USER="WIX_USER",e.APP="APP",e.CONTACT="CONTACT",e.SITE_MEMBER="SITE_MEMBER"}(Or||(Or={})),function(e){e.UNKNOWN_TYPE="UNKNOWN_TYPE",e.WEB_URL="WEB_URL",e.LIVE_SITE="LIVE_SITE",e.BACKOFFICE="BACKOFFICE"}(Rr||(Rr={})),function(e){e.UNKNOWN_TYPE="UNKNOWN_TYPE",e.APP="APP",e.PERSON_AVATAR="PERSON_AVATAR"}(Cr||(Cr={})),function(e){e.HOURS="HOURS",e.DAYS="DAYS",e.MINUTES="MINUTES"}(Mr||(Mr={})),function(e){e.UNKNOWN_TYPE="UNKNOWN_TYPE",e.DEV_CENTER="DEV_CENTER",e.LEGACY_PING="LEGACY_PING",e.AUTOMATIONS="AUTOMATIONS"}(xr||(xr={}));var Ur,Lr,kr,Br,Fr,jr={},Vr={};function Wr(e){return Dt(Object.assign(e,{domainToMappings:{"api._api_base_domain_":[{srcPath:"/notifications-feed-api-proxy",destPath:""}],"apps._base_domain_":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"}],"editor._base_domain_":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"}],"blocks._base_domain_":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"}],"create.editorx":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"}],"gapps._base_domain_":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"}],"manage._base_domain_":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"},{srcPath:"/_api/ping/notifications-feed/v1/feed",destPath:"/v1/feed"},{srcPath:"/_api/ping/notifications-feed/api/v1/feed",destPath:"/api/v1/feed"}],"www._base_domain_":[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"},{srcPath:"/_api/ping/notifications-feed/v1/feed",destPath:"/v1/feed"},{srcPath:"/_api/ping/notifications-feed/api/v1/feed",destPath:"/api/v1/feed"}],_:[{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"},{srcPath:"/api/ping/feed",destPath:""},{srcPath:"/api/v1/feed/notifications",destPath:"/api/v1/feed/notifications"}],"*.dev.wix-code.com":[{srcPath:"/api/v1/feed/notifications",destPath:"/api/v1/feed/notifications"},{srcPath:"/_api/ping/feed",destPath:"/api/v1/feed/notifications"}]}}))}!function(e){e.UNSEEN="UNSEEN",e.SEEN_BUT_UNREAD="SEEN_BUT_UNREAD",e.READ="READ",e.RESOLVED="RESOLVED",e.DISMISSED="DISMISSED",e.DELETED="DELETED"}(Ur||(Ur={})),function(e){e.REGULAR="REGULAR",e.ALERT_WARNING="ALERT_WARNING",e.ALERT_INFO="ALERT_INFO"}(Lr||(Lr={})),function(e){e.UrlIcon="UrlIcon",e.AppIcon="AppIcon",e.PersonAvatar="PersonAvatar"}(kr||(kr={})),function(e){e.UNKOWN="UNKOWN",e.WEB="WEB",e.MOBILE="MOBILE"}(Br||(Br={})),function(e){e.HideChatNotifications="HideChatNotifications"}(Fr||(Fr={}));const Gr=e=>{let{httpClient:t,signedInstance:r,withErrorHandler:n}=e;return n(()=>t.request(function(e){var t=cr(Nr,{}),r=t.toJSON,n=t.fromJSON,i=cr(Tr,{}).fromJSON;function o(t){var n=t.host,o=r(e);return{entityFqdn:"wix.notifications.members_feed.v1.members_viewer_feed_notification",method:"POST",methodFqn:"wix.notifications.members_feed_viewer.v1.MembersViewerFeedNotificationsService.CountViewerFeedNotifications",url:Dr({protoPath:"/v1/members-viewer-feed-notifications/count",data:o,host:n}),data:o,transformResponse:i}}return o.fromReq=n,o.__isAmbassador=!0,o}({filter:{channel:_r.WEB,status:yr.UNSEEN},maxCount:100}),{signedInstance:r}),{errorCodesMap:{}})},$r=e=>{let{httpClient:t,signedInstance:r,metaSiteId:n,contactId:i,withErrorHandler:o}=e;return o(()=>t.request(function(e){var t=cr(jr,{}),r=t.toJSON,n=t.fromJSON,i=cr(Vr,{}).fromJSON;function o(t){var n=t.host,o=r(e);return{entityFqdn:"wix.ping.feed.v1.notification",method:"POST",methodFqn:"com.wixpress.ping.feed.api.FeedService.GetNumberOfUnseenNotifications",url:Wr({protoPath:"/api/v1/feed/notifications/unseen-notifications",data:o,host:n}),data:o,transformResponse:i}}return o.fromReq=n,o.__isAmbassador=!0,o}({shouldCancelMergeContactInMobile:!1,recipient:{contact:{metaSiteId:n,contactId:i}},feedFilter:{channel:Br.WEB},specialMigrationSpecs:[Fr.HideChatNotifications]}),{signedInstance:r}),{errorCodesMap:{}})};async function Kr(e){let{metaSiteId:t,flowAPI:r,memberId:n,wixCodeApi:i}=e;const o=null==i.site.getAppToken?void 0:i.site.getAppToken(Me.Kh);if(!o)return null;const s=r.experiments.enabled(ke.UseNotificationsV2Api),a={signedInstance:o,httpClient:r.httpClient,withErrorHandler:r.errorHandler.withErrorHandler};try{let e;if(s){const{data:{count:t}}=await Gr(a);e=t}else{var u;const r=await $r({...a,metaSiteId:t,contactId:n});e=null==r||null==(u=r.data)?void 0:u.numberOfUnseen}return e?{memberId:n,appId:Ue,counters:[{key:"notificationsCount",public:!1,count:e}]}:null}catch(e){var l;const{httpError:t}=r.errorHandler.getResolvedError(e);return null==(l=r.panoramaClient)||l.errorMonitor().reportError(t||e),null}}async function Hr(e,t){const{httpClient:r,errorHandler:{withErrorHandler:n}}=e;return n(()=>r.request(function(e){var t=cr(gr,{}),r=t.toJSON,n=t.fromJSON,i=cr(vr,{}).fromJSON;function o(t){var n=t.host,o=r(e);return{entityFqdn:"wix.members.v1.activity_counter",method:"GET",methodFqn:"com.wixpress.members.activitycounters.ActivityCounters.GetActivityCounters",url:mr({protoPath:"/v1/activity-counters/{memberId}",data:o,host:n}),params:er(o),transformResponse:i}}return o.fromReq=n,o.__isAmbassador=!0,o}({memberId:t})),{errorCodesMap:{}})}async function Yr(e){let{memberId:t,loggedIn:r,biService:n,flowAPI:i,wixCodeApi:o}=e;try{var s,a;const[e,u]=await Promise.all([Hr(i,t),r?Kr({metaSiteId:null==n||null==(s=n.bi)?void 0:s.metaSiteId,memberId:t,flowAPI:i,wixCodeApi:o}):null]),l=function(e){const t=[];return e.forEach(e=>{var r;if(e.appId!==Ue)return t.push(e);const n=null==(r=e.counters)?void 0:r.filter(e=>{let{key:t}=e;return"notificationsCount"!==t});null!=n&&n.length&&t.push({...e,counters:n})}),t}((null==e||null==(a=e.data)?void 0:a.activityCounters)||[]);u&&l.push(u);return l.map(e=>{var t;return{appDefId:e.appId,numbers:null==(t=e.counters)?void 0:t.reduce((e,t)=>(e[t.key]={public:t.public,count:t.count},e),{})}})}catch(e){var u;const{httpError:t}=i.errorHandler.getResolvedError(e);return null==(u=i.panoramaClient)||u.errorMonitor().reportError(t||e),[]}}const Jr="current-user-slug",qr="current-user-id";function zr(e){let{wixCodeApi:t,biService:r,flowAPI:n}=e;const i=new hr(n.httpClient,n.errorHandler);let o,s,a;return{getCurrentUser:function(){return s??{}},setCurrentUser:async function(e,r){const i=await function(e,r){const i=et(),o=i.getItem(Jr),s=i.getItem(qr);if(o&&s===e.id)return o;s&&s===e.id||i.setItem(qr,e.id);if(!e.loggedIn||"Site"!==t.window.viewMode)return e.id;return async function(e){const t=()=>e.get("/_api/members/v1/members/my"),{data:r}=await yt(t,n.errorHandler,{errorCodesMap:{}});return r.member.profile.slug}(r).then(e=>(i.setItem(Jr,e),e)).catch(()=>{var t,r,n;return t="Error while fetching current user slug",void 0===(r={userDataId:e.id})&&(r={}),null==(n=Ye)||n.errorMonitor().reportError(new Error(t),{severity:He.Error,...r}),e.id})}(e,r);s={id:e.id,loggedIn:e.loggedIn,slug:i}},getViewedUser:function(){return o??{}},setViewedUser:function(e){e&&(o=e)},fetchRoles:async function(e,t){const[r,n]=await Promise.all([e&&i.getMemberRoles(e).catch(()=>{}),t&&i.getMemberRoles(t).catch(()=>{})]);return{...r&&{[e]:r},...n&&{[t]:n}}},getRoles:function(){return a??{}},setRoles:function(e){a=e},fetchMenuCounters:function(e){return e&&!1!==e.loggedIn?new Promise((i,o)=>{const s=e&&e.id;s?Yr({memberId:s,loggedIn:!!e.loggedIn,biService:r,flowAPI:n,wixCodeApi:t}).then(e=>i({apps:e})):o(new Error("No user to get menu counters by"))}):Promise.resolve({apps:[]})},replaceUserPatternWithSlug:function(e,t){return e.replace(Be,t.slug).replace(encodeURI(Be),t.slug)}}}let Xr,Zr,Qr,en,tn;const rn=async(e,t,r,n,i)=>{let{appDefinitionId:o,routerReturnedData:s,appRouters:a=[]}=e,{storage:u}=t;if(en=zr({wixCodeApi:r,biService:i,flowAPI:n}),tn=(e=>new _t(e.memory))(u),Qr=new bt({appRouters:a,routerReturnedData:s,wixCodeApi:r,cacheService:tn,flowAPI:n}),function(e){Qe=e}(u.memory),await en.setCurrentUser(r.user.currentUser,n.httpClient),!s)return Promise.resolve();const l=null==r.site.getAppToken?void 0:r.site.getAppToken(o),c=s.memberData&&s.memberData.slugs||[],f=s.memberData&&s.memberData.memberContactId||s.userId,d=c.find(e=>e.primary),p={id:f,slug:d&&d.name||f};en.setViewedUser(p),en.setRoles(s.roles||{}),s.roles&&tn.setRoles(l,f,s.roles)},nn=async(e,t)=>{if(t)return{currentUserCounters:void 0,viewedUserCounters:void 0};const r=en.getCurrentUser(),n=en.getViewedUser(),i=async t=>{if(tn.hasNumbers(e,t.id))return tn.getNumbers(e,t.id);const r=await en.fetchMenuCounters(t);return tn.setNumbers(e,t.id,r),r},o=n.id===r.id,s=i(r),a=o?s:n.id?i(n):Promise.resolve({apps:[]}),[u,l]=await Promise.all([s,a]);return{currentUserCounters:u,viewedUserCounters:l}},on=async e=>{const t=en.getCurrentUser(),r=en.getViewedUser();if(tn.hasRoles(e,null==r?void 0:r.id))return tn.getRoles(e,null==r?void 0:r.id);const n=await en.fetchRoles(r.id,t.id);return tn.setRoles(e,null==r?void 0:r.id,n),n};function sn(e,t,r){const{wixCodeApi:n,$w:i}=e,o=en.getViewedUser(),s=en.getCurrentUser(),a="Mobile"===n.window.formFactor,u=et(),{parsedRoutersConfigs:l,viewedUserRoles:c,parsedConfigItems:f,counters:{viewedUserCounters:d},publicRouterPrefix:p}=t;qe("renderMembersMenuItems",()=>gt({$w:i,wixCodeApi:n,parsedRoutersConfigs:l,viewedUserRoles:c,viewedUser:o,currentUser:s,appsCounters:d,parsedConfigItems:f,memoryStorage:u,publicRouterPrefix:p,experiments:r.experiments,isMobile:a,flowAPI:r}))()}function an(e,t){const{$w:r,essentials:{experiments:n},wixCodeApi:i}=e,o=en.getCurrentUser(),s="Mobile"===i.window.formFactor,a=et(),{parsedRoutersConfigs:u,counters:{currentUserCounters:l},publicRouterPrefix:c,currentUserRoles:f}=t;qe("renderLoginMenuItems",()=>function(e){let{$w:t,parsedRoutersConfigs:r=[],currentUserRoles:n,currentUser:i,appsCounters:o,memoryStorage:s,publicRouterPrefix:a,experiments:u,isMobile:l}=e;if(i.loggedIn){const e=t(We),c=t($e);e.forEach(e=>ft({menu:e,parsedRoutersConfigs:r,currentUserRoles:n,currentUser:i,appsCounters:o,memoryStorage:s,publicRouterPrefix:a,experiments:u,isMobile:l})),c.forEach(e=>ft({menu:e,parsedRoutersConfigs:r,currentUserRoles:n,currentUser:i,appsCounters:o,memoryStorage:s,publicRouterPrefix:a,experiments:u,isMobile:l})),tt.setMembersLoginWidgets([...tt.getMembersLoginWidgets(),...e,...c])}}({$w:r,parsedRoutersConfigs:u,currentUserRoles:f,currentUser:o,appsCounters:l,memoryStorage:a,publicRouterPrefix:c,experiments:n,isMobile:s,wixCodeApi:i}))()}function un(e,t,r){an(e,t),sn(e,t,r)}const ln=e=>{Xr=e},cn=(e,t)=>en.setCurrentUser(e,t),fn=(e,t,r)=>{const n=((e,t)=>{const{prefix:r,path:n}=e.location,i=t.find(e=>{let{config:{type:t}}=e;return"public"===t});if((null==i?void 0:i.prefix)===r){const[,...e]=n;return`/${r}/${Be}/${e.join("/")}`}return`/${r}/${n.join("/")}`})(t,r),i=e=>{if(e.onChange){var t;const r=null==(t=e.options)?void 0:t.find(e=>{let{link:t}=e;return t===n});e.value=(null==r?void 0:r.value)??e.value}};e(Ge).forEach(i),e(Ke).forEach(i)},dn=async e=>{let{controllerConfig:t,appData:r,flowAPI:n}=e;const{wixCodeApi:i,$w:o}=t,s=t,a=!!o(We).length,u=!!o($e).length,l=!!o(Ge).length,c=!!o(Ke).length,f=a||u||l||c;if((e=>{Zr=e})(s),!f)return{async pageReady(){await(null==r?void 0:r.initApplication())}};const d="Editor"===i.window.viewMode;return ln(s),{async pageReady(){const e=await(null==r?void 0:r.initApplication());i.user.onLogin(t=>qe("onLogin",()=>cn(t,n.httpClient).then(()=>un(s,e,n)))()),d?n.environment.isMobile&&fn(o,i,e.parsedRouters):un(s,e,n)}}},pn=async e=>{let{controllerConfig:t}=e;const r=(e=>{var t;const r=null==(t=e.appParams)||null==(t=t.publicData)||null==(t=t.APP)?void 0:t.routes;if(!r||!Rt(r))return e;const n=Ot(r);return e.appParams.publicData.APP.routes=n,e})(t);return tt.setGlobalControllerConfig(r),{async pageReady(){}}},hn=async e=>{let{controllerConfig:t}=e;const r=t;return tt.setGlobalControllerConfig(r),{async pageReady(){}}},gn=async e=>(await(async e=>{const[t,r]=await Promise.all([Ne(e.controllerConfig.wixCodeApi),xe(e.controllerConfig.wixCodeApi)]);return t?hn:r?pn:dn})(e.flowAPI))(e),vn=async e=>{let{controllerConfig:t,appData:r,flowAPI:n}=e;const{wixCodeApi:i,$w:o}=t,s="Editor"===i.window.viewMode,a=t;return ln(a),{async pageReady(){const e=await(null==r?void 0:r.initApplication());i.user.onLogin(t=>qe("onLogin",()=>cn(t,n.httpClient).then(()=>an(a,e)))()),s?n.environment.isMobile&&fn(o,i,e.parsedRouters):an(a,e)}}};var mn,bn,_n,yn,wn,Sn,Pn,In,An,En,On={},Rn={member:"_member"},Cn={createdDate:"google.protobuf.Timestamp",updatedDate:"google.protobuf.Timestamp",lastLoginDate:"google.protobuf.Timestamp"};function Mn(e){return Dt(Object.assign(e,{domainToMappings:{"www.wixapis.com":[{srcPath:"/members/v1/members",destPath:"/v1/members"}],"api._api_base_domain_":[{srcPath:"/members-ng-api",destPath:""}],"www._base_domain_":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"manage._base_domain_":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"editor._base_domain_":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"blocks._base_domain_":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"create.editorx":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"editor.wixapps.net":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"*.dev.wix-code.com":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"bo._base_domain_":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"wixbo.ai":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"wix-bo.com":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],_:[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}],"members.wixapps.net":[{srcPath:"/_api/members/v1/members",destPath:"/v1/members"}]}}))}!function(e){e.UNKNOWN="UNKNOWN",e.PENDING="PENDING",e.APPROVED="APPROVED",e.BLOCKED="BLOCKED",e.OFFLINE="OFFLINE"}(mn||(mn={})),function(e){e.UNKNOWN="UNKNOWN",e.PRIVATE="PRIVATE",e.PUBLIC="PUBLIC"}(bn||(bn={})),function(e){e.UNKNOWN="UNKNOWN",e.ACTIVE="ACTIVE",e.MUTED="MUTED"}(_n||(_n={})),function(e){e.PUBLIC="PUBLIC",e.EXTENDED="EXTENDED",e.FULL="FULL"}(yn||(yn={})),function(e){e.ASC="ASC",e.DESC="DESC"}(wn||(wn={})),function(e){e.UNKNOWN="UNKNOWN",e.ENABLED="ENABLED",e.DISABLED="DISABLED",e.PENDING="PENDING",e.DEMO="DEMO"}(Sn||(Sn={})),function(e){e.OTHER="OTHER",e.FROM_TEMPLATE="FROM_TEMPLATE",e.DUPLICATE_BY_SITE_TRANSFER="DUPLICATE_BY_SITE_TRANSFER",e.DUPLICATE="DUPLICATE",e.OLD_SITE_TRANSFER="OLD_SITE_TRANSFER",e.FLASH="FLASH"}(Pn||(Pn={})),function(e){e.UNKNOWN_NAMESPACE="UNKNOWN_NAMESPACE",e.WIX="WIX",e.SHOUT_OUT="SHOUT_OUT",e.ALBUMS="ALBUMS",e.WIX_STORES_TEST_DRIVE="WIX_STORES_TEST_DRIVE",e.HOTELS="HOTELS",e.CLUBS="CLUBS",e.ONBOARDING_DRAFT="ONBOARDING_DRAFT",e.DEV_SITE="DEV_SITE",e.LOGOS="LOGOS",e.VIDEO_MAKER="VIDEO_MAKER",e.PARTNER_DASHBOARD="PARTNER_DASHBOARD",e.DEV_CENTER_COMPANY="DEV_CENTER_COMPANY",e.HTML_DRAFT="HTML_DRAFT",e.SITELESS_BUSINESS="SITELESS_BUSINESS",e.CREATOR_ECONOMY="CREATOR_ECONOMY",e.DASHBOARD_FIRST="DASHBOARD_FIRST",e.ANYWHERE="ANYWHERE",e.HEADLESS="HEADLESS",e.ACCOUNT_MASTER_CMS="ACCOUNT_MASTER_CMS",e.RISE="RISE",e.BRANDED_FIRST="BRANDED_FIRST",e.NOWNIA="NOWNIA",e.UGC_TEMPLATE="UGC_TEMPLATE",e.CODUX="CODUX",e.MEDIA_DESIGN_CREATOR="MEDIA_DESIGN_CREATOR",e.SHARED_BLOG_ENTERPRISE="SHARED_BLOG_ENTERPRISE",e.STANDALONE_FORMS="STANDALONE_FORMS",e.STANDALONE_EVENTS="STANDALONE_EVENTS",e.MIMIR="MIMIR",e.TWINS="TWINS",e.NANO="NANO"}(In||(In={})),function(e){e.UNKNOWN="UNKNOWN",e.TRASH="TRASH",e.DELETED="DELETED",e.PENDING_PURGE="PENDING_PURGE",e.PURGED_EXTERNALLY="PURGED_EXTERNALLY"}(An||(An={})),function(e){e.UNKNOWN="UNKNOWN",e.ANONYMOUS_VISITOR="ANONYMOUS_VISITOR",e.MEMBER="MEMBER",e.WIX_USER="WIX_USER",e.APP="APP"}(En||(En={}));class xn{constructor(e,t){this.httpClient=e,this.errorHandler=t}async getCurrentUser(){const{data:e}=await yt(()=>this.httpClient.request(function(e){var t=cr(On,{}),r=t.toJSON,n=t.fromJSON,i=cr(Rn,{_member:Cn}).fromJSON;function o(t){var n=t.host,o=r(e);return{entityFqdn:"wix.members.v1.member",method:"GET",methodFqn:"com.wixpress.members.api.Members.GetMyMember",url:Mn({protoPath:"/v1/members/my",data:o,host:n}),params:er(o),transformResponse:i}}return o.fromReq=n,o.__isAmbassador=!0,o}({fieldSet:yn.FULL})),this.errorHandler,{errorCodesMap:{}});return e.member??null}}class Nn{constructor(e,t,r){this.memoryStorage=e,this.site=t,this.appDefId=r}hasCurrentUser(){const e=this.getCurrentUserCacheKey();return this.hasItemInStorage(e)}getCurrentUser(){const e=this.getCurrentUserCacheKey();return this.getItemFromStorage(e)}setCurrentUser(e){const t=this.getCurrentUserCacheKey();return this.setItemToStorage(t,e)}hasRoles(){const e=this.getRolesCacheKey();return this.hasItemInStorage(e)}getRoles(){const e=this.getRolesCacheKey();return this.getItemFromStorage(e)??[]}setRoles(e){const t=this.getRolesCacheKey();return this.setItemToStorage(t,e)}hasRoutes(){const e=this.getRoutesCacheKey();return this.hasItemInStorage(e)}getRoutes(){const e=this.getRoutesCacheKey();return this.getItemFromStorage(e)??[]}setRoutes(e){const t=this.getRoutesCacheKey();return this.setItemToStorage(t,e)}hasLoginMenuItems(){const e=this.getLoginBarMenuCacheKey();return this.hasItemInStorage(e)}getLoginMenuItems(){const e=this.getLoginBarMenuCacheKey();return this.getItemFromStorage(e)??[]}setLoginMenuItems(e){const t=this.getLoginBarMenuCacheKey();return this.setItemToStorage(t,e)}getRoutesCacheKey(){var e,t;return`members-routes-${null==(e=(t=this.site).getAppToken)?void 0:e.call(t,this.appDefId)}`}getRolesCacheKey(){var e,t;return`members-roles-${null==(e=(t=this.site).getAppToken)?void 0:e.call(t,this.appDefId)}`}getCurrentUserCacheKey(){var e,t;return`members-cu-${null==(e=(t=this.site).getAppToken)?void 0:e.call(t,this.appDefId)}`}getLoginBarMenuCacheKey(){var e,t;return`members-login-bar-${null==(e=(t=this.site).getAppToken)?void 0:e.call(t,this.appDefId)}`}hasItemInStorage(e){return!!this.memoryStorage.getItem(e)}getItemFromStorage(e){const t=this.memoryStorage.getItem(e);return t?JSON.parse(t):null}setItemToStorage(e,t){return this.memoryStorage.setItem(e,JSON.stringify(t))}}class Tn{constructor(e){this.viewerWarmupDataService=e,Ze()(this,"callMap",{})}getData(e){if(this.callMap[e])return null;const t=this.viewerWarmupDataService.get(e);return this.callMap[e]=!0,t}setData(e,t){return this.viewerWarmupDataService.set(e,t)}}const Dn=e=>{let{flowAPI:t,controllerConfig:{platformAPIs:r,wixCodeApi:n,appParams:i}}=e;const{httpClient:o,errorHandler:s}=t;return{currentUserService:new xn(o,s),rolesService:new hr(o,s),cacheService:new Nn(r.storage.memory,n.site,i.appDefinitionId),warmupDataService:new Tn(n.window.warmupData)}};function Un(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var Ln={};function kn(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:Ln}var Bn=Object.assign,Fn=Object.getOwnPropertyDescriptor,jn=Object.defineProperty,Vn=Object.prototype,Wn=[];Object.freeze(Wn);var Gn={};Object.freeze(Gn);var $n="undefined"!=typeof Proxy,Kn=Object.toString();function Hn(){$n||Un("Proxy not available")}function Yn(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Jn=function(){};function qn(e){return"function"==typeof e}function zn(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function Xn(e){return null!==e&&"object"==typeof e}function Zn(e){if(!Xn(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r.toString()===Kn}function Qn(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function ei(e,t,r){jn(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function ti(e,t,r){jn(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function ri(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(e){return Xn(e)&&!0===e[r]}}function ni(e){return null!=e&&"[object Map]"===Object.prototype.toString.call(e)}function ii(e){return null!=e&&"[object Set]"===Object.prototype.toString.call(e)}var oi=void 0!==Object.getOwnPropertySymbols;var si="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:oi?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function ai(e){return null===e?null:"object"==typeof e?""+e:e}function ui(e,t){return Vn.hasOwnProperty.call(e,t)}var li=Object.getOwnPropertyDescriptors||function(e){var t={};return si(e).forEach(function(r){t[r]=Fn(e,r)}),t};function ci(e,t){return!!(e&t)}function fi(e,t,r){return r?e|=t:e&=~t,e}function di(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_i(n.key),n)}}function hi(e,t,r){return t&&pi(e.prototype,t),r&&pi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gi(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return di(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?di(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vi(){return vi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vi.apply(null,arguments)}function mi(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,bi(e,t)}function bi(e,t){return bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bi(e,t)}function _i(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var yi=Symbol("mobx-stored-annotations");function wi(e){return Object.assign(function(t,r){if(Pi(r))return e.decorate_20223_(t,r);Si(t,r,e)},e)}function Si(e,t,r){ui(e,yi)||ei(e,yi,vi({},e[yi])),function(e){return e.annotationType_===xi}(r)||(e[yi][t]=r)}function Pi(e){return"object"==typeof e&&"string"==typeof e.kind}var Ii=Symbol("mobx administration"),Ai=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=Mo.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(e){return e()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(e){return e()})},t.reportObserved=function(){return es(this)},t.reportChanged=function(){Zo(),ts(this),Qo()},t.toString=function(){return this.name_},hi(e,[{key:"isBeingObserved",get:function(){return ci(this.flags_,e.isBeingObservedMask_)},set:function(t){this.flags_=fi(this.flags_,e.isBeingObservedMask_,t)}},{key:"isPendingUnobservation",get:function(){return ci(this.flags_,e.isPendingUnobservationMask_)},set:function(t){this.flags_=fi(this.flags_,e.isPendingUnobservationMask_,t)}},{key:"diffValue",get:function(){return ci(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=fi(this.flags_,e.diffValueMask_,1===t)}}])}();Ai.isBeingObservedMask_=1,Ai.isPendingUnobservationMask_=2,Ai.diffValueMask_=4;var Ei=ri("Atom",Ai);function Oi(e,t,r){void 0===t&&(t=Jn),void 0===r&&(r=Jn);var n,i=new Ai(e);return t!==Jn&&As(Ss,i,t,n),r!==Jn&&Is(i,r),i}var Ri={identity:function(e,t){return e===t},structural:function(e,t){return Wa(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return Wa(e,t,1)}};function Ci(e,t,r){return ks(e)?e:Array.isArray(e)?ho.array(e,{name:r}):Zn(e)?ho.object(e,void 0,{name:r}):ni(e)?ho.map(e,{name:r}):ii(e)?ho.set(e,{name:r}):"function"!=typeof e||bs(e)||Us(e)?e:Qn(e)?Ts(e):ms(r,e)}function Mi(e){return e}var xi="override";function Ni(e,t){return{annotationType_:e,options_:t,make_:Ti,extend_:Di,decorate_20223_:Ui}}function Ti(e,t,r,n){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,r,!1)?0:1;if(n===e.target_)return null===this.extend_(e,t,r,!1)?0:2;if(bs(r.value))return 1;var o=Li(e,this,t,r,!1);return jn(n,t,o),2}function Di(e,t,r,n){var i=Li(e,this,t,r);return e.defineProperty_(t,i,n)}function Ui(e,t){var r,n=t.kind,i=t.name,o=t.addInitializer,s=this,a=function(e){var t,r,n,o;return Po(null!=(t=null==(r=s.options_)?void 0:r.name)?t:i.toString(),e,null!=(n=null==(o=s.options_)?void 0:o.autoAction)&&n)};return"field"==n?function(e){var t,r=e;return bs(r)||(r=a(r)),null!=(t=s.options_)&&t.bound&&((r=r.bind(this)).isMobxAction=!0),r}:"method"==n?(bs(e)||(e=a(e)),null!=(r=this.options_)&&r.bound&&o(function(){var e=this,t=e[i].bind(e);t.isMobxAction=!0,e[i]=t}),e):void Un("Cannot apply '"+s.annotationType_+"' to '"+String(i)+"' (kind: "+n+"):\n'"+s.annotationType_+"' can only be used on properties with a function value.")}function Li(e,t,r,n,i){var o,s,a,u,l,c,f,d;void 0===i&&(i=Jo.safeDescriptors),d=n,t.annotationType_,d.value;var p,h=n.value;null!=(o=t.options_)&&o.bound&&(h=h.bind(null!=(p=e.proxy_)?p:e.target_));return{value:Po(null!=(s=null==(a=t.options_)?void 0:a.name)?s:r.toString(),h,null!=(u=null==(l=t.options_)?void 0:l.autoAction)&&u,null!=(c=t.options_)&&c.bound?null!=(f=e.proxy_)?f:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function ki(e,t){return{annotationType_:e,options_:t,make_:Bi,extend_:Fi,decorate_20223_:ji}}function Bi(e,t,r,n){var i;if(n===e.target_)return null===this.extend_(e,t,r,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!ui(e.target_,t)||!Us(e.target_[t]))&&null===this.extend_(e,t,r,!1))return 0;if(Us(r.value))return 1;var o=Vi(e,this,t,r,!1,!1);return jn(n,t,o),2}function Fi(e,t,r,n){var i,o=Vi(e,this,t,r,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,o,n)}function ji(e,t){var r;var n=t.name,i=t.addInitializer;return Us(e)||(e=Ts(e)),null!=(r=this.options_)&&r.bound&&i(function(){var e=this,t=e[n].bind(e);t.isMobXFlow=!0,e[n]=t}),e}function Vi(e,t,r,n,i,o){var s;void 0===o&&(o=Jo.safeDescriptors),s=n,t.annotationType_,s.value;var a,u=n.value;(Us(u)||(u=Ts(u)),i)&&((u=u.bind(null!=(a=e.proxy_)?a:e.target_)).isMobXFlow=!0);return{value:u,configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function Wi(e,t){return{annotationType_:e,options_:t,make_:Gi,extend_:$i,decorate_20223_:Ki}}function Gi(e,t,r){return null===this.extend_(e,t,r,!1)?0:1}function $i(e,t,r,n){return function(e,t,r,n){t.annotationType_,n.get;0}(0,this,0,r),e.defineComputedProperty_(t,vi({},this.options_,{get:r.get,set:r.set}),n)}function Ki(e,t){var r=this,n=t.name;return(0,t.addInitializer)(function(){var t=_a(this)[Ii],i=vi({},r.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+n.toString()),t.values_.set(n,new Co(i))}),function(){return this[Ii].getObservablePropValue_(n)}}function Hi(e,t){return{annotationType_:e,options_:t,make_:Yi,extend_:Ji,decorate_20223_:qi}}function Yi(e,t,r){return null===this.extend_(e,t,r,!1)?0:1}function Ji(e,t,r,n){var i,o;return function(e,t){t.annotationType_;0}(0,this),e.defineObservableProperty_(t,r.value,null!=(i=null==(o=this.options_)?void 0:o.enhancer)?i:Ci,n)}function qi(e,t){var r=this,n=t.kind,i=t.name,o=new WeakSet;function s(e,t){var n,s,a=_a(e)[Ii],u=new Ro(t,null!=(n=null==(s=r.options_)?void 0:s.enhancer)?n:Ci,"ObservableObject."+i.toString(),!1);a.values_.set(i,u),o.add(e)}if("accessor"==n)return{get:function(){return o.has(this)||s(this,e.get.call(this)),this[Ii].getObservablePropValue_(i)},set:function(e){return o.has(this)||s(this,e),this[Ii].setObservablePropValue_(i,e)},init:function(e){return o.has(this)||s(this,e),e}}}var zi="true",Xi=Zi();function Zi(e){return{annotationType_:zi,options_:e,make_:Qi,extend_:eo,decorate_20223_:to}}function Qi(e,t,r,n){var i,o,s,a;if(r.get)return bo.make_(e,t,r,n);if(r.set){var u=Po(t.toString(),r.set);return n===e.target_?null===e.defineProperty_(t,{configurable:!Jo.safeDescriptors||e.isPlainObject_,set:u})?0:2:(jn(n,t,{configurable:!0,set:u}),2)}if(n!==e.target_&&"function"==typeof r.value)return Qn(r.value)?(null!=(a=this.options_)&&a.autoBind?Ts.bound:Ts).make_(e,t,r,n):(null!=(s=this.options_)&&s.autoBind?ms.bound:ms).make_(e,t,r,n);var l,c=!1===(null==(i=this.options_)?void 0:i.deep)?ho.ref:ho;"function"==typeof r.value&&null!=(o=this.options_)&&o.autoBind&&(r.value=r.value.bind(null!=(l=e.proxy_)?l:e.target_));return c.make_(e,t,r,n)}function eo(e,t,r,n){var i,o,s;if(r.get)return bo.extend_(e,t,r,n);if(r.set)return e.defineProperty_(t,{configurable:!Jo.safeDescriptors||e.isPlainObject_,set:Po(t.toString(),r.set)},n);"function"==typeof r.value&&null!=(i=this.options_)&&i.autoBind&&(r.value=r.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?ho.ref:ho).extend_(e,t,r,n)}function to(e,t){Un("'"+this.annotationType_+"' cannot be used as a decorator")}var ro={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function no(e){return e||ro}Object.freeze(ro);var io=Hi("observable"),oo=Hi("observable.ref",{enhancer:Mi}),so=Hi("observable.shallow",{enhancer:function(e,t,r){return null==e||Sa(e)||oa(e)||ca(e)||ha(e)?e:Array.isArray(e)?ho.array(e,{name:r,deep:!1}):Zn(e)?ho.object(e,void 0,{name:r,deep:!1}):ni(e)?ho.map(e,{name:r,deep:!1}):ii(e)?ho.set(e,{name:r,deep:!1}):void 0}}),ao=Hi("observable.struct",{enhancer:function(e,t){return Wa(e,t)?t:e}}),uo=wi(io);function lo(e){return!0===e.deep?Ci:!1===e.deep?Mi:(t=e.defaultDecorator)&&null!=(r=null==(n=t.options_)?void 0:n.enhancer)?r:Ci;var t,r,n}function co(e,t,r){return Pi(t)?io.decorate_20223_(e,t):zn(t)?void Si(e,t,io):ks(e)?e:Zn(e)?ho.object(e,t,r):Array.isArray(e)?ho.array(e,t):ni(e)?ho.map(e,t):ii(e)?ho.set(e,t):"object"==typeof e&&null!==e?e:ho.box(e,t)}Bn(co,uo);var fo,po,ho=Bn(co,{box:function(e,t){var r=no(t);return new Ro(e,lo(r),r.name,!0,r.equals)},array:function(e,t){var r=no(t);return(!1===Jo.useProxies||!1===r.proxy?Ua:Zs)(e,lo(r),r.name)},map:function(e,t){var r=no(t);return new la(e,lo(r),r.name)},set:function(e,t){var r=no(t);return new pa(e,lo(r),r.name)},object:function(e,t,r){return Fa(function(){return Rs(!1===Jo.useProxies||!1===(null==r?void 0:r.proxy)?_a({},r):function(e,t){var r,n;return Hn(),e=_a(e,t),null!=(n=(r=e[Ii]).proxy_)?n:r.proxy_=new Proxy(e,js)}({},r),e,t)})},ref:wi(oo),shallow:wi(so),deep:uo,struct:wi(ao)}),go="computed",vo=Wi(go),mo=Wi("computed.struct",{equals:Ri.structural}),bo=function(e,t){if(Pi(t))return vo.decorate_20223_(e,t);if(zn(t))return Si(e,t,vo);if(Zn(e))return wi(Wi(go,e));var r=Zn(t)?t:{};return r.get=e,r.name||(r.name=e.name||""),new Co(r)};Object.assign(bo,vo),bo.struct=wi(mo);var _o=0,yo=1,wo=null!=(fo=null==(po=Fn(function(){},"name"))?void 0:po.configurable)&&fo,So={value:"action",configurable:!0,writable:!1,enumerable:!1};function Po(e,t,r,n){function i(){return Io(e,r,t,n||this,arguments)}return void 0===r&&(r=!1),i.isMobxAction=!0,i.toString=function(){return t.toString()},wo&&(So.value=e,jn(i,"name",So)),i}function Io(e,t,r,n,i){var o=function(e,t){var r=!1,n=0;0;var i=Jo.trackingDerivation,o=!t||!i;Zo();var s=Jo.allowStateChanges;o&&(jo(),s=Eo(!0));var a=Wo(!0),u={runAsAction_:o,prevDerivation_:i,prevAllowStateChanges_:s,prevAllowStateReads_:a,notifySpy_:r,startTime_:n,actionId_:yo++,parentActionId_:_o};return _o=u.actionId_,u}(0,t);try{return r.apply(n,i)}catch(e){throw o.error_=e,e}finally{!function(e){_o!==e.actionId_&&Un(30);_o=e.parentActionId_,void 0!==e.error_&&(Jo.suppressReactionErrors=!0);Oo(e.prevAllowStateChanges_),Go(e.prevAllowStateReads_),Qo(),e.runAsAction_&&Vo(e.prevDerivation_);0;Jo.suppressReactionErrors=!1}(o)}}function Ao(e,t){var r=Eo(e);try{return t()}finally{Oo(r)}}function Eo(e){var t=Jo.allowStateChanges;return Jo.allowStateChanges=e,t}function Oo(e){Jo.allowStateChanges=e}var Ro=function(e){function t(t,r,n,i,o){var s;return void 0===n&&(n="ObservableValue"),void 0===i&&(i=!0),void 0===o&&(o=Ri.default),(s=e.call(this,n)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=r,s.name_=n,s.equals=o,s.value_=r(t,void 0,n),s}mi(t,e);var r=t.prototype;return r.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},r.set=function(e){this.value_;if((e=this.prepareNewValue_(e))!==Jo.UNCHANGED){0,this.setNewValue_(e)}},r.prepareNewValue_=function(e){if(Lo(this),Vs(this)){var t=Gs(this,{object:this,type:qs,newValue:e});if(!t)return Jo.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?Jo.UNCHANGED:e},r.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),$s(this)&&Hs(this,{type:qs,object:this,newValue:e,oldValue:t})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(e){return Ws(this,e)},r.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:qs,newValue:this.value_,oldValue:void 0}),Ks(this,e)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return ai(this.get())},r[Symbol.toPrimitive]=function(){return this.valueOf()},t}(Ai),Co=function(){function e(e){this.dependenciesState_=Mo.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Mo.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new To(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=xo.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||Un(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Po("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?Ri.structural:Ri.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==Mo.UP_TO_DATE_)return;e.lowestObserverState_=Mo.POSSIBLY_STALE_,e.observers_.forEach(function(e){e.dependenciesState_===Mo.UP_TO_DATE_&&(e.dependenciesState_=Mo.POSSIBLY_STALE_,e.onBecomeStale_())})}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(e){return e()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(e){return e()})},t.get=function(){if(this.isComputing&&Un(32,this.name_,this.derivation),0!==Jo.inBatch||0!==this.observers_.size||this.keepAlive_){if(es(this),Uo(this)){var e=Jo.trackingContext;this.keepAlive_&&!e&&(Jo.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===Mo.STALE_)return;e.lowestObserverState_=Mo.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Mo.POSSIBLY_STALE_?t.dependenciesState_=Mo.STALE_:t.dependenciesState_===Mo.UP_TO_DATE_&&(e.lowestObserverState_=Mo.UP_TO_DATE_)})}(this),Jo.trackingContext=e}}else Uo(this)&&(this.warnAboutUntrackedRead_(),Zo(),this.value_=this.computeValue_(!1),Qo());var t=this.value_;if(Do(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter&&Un(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter=!1}}else Un(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Mo.NOT_TRACKING_,r=this.computeValue_(!0),n=t||Do(e)||Do(r)||!this.equals_(e,r);return n&&(this.value_=r),n},t.computeValue_=function(e){this.isComputing=!0;var t,r=Eo(!1);if(e)t=ko(this,this.derivation,this.scope_);else if(!0===Jo.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new To(e)}return Oo(r),this.isComputing=!1,t},t.suspend_=function(){this.keepAlive_||(Bo(this),this.value_=void 0)},t.observe_=function(e,t){var r=this,n=!0,i=void 0;return _s(function(){var o=r.get();if(!n||t){var s=jo();e({observableKind:"computed",debugObjectName:r.name_,type:qs,object:r,newValue:o,oldValue:i}),Vo(s)}n=!1,i=o})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return ai(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},hi(e,[{key:"isComputing",get:function(){return ci(this.flags_,e.isComputingMask_)},set:function(t){this.flags_=fi(this.flags_,e.isComputingMask_,t)}},{key:"isRunningSetter",get:function(){return ci(this.flags_,e.isRunningSetterMask_)},set:function(t){this.flags_=fi(this.flags_,e.isRunningSetterMask_,t)}},{key:"isBeingObserved",get:function(){return ci(this.flags_,e.isBeingObservedMask_)},set:function(t){this.flags_=fi(this.flags_,e.isBeingObservedMask_,t)}},{key:"isPendingUnobservation",get:function(){return ci(this.flags_,e.isPendingUnobservationMask_)},set:function(t){this.flags_=fi(this.flags_,e.isPendingUnobservationMask_,t)}},{key:"diffValue",get:function(){return ci(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=fi(this.flags_,e.diffValueMask_,1===t)}}])}();Co.isComputingMask_=1,Co.isRunningSetterMask_=2,Co.isBeingObservedMask_=4,Co.isPendingUnobservationMask_=8,Co.diffValueMask_=16;var Mo,xo,No=ri("ComputedValue",Co);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Mo||(Mo={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(xo||(xo={}));var To=function(e){this.cause=void 0,this.cause=e};function Do(e){return e instanceof To}function Uo(e){switch(e.dependenciesState_){case Mo.UP_TO_DATE_:return!1;case Mo.NOT_TRACKING_:case Mo.STALE_:return!0;case Mo.POSSIBLY_STALE_:for(var t=Wo(!0),r=jo(),n=e.observing_,i=n.length,o=0;o<i;o++){var s=n[o];if(No(s)){if(Jo.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return Vo(r),Go(t),!0}if(e.dependenciesState_===Mo.STALE_)return Vo(r),Go(t),!0}}return $o(e),Vo(r),Go(t),!1}}function Lo(e){}function ko(e,t,r){var n=Wo(!0);$o(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++Jo.runId;var i,o=Jo.trackingDerivation;if(Jo.trackingDerivation=e,Jo.inBatch++,!0===Jo.disableErrorBoundaries)i=t.call(r);else try{i=t.call(r)}catch(e){i=new To(e)}return Jo.inBatch--,Jo.trackingDerivation=o,function(e){for(var t=e.observing_,r=e.observing_=e.newObserving_,n=Mo.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,s=0;s<o;s++){var a=r[s];0===a.diffValue&&(a.diffValue=1,i!==s&&(r[i]=a),i++),a.dependenciesState_>n&&(n=a.dependenciesState_)}r.length=i,e.newObserving_=null,o=t.length;for(;o--;){var u=t[o];0===u.diffValue&&zo(u,e),u.diffValue=0}for(;i--;){var l=r[i];1===l.diffValue&&(l.diffValue=0,qo(l,e))}n!==Mo.UP_TO_DATE_&&(e.dependenciesState_=n,e.onBecomeStale_())}(e),Go(n),i}function Bo(e){var t=e.observing_;e.observing_=[];for(var r=t.length;r--;)zo(t[r],e);e.dependenciesState_=Mo.NOT_TRACKING_}function Fo(e){var t=jo();try{return e()}finally{Vo(t)}}function jo(){var e=Jo.trackingDerivation;return Jo.trackingDerivation=null,e}function Vo(e){Jo.trackingDerivation=e}function Wo(e){var t=Jo.allowStateReads;return Jo.allowStateReads=e,t}function Go(e){Jo.allowStateReads=e}function $o(e){if(e.dependenciesState_!==Mo.UP_TO_DATE_){e.dependenciesState_=Mo.UP_TO_DATE_;for(var t=e.observing_,r=t.length;r--;)t[r].lowestObserverState_=Mo.UP_TO_DATE_}}var Ko=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Ho=!0,Yo=!1,Jo=function(){var e=kn();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Ho=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new Ko).version&&(Ho=!1),Ho?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Ko):(setTimeout(function(){Yo||Un(35)},1),new Ko)}();function qo(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function zo(e,t){e.observers_.delete(t),0===e.observers_.size&&Xo(e)}function Xo(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Jo.pendingUnobservations.push(e))}function Zo(){Jo.inBatch++}function Qo(){if(0===--Jo.inBatch){os();for(var e=Jo.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,0===r.observers_.size&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBUO()),r instanceof Co&&r.suspend_())}Jo.pendingUnobservations=[]}}function es(e){var t=Jo.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&Jo.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(0===e.observers_.size&&Jo.inBatch>0&&Xo(e),!1)}function ts(e){e.lowestObserverState_!==Mo.STALE_&&(e.lowestObserverState_=Mo.STALE_,e.observers_.forEach(function(e){e.dependenciesState_===Mo.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Mo.STALE_}))}var rs=function(){function e(e,t,r,n){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Mo.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=xo.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=r,this.requiresObservable_=n}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,Jo.pendingReactions.push(this),os())},t.runReaction_=function(){if(!this.isDisposed){Zo(),this.isScheduled=!1;var e=Jo.trackingContext;if(Jo.trackingContext=this,Uo(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}Jo.trackingContext=e,Qo()}},t.track=function(e){if(!this.isDisposed){Zo();0,this.isRunning=!0;var t=Jo.trackingContext;Jo.trackingContext=this;var r=ko(this,e,void 0);Jo.trackingContext=t,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&Bo(this),Do(r)&&this.reportExceptionInDerivation_(r.cause),Qo()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(Jo.disableErrorBoundaries)throw e;var r="[mobx] uncaught error in '"+this+"'";Jo.suppressReactionErrors||console.error(r,e),Jo.globalReactionErrorHandlers.forEach(function(r){return r(e,t)})}},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Zo(),Bo(this),Qo()))},t.getDisposer_=function(e){var t=this,r=function r(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",r)};return null==e||null==e.addEventListener||e.addEventListener("abort",r),r[Ii]=this,r},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1)},hi(e,[{key:"isDisposed",get:function(){return ci(this.flags_,e.isDisposedMask_)},set:function(t){this.flags_=fi(this.flags_,e.isDisposedMask_,t)}},{key:"isScheduled",get:function(){return ci(this.flags_,e.isScheduledMask_)},set:function(t){this.flags_=fi(this.flags_,e.isScheduledMask_,t)}},{key:"isTrackPending",get:function(){return ci(this.flags_,e.isTrackPendingMask_)},set:function(t){this.flags_=fi(this.flags_,e.isTrackPendingMask_,t)}},{key:"isRunning",get:function(){return ci(this.flags_,e.isRunningMask_)},set:function(t){this.flags_=fi(this.flags_,e.isRunningMask_,t)}},{key:"diffValue",get:function(){return ci(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=fi(this.flags_,e.diffValueMask_,1===t)}}])}();rs.isDisposedMask_=1,rs.isScheduledMask_=2,rs.isTrackPendingMask_=4,rs.isRunningMask_=8,rs.diffValueMask_=16;var ns=100,is=function(e){return e()};function os(){Jo.inBatch>0||Jo.isRunningReactions||is(ss)}function ss(){Jo.isRunningReactions=!0;for(var e=Jo.pendingReactions,t=0;e.length>0;){++t===ns&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),n=0,i=r.length;n<i;n++)r[n].runReaction_()}Jo.isRunningReactions=!1}var as=ri("Reaction",rs);var us="action",ls="autoAction",cs="<unnamed action>",fs=Ni(us),ds=Ni("action.bound",{bound:!0}),ps=Ni(ls,{autoAction:!0}),hs=Ni("autoAction.bound",{autoAction:!0,bound:!0});function gs(e){return function(t,r){return qn(t)?Po(t.name||cs,t,e):qn(r)?Po(t,r,e):Pi(r)?(e?ps:fs).decorate_20223_(t,r):zn(r)?Si(t,r,e?ps:fs):zn(t)?wi(Ni(e?ls:us,{name:t,autoAction:e})):void 0}}var vs=gs(!1);Object.assign(vs,fs);var ms=gs(!0);function bs(e){return qn(e)&&!0===e.isMobxAction}function _s(e,t){var r,n,i,o;void 0===t&&(t=Gn);var s,a=null!=(r=null==(n=t)?void 0:n.name)?r:"Autorun";if(!t.scheduler&&!t.delay)s=new rs(a,function(){this.track(c)},t.onError,t.requiresObservable);else{var u=ws(t),l=!1;s=new rs(a,function(){l||(l=!0,u(function(){l=!1,s.isDisposed||s.track(c)}))},t.onError,t.requiresObservable)}function c(){e(s)}return null!=(i=t)&&null!=(i=i.signal)&&i.aborted||s.schedule_(),s.getDisposer_(null==(o=t)?void 0:o.signal)}Object.assign(ms,ps),vs.bound=wi(ds),ms.bound=wi(hs);var ys=function(e){return e()};function ws(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:ys}var Ss="onBO",Ps="onBUO";function Is(e,t,r){return As(Ps,e,t,r)}function As(e,t,r,n){var i="function"==typeof n?La(t,r):La(t),o=qn(n)?n:r,s=e+"L";return i[s]?i[s].add(o):i[s]=new Set([o]),function(){var e=i[s];e&&(e.delete(o),0===e.size&&delete i[s])}}var Es="always";function Os(e){!0===e.isolateGlobalState&&function(){if((Jo.pendingReactions.length||Jo.inBatch||Jo.isRunningReactions)&&Un(36),Yo=!0,Ho){var e=kn();0===--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),Jo=new Ko}}();var t,r,n=e.useProxies,i=e.enforceActions;if(void 0!==n&&(Jo.useProxies=n===Es||"never"!==n&&"undefined"!=typeof Proxy),"ifavailable"===n&&(Jo.verifyProxies=!0),void 0!==i){var o=i===Es?Es:"observed"===i;Jo.enforceActions=o,Jo.allowStateChanges=!0!==o&&o!==Es}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(t){t in e&&(Jo[t]=!!e[t])}),Jo.allowStateReads=!Jo.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,r=is,is=function(e){return t(function(){return r(e)})})}function Rs(e,t,r,n){var i=li(t);return Fa(function(){var t=_a(e,n)[Ii];si(i).forEach(function(e){t.extend_(e,i[e],!r||(!(e in r)||r[e]))})}),e}var Cs=0;function Ms(){this.message="FLOW_CANCELLED"}Ms.prototype=Object.create(Error.prototype);var xs=ki("flow"),Ns=ki("flow.bound",{bound:!0}),Ts=Object.assign(function(e,t){if(Pi(t))return xs.decorate_20223_(e,t);if(zn(t))return Si(e,t,xs);var r=e,n=r.name||"<unnamed flow>",i=function(){var e,t=arguments,i=++Cs,o=vs(n+" - runid: "+i+" - init",r).apply(this,t),s=void 0,a=new Promise(function(t,r){var a=0;function u(e){var t;s=void 0;try{t=vs(n+" - runid: "+i+" - yield "+a++,o.next).call(o,e)}catch(e){return r(e)}c(t)}function l(e){var t;s=void 0;try{t=vs(n+" - runid: "+i+" - yield "+a++,o.throw).call(o,e)}catch(e){return r(e)}c(t)}function c(e){if(!qn(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(u,l);e.then(c,r)}e=r,u(void 0)});return a.cancel=vs(n+" - runid: "+i+" - cancel",function(){try{s&&Ds(s);var t=o.return(void 0),r=Promise.resolve(t.value);r.then(Jn,Jn),Ds(r),e(new Ms)}catch(t){e(t)}}),a};return i.isMobXFlow=!0,i},xs);function Ds(e){qn(e.cancel)&&e.cancel()}function Us(e){return!0===(null==e?void 0:e.isMobXFlow)}function Ls(e,t){return!!e&&(void 0!==t?!!Sa(e)&&e[Ii].values_.has(t):Sa(e)||!!e[Ii]||Ei(e)||as(e)||No(e))}function ks(e){return Ls(e)}function Bs(e,t){void 0===t&&(t=void 0),Zo();try{return e.apply(t)}finally{Qo()}}function Fs(e){return e[Ii]}Ts.bound=wi(Ns);var js={has:function(e,t){return Fs(e).has_(t)},get:function(e,t){return Fs(e).get_(t)},set:function(e,t,r){var n;return!!zn(t)&&(null==(n=Fs(e).set_(t,r,!0))||n)},deleteProperty:function(e,t){var r;return!!zn(t)&&(null==(r=Fs(e).delete_(t,!0))||r)},defineProperty:function(e,t,r){var n;return null==(n=Fs(e).defineProperty_(t,r))||n},ownKeys:function(e){return Fs(e).ownKeys_()},preventExtensions:function(e){Un(13)}};function Vs(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function Ws(e,t){var r=e.interceptors_||(e.interceptors_=[]);return r.push(t),Yn(function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)})}function Gs(e,t){var r=jo();try{for(var n=[].concat(e.interceptors_||[]),i=0,o=n.length;i<o&&((t=n[i](t))&&!t.type&&Un(14),t);i++);return t}finally{Vo(r)}}function $s(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function Ks(e,t){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(t),Yn(function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)})}function Hs(e,t){var r=jo(),n=e.changeListeners_;if(n){for(var i=0,o=(n=n.slice()).length;i<o;i++)n[i](t);Vo(r)}}function Ys(e,t,r){return Fa(function(){var n=_a(e,r)[Ii];null!=t||(t=function(e){return ui(e,yi)||ei(e,yi,vi({},e[yi])),e[yi]}(e)),si(t).forEach(function(e){return n.make_(e,t[e])})}),e}var Js="splice",qs="update",zs={get:function(e,t){var r=e[Ii];return t===Ii?r:"length"===t?r.getArrayLength_():"string"!=typeof t||isNaN(t)?ui(Qs,t)?Qs[t]:e[t]:r.get_(parseInt(t))},set:function(e,t,r){var n=e[Ii];return"length"===t&&n.setArrayLength_(r),"symbol"==typeof t||isNaN(t)?e[t]=r:n.set_(parseInt(t),r),!0},preventExtensions:function(){Un(15)}},Xs=function(){function e(e,t,r,n){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=r,this.legacyMode_=n,this.atom_=new Ai(e),this.enhancer_=function(e,r){return t(e,r,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return Ws(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Ks(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&Un("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var r=new Array(e-t),n=0;n<e-t;n++)r[n]=void 0;this.spliceWithArray_(t,0,r)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&Un(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&Da(e+t+1)},t.spliceWithArray_=function(e,t,r){var n=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===r&&(r=Wn),Vs(this)){var o=Gs(this,{object:this.proxy_,type:Js,index:e,removedCount:t,added:r});if(!o)return Wn;t=o.removedCount,r=o.added}if(r=0===r.length?r:r.map(function(e){return n.enhancer_(e,void 0)}),this.legacyMode_){var s=r.length-t;this.updateArrayLength_(i,s)}var a=this.spliceItemsIntoValues_(e,t,r);return 0===t&&0===r.length||this.notifyArraySplice_(e,r,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,r){var n;if(r.length<1e4)return(n=this.values_).splice.apply(n,[e,t].concat(r));var i=this.values_.slice(e,e+t),o=this.values_.slice(e+t);this.values_.length+=r.length-t;for(var s=0;s<r.length;s++)this.values_[e+s]=r[s];for(var a=0;a<o.length;a++)this.values_[e+r.length+a]=o[a];return i},t.notifyArrayChildUpdate_=function(e,t,r){var n=!this.owned_&&!1,i=$s(this),o=i||n?{observableKind:"array",object:this.proxy_,type:qs,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:r}:null;this.atom_.reportChanged(),i&&Hs(this,o)},t.notifyArraySplice_=function(e,t,r){var n=!this.owned_&&!1,i=$s(this),o=i||n?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Js,index:e,removed:r,added:t,removedCount:r.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&Hs(this,o)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var r=this.values_;if(this.legacyMode_&&e>r.length&&Un(17,e,r.length),e<r.length){this.atom_;var n=r[e];if(Vs(this)){var i=Gs(this,{type:qs,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,n))!==n&&(r[e]=t,this.notifyArrayChildUpdate_(e,t,n))}else{for(var o=new Array(e+1-r.length),s=0;s<o.length-1;s++)o[s]=void 0;o[o.length-1]=t,this.spliceWithArray_(r.length,0,o)}},e}();function Zs(e,t,r,n){return void 0===r&&(r="ObservableArray"),void 0===n&&(n=!1),Hn(),Fa(function(){var i=new Xs(r,t,n,!1);ti(i.values_,Ii,i);var o=new Proxy(i.values_,zs);return i.proxy_=o,e&&e.length&&i.spliceWithArray_(0,0,e),o})}var Qs={clear:function(){return this.splice(0)},replace:function(e){var t=this[Ii];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o=this[Ii];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,t)}return o.spliceWithArray_(e,t,n)},spliceWithArray:function(e,t,r){return this[Ii].spliceWithArray_(e,t,r)},push:function(){for(var e=this[Ii],t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.spliceWithArray_(e.values_.length,0,r),e.values_.length},pop:function(){return this.splice(Math.max(this[Ii].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Ii],t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.spliceWithArray_(0,0,r),e.values_.length},reverse:function(){return Jo.trackingDerivation&&Un(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Jo.trackingDerivation&&Un(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Ii],r=t.dehanceValues_(t.values_).indexOf(e);return r>-1&&(this.splice(r,1),!0)}};function ea(e,t){"function"==typeof Array.prototype[e]&&(Qs[e]=t(e))}function ta(e){return function(){var t=this[Ii];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_);return r[e].apply(r,arguments)}}function ra(e){return function(t,r){var n=this,i=this[Ii];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e](function(e,i){return t.call(r,e,i,n)})}}function na(e){return function(){var t=this,r=this[Ii];r.atom_.reportObserved();var n=r.dehanceValues_(r.values_),i=arguments[0];return arguments[0]=function(e,r,n){return i(e,r,n,t)},n[e].apply(n,arguments)}}ea("at",ta),ea("concat",ta),ea("flat",ta),ea("includes",ta),ea("indexOf",ta),ea("join",ta),ea("lastIndexOf",ta),ea("slice",ta),ea("toString",ta),ea("toLocaleString",ta),ea("toSorted",ta),ea("toSpliced",ta),ea("with",ta),ea("every",ra),ea("filter",ra),ea("find",ra),ea("findIndex",ra),ea("findLast",ra),ea("findLastIndex",ra),ea("flatMap",ra),ea("forEach",ra),ea("map",ra),ea("some",ra),ea("toReversed",ra),ea("reduce",na),ea("reduceRight",na);var ia=ri("ObservableArrayAdministration",Xs);function oa(e){return Xn(e)&&ia(e[Ii])}var sa={},aa="add",ua="delete",la=function(){function e(e,t,r){var n=this;void 0===t&&(t=Ci),void 0===r&&(r="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Ii]=sa,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=r,qn(Map)||Un(18),Fa(function(){n.keysAtom_=Oi("ObservableMap.keys()"),n.data_=new Map,n.hasMap_=new Map,e&&n.merge(e)})}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!Jo.trackingDerivation)return this.has_(e);var r=this.hasMap_.get(e);if(!r){var n=r=new Ro(this.has_(e),Mi,"ObservableMap.key?",!1);this.hasMap_.set(e,n),Is(n,function(){return t.hasMap_.delete(e)})}return r.get()},t.set=function(e,t){var r=this.has_(e);if(Vs(this)){var n=Gs(this,{type:r?qs:aa,object:this,newValue:t,name:e});if(!n)return this;t=n.newValue}return r?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,Vs(this))&&!Gs(this,{type:ua,object:this,name:e}))return!1;if(this.has_(e)){var r=$s(this),n=r?{observableKind:"map",debugObjectName:this.name_,type:ua,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return Bs(function(){var r;t.keysAtom_.reportChanged(),null==(r=t.hasMap_.get(e))||r.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)}),r&&Hs(this,n),!0}return!1},t.updateValue_=function(e,t){var r=this.data_.get(e);if((t=r.prepareNewValue_(t))!==Jo.UNCHANGED){var n=$s(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:qs,object:this,oldValue:r.value_,name:e,newValue:t}:null;0,r.setNewValue_(t),n&&Hs(this,i)}},t.addValue_=function(e,t){var r=this;this.keysAtom_,Bs(function(){var n,i=new Ro(t,r.enhancer_,"ObservableMap.key",!1);r.data_.set(e,i),t=i.value_,null==(n=r.hasMap_.get(e))||n.setNewValue_(!0),r.keysAtom_.reportChanged()});var n=$s(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:aa,object:this,name:e,newValue:t}:null;n&&Hs(this,i)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return fa({next:function(){var r=t.next(),n=r.done,i=r.value;return{done:n,value:n?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return fa({next:function(){var r=t.next(),n=r.done,i=r.value;return{done:n,value:n?void 0:[i,e.get(i)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(e,t){for(var r,n=gi(this);!(r=n()).done;){var i=r.value,o=i[0],s=i[1];e.call(t,s,o,this)}},t.merge=function(e){var t=this;return ca(e)&&(e=new Map(e)),Bs(function(){var r,n,i;Zn(e)?function(e){var t=Object.keys(e);if(!oi)return t;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(t,r.filter(function(t){return Vn.propertyIsEnumerable.call(e,t)})):t}(e).forEach(function(r){return t.set(r,e[r])}):Array.isArray(e)?e.forEach(function(e){var r=e[0],n=e[1];return t.set(r,n)}):ni(e)?(r=e,n=Object.getPrototypeOf(r),i=Object.getPrototypeOf(n),null!==Object.getPrototypeOf(i)&&Un(19,e),e.forEach(function(e,r){return t.set(r,e)})):null!=e&&Un(20,e)}),this},t.clear=function(){var e=this;Bs(function(){Fo(function(){for(var t,r=gi(e.keys());!(t=r()).done;){var n=t.value;e.delete(n)}})})},t.replace=function(e){var t=this;return Bs(function(){for(var r,n=function(e){if(ni(e)||ca(e))return e;if(Array.isArray(e))return new Map(e);if(Zn(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}return Un(21,e)}(e),i=new Map,o=!1,s=gi(t.data_.keys());!(r=s()).done;){var a=r.value;if(!n.has(a))if(t.delete(a))o=!0;else{var u=t.data_.get(a);i.set(a,u)}}for(var l,c=gi(n.entries());!(l=c()).done;){var f=l.value,d=f[0],p=f[1],h=t.data_.has(d);if(t.set(d,p),t.data_.has(d)){var g=t.data_.get(d);i.set(d,g),h||(o=!0)}}if(!o)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var v=t.data_.keys(),m=i.keys(),b=v.next(),_=m.next();!b.done;){if(b.value!==_.value){t.keysAtom_.reportChanged();break}b=v.next(),_=m.next()}t.data_=i}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return Ks(this,e)},t.intercept_=function(e){return Ws(this,e)},hi(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),ca=ri("ObservableMap",la);function fa(e){return e[Symbol.toStringTag]="MapIterator",Ha(e)}var da={},pa=function(){function e(e,t,r){var n=this;void 0===t&&(t=Ci),void 0===r&&(r="ObservableSet"),this.name_=void 0,this[Ii]=da,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=r,qn(Set)||Un(22),this.enhancer_=function(e,n){return t(e,n,r)},Fa(function(){n.atom_=Oi(n.name_),e&&n.replace(e)})}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;Bs(function(){Fo(function(){for(var t,r=gi(e.data_.values());!(t=r()).done;){var n=t.value;e.delete(n)}})})},t.forEach=function(e,t){for(var r,n=gi(this);!(r=n()).done;){var i=r.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if(this.atom_,Vs(this)){var r=Gs(this,{type:aa,object:this,newValue:e});if(!r)return this;e=r.newValue}if(!this.has(e)){Bs(function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()});var n=!1,i=$s(this),o=i?{observableKind:"set",debugObjectName:this.name_,type:aa,object:this,newValue:e}:null;n,i&&Hs(this,o)}return this},t.delete=function(e){var t=this;if(Vs(this)&&!Gs(this,{type:ua,object:this,oldValue:e}))return!1;if(this.has(e)){var r=$s(this),n=r?{observableKind:"set",debugObjectName:this.name_,type:ua,object:this,oldValue:e}:null;return Bs(function(){t.atom_.reportChanged(),t.data_.delete(e)}),r&&Hs(this,n),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=this.values();return ga({next:function(){var t=e.next(),r=t.value,n=t.done;return n?{value:void 0,done:n}:{value:[r,r],done:n}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=this.data_.values();return ga({next:function(){var r=t.next(),n=r.value,i=r.done;return i?{value:void 0,done:i}:{value:e.dehanceValue_(n),done:i}}})},t.intersection=function(e){return ii(e)&&!ha(e)?e.intersection(this):new Set(this).intersection(e)},t.union=function(e){return ii(e)&&!ha(e)?e.union(this):new Set(this).union(e)},t.difference=function(e){return new Set(this).difference(e)},t.symmetricDifference=function(e){return ii(e)&&!ha(e)?e.symmetricDifference(this):new Set(this).symmetricDifference(e)},t.isSubsetOf=function(e){return new Set(this).isSubsetOf(e)},t.isSupersetOf=function(e){return new Set(this).isSupersetOf(e)},t.isDisjointFrom=function(e){return ii(e)&&!ha(e)?e.isDisjointFrom(this):new Set(this).isDisjointFrom(e)},t.replace=function(e){var t=this;return ha(e)&&(e=new Set(e)),Bs(function(){Array.isArray(e)||ii(e)?(t.clear(),e.forEach(function(e){return t.add(e)})):null!=e&&Un("Cannot initialize set from "+e)}),this},t.observe_=function(e,t){return Ks(this,e)},t.intercept_=function(e){return Ws(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},hi(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),ha=ri("ObservableSet",pa);function ga(e){return e[Symbol.toStringTag]="SetIterator",Ha(e)}var va=Object.create(null),ma="remove",ba=function(){function e(e,t,r,n){void 0===t&&(t=new Map),void 0===n&&(n=Xi),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=r,this.defaultAnnotation_=n,this.keysAtom_=new Ai("ObservableObject.keys"),this.isPlainObject_=Zn(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var r=this.values_.get(e);if(r instanceof Co)return r.set(t),!0;if(Vs(this)){var n=Gs(this,{type:qs,object:this.proxy_||this.target_,name:e,newValue:t});if(!n)return null;t=n.newValue}if((t=r.prepareNewValue_(t))!==Jo.UNCHANGED){var i=$s(this),o=i?{type:qs,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:r.value_,name:e,newValue:t}:null;0,r.setNewValue_(t),i&&Hs(this,o)}return!0},t.get_=function(e){return Jo.trackingDerivation&&!ui(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,r){return void 0===r&&(r=!1),ui(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):r?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,r)},t.has_=function(e){if(!Jo.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new Ro(e in this.target_,Mi,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(Ia(this,t,e),!(e in this.target_)){var r;if(null!=(r=this.target_[yi])&&r[e])return;Un(1,t.annotationType_,this.name_+"."+e.toString())}for(var n=this.target_;n&&n!==Vn;){var i=Fn(n,e);if(i){var o=t.make_(this,e,i,n);if(0===o)return;if(1===o)break}n=Object.getPrototypeOf(n)}Pa(this,t,e)}},t.extend_=function(e,t,r,n){if(void 0===n&&(n=!1),!0===r&&(r=this.defaultAnnotation_),!1===r)return this.defineProperty_(e,t,n);Ia(this,r,e);var i=r.extend_(this,e,t,n);return i&&Pa(this,r,e),i},t.defineProperty_=function(e,t,r){void 0===r&&(r=!1),this.keysAtom_;try{Zo();var n=this.delete_(e);if(!n)return n;if(Vs(this)){var i=Gs(this,{object:this.proxy_||this.target_,name:e,type:aa,newValue:t.value});if(!i)return null;var o=i.newValue;t.value!==o&&(t=vi({},t,{value:o}))}if(r){if(!Reflect.defineProperty(this.target_,e,t))return!1}else jn(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{Qo()}return!0},t.defineObservableProperty_=function(e,t,r,n){void 0===n&&(n=!1),this.keysAtom_;try{Zo();var i=this.delete_(e);if(!i)return i;if(Vs(this)){var o=Gs(this,{object:this.proxy_||this.target_,name:e,type:aa,newValue:t});if(!o)return null;t=o.newValue}var s=wa(e),a={configurable:!Jo.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else jn(this.target_,e,a);var u=new Ro(t,r,"ObservableObject.key",!1);this.values_.set(e,u),this.notifyPropertyAddition_(e,u.value_)}finally{Qo()}return!0},t.defineComputedProperty_=function(e,t,r){void 0===r&&(r=!1),this.keysAtom_;try{Zo();var n=this.delete_(e);if(!n)return n;if(Vs(this))if(!Gs(this,{object:this.proxy_||this.target_,name:e,type:aa,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=wa(e),o={configurable:!Jo.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(r){if(!Reflect.defineProperty(this.target_,e,o))return!1}else jn(this.target_,e,o);this.values_.set(e,new Co(t)),this.notifyPropertyAddition_(e,void 0)}finally{Qo()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!ui(this.target_,e))return!0;if(Vs(this)&&!Gs(this,{object:this.proxy_||this.target_,name:e,type:ma}))return null;try{var r;Zo();var n,i=$s(this),o=this.values_.get(e),s=void 0;if(!o&&i)s=null==(n=Fn(this.target_,e))?void 0:n.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(o&&(this.values_.delete(e),o instanceof Ro&&(s=o.value_),ts(o)),this.keysAtom_.reportChanged(),null==(r=this.pendingKeys_)||null==(r=r.get(e))||r.set(e in this.target_),i){var a={type:ma,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:s,name:e};0,i&&Hs(this,a)}}finally{Qo()}return!0},t.observe_=function(e,t){return Ks(this,e)},t.intercept_=function(e){return Ws(this,e)},t.notifyPropertyAddition_=function(e,t){var r,n=$s(this);if(n){var i=n?{type:aa,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;0,n&&Hs(this,i)}null==(r=this.pendingKeys_)||null==(r=r.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),si(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function _a(e,t){var r;if(ui(e,Ii))return e;var n=null!=(r=null==t?void 0:t.name)?r:"ObservableObject",i=new ba(e,new Map,String(n),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Zi(e):void 0}(t));return ei(e,Ii,i),e}var ya=ri("ObservableObjectAdministration",ba);function wa(e){return va[e]||(va[e]={get:function(){return this[Ii].getObservablePropValue_(e)},set:function(t){return this[Ii].setObservablePropValue_(e,t)}})}function Sa(e){return!!Xn(e)&&ya(e[Ii])}function Pa(e,t,r){var n;null==(n=e.target_[yi])||delete n[r]}function Ia(e,t,r){}var Aa,Ea,Oa=Na(0),Ra=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),Ca=0,Ma=function(){};Aa=Ma,Ea=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Aa.prototype,Ea):void 0!==Aa.prototype.__proto__?Aa.prototype.__proto__=Ea:Aa.prototype=Ea;var xa=function(e){function t(t,r,n,i){var o;return void 0===n&&(n="ObservableArray"),void 0===i&&(i=!1),o=e.call(this)||this,Fa(function(){var e=new Xs(n,r,i,!0);e.proxy_=o,ti(o,Ii,e),t&&t.length&&o.spliceWithArray(0,0,t),Ra&&Object.defineProperty(o,"0",Oa)}),o}mi(t,e);var r=t.prototype;return r.concat=function(){this[Ii].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Array.prototype.concat.apply(this.slice(),t.map(function(e){return oa(e)?e.slice():e}))},r[Symbol.iterator]=function(){var e=this,t=0;return Ha({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},hi(t,[{key:"length",get:function(){return this[Ii].getArrayLength_()},set:function(e){this[Ii].setArrayLength_(e)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(Ma);function Na(e){return{enumerable:!1,configurable:!0,get:function(){return this[Ii].get_(e)},set:function(t){this[Ii].set_(e,t)}}}function Ta(e){jn(xa.prototype,""+e,Na(e))}function Da(e){if(e>Ca){for(var t=Ca;t<e+100;t++)Ta(t);Ca=e}}function Ua(e,t,r){return new xa(e,t,r)}function La(e,t){if("object"==typeof e&&null!==e){if(oa(e))return void 0!==t&&Un(23),e[Ii].atom_;if(ha(e))return e.atom_;if(ca(e)){if(void 0===t)return e.keysAtom_;var r=e.data_.get(t)||e.hasMap_.get(t);return r||Un(25,t,Ba(e)),r}if(Sa(e)){if(!t)return Un(26);var n=e[Ii].values_.get(t);return n||Un(27,t,Ba(e)),n}if(Ei(e)||No(e)||as(e))return e}else if(qn(e)&&as(e[Ii]))return e[Ii];Un(28)}function ka(e,t){return e||Un(29),void 0!==t?ka(La(e,t)):Ei(e)||No(e)||as(e)||ca(e)||ha(e)?e:e[Ii]?e[Ii]:void Un(24,e)}function Ba(e,t){var r;if(void 0!==t)r=La(e,t);else{if(bs(e))return e.name;r=Sa(e)||ca(e)||ha(e)?ka(e):La(e)}return r.name_}function Fa(e){var t=jo(),r=Eo(!0);Zo();try{return e()}finally{Qo(),Oo(r),Vo(t)}}Object.entries(Qs).forEach(function(e){var t=e[0],r=e[1];"concat"!==t&&ei(xa.prototype,t,r)}),Da(1e3);var ja,Va=Vn.toString;function Wa(e,t,r){return void 0===r&&(r=-1),Ga(e,t,r)}function Ga(e,t,r,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;if("function"!==o&&"object"!==o&&"object"!=typeof t)return!1;var s=Va.call(e);if(s!==Va.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0===+e?1/+e==1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++}e=$a(e),t=$a(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var u=e.constructor,l=t.constructor;if(u!==l&&!(qn(u)&&u instanceof u&&qn(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}if(0===r)return!1;r<0&&(r=-1),i=i||[];for(var c=(n=n||[]).length;c--;)if(n[c]===e)return i[c]===t;if(n.push(e),i.push(t),a){if((c=e.length)!==t.length)return!1;for(;c--;)if(!Ga(e[c],t[c],r-1,n,i))return!1}else{var f=Object.keys(e),d=f.length;if(Object.keys(t).length!==d)return!1;for(var p=0;p<d;p++){var h=f[p];if(!ui(t,h)||!Ga(e[h],t[h],r-1,n,i))return!1}}return n.pop(),i.pop(),!0}function $a(e){return oa(e)?e.slice():ni(e)||ca(e)||ii(e)||ha(e)?Array.from(e.entries()):e}var Ka=(null==(ja=kn().Iterator)?void 0:ja.prototype)||{};function Ha(e){return e[Symbol.iterator]=Ya,Object.assign(Object.create(Ka),e)}function Ya(){return this}["Symbol","Map","Set"].forEach(function(e){void 0===kn()[e]&&Un("MobX requires global '"+e+"' to be available or polyfilled")}),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:Ba},$mobx:Ii});class Ja{constructor(e,t,r){this.$w=e,this.stateService=t,this.experiments=r,Ze()(this,"menuItems",void 0),Ze()(this,"menuContext",void 0),this.menuItems=(e=>rt(e).menuItems)(this.$w),Ys(this,{menuItems:ho})}setNotificationsCount(){var e;if(!this.experiments.enabled(ke.EnableNotifications))return;const t=null==(e=this.stateService.notificationsCounter)||null==(e=e.counters)?void 0:e.find(e=>"notificationsCount"===e.key),r=null==t?void 0:t.count;this.$w($e).forEach(e=>{var t;null!=(t=e.navBarItems)&&t.length&&(e.navBarItems=[{...e.navBarItems[0],displayCount:r}])})}bindMenuItems(){const e=nt(this.menuItems);this.$w($e).menuItems=e}filterMenuItemsVisibleForRoles(){const{routes:e}=this.menuContext,{currentUserRoles:t}=this.menuContext;this.menuItems=this.menuItems.filter(r=>{var n;const i=((e,t)=>e.find(e=>{var r;return null==(r=t.link)?void 0:r.includes(e.path)}))(e,r);return null==i||null==(n=i.vfr)||!n.length||((e,t)=>!t.length||e.some(e=>t.includes(e)))(t,i.vfr)})}}const qa=["{userName}","my"];class za extends Ja{constructor(e,t,r){super(e,t,r),Ys(this,{initializeMenuItems:vs})}initializeMenuItems(e){if(this.menuContext=e,this.menuContext.cacheService.hasLoginMenuItems())return this.menuItems=this.menuContext.cacheService.getLoginMenuItems(),void this.bindMenuItems();this.filterMenuItemsVisibleForRoles(),this.fillMenuItemsWithSlugs(),this.setNotificationsCount(),this.menuContext.cacheService.setLoginMenuItems(this.menuItems),this.bindMenuItems()}fillMenuItemsWithSlugs(){var e;const{currentUser:t}=this.menuContext,r=(null==t||null==(e=t.profile)?void 0:e.slug)??(null==t?void 0:t.id);r&&(this.menuItems=this.menuItems.map(e=>this.updateMenuItemWithMemberSlug(e,r)))}updateMenuItemWithMemberSlug(e,t){const r=this.getSlugPlaceholderFromMenuItem(e);return this.isValidSlugPlaceholder(r)?this.replaceLinkInMenuItem(e,t):e}isValidSlugPlaceholder(e){return qa.includes(e)}replaceLinkInMenuItem(e,t){const r=this.getMemberPageRelativePathItemsFromMenuItem(e);if(!r.length)return e;const n=e.link.replace(r.join("/"),this.getMemberPageRelativePathWithMemberSlug(r,t));return{...e,link:n}}getMemberPageRelativePathWithMemberSlug(e,t){return e.map((e,r)=>1===r?t:e).join("/")}getSlugPlaceholderFromMenuItem(e){return this.getMemberPageRelativePathItemsFromMenuItem(e)[1]??""}getMemberPageRelativePathItemsFromMenuItem(e){const{membersAreaPagePrefix:t}=this.menuContext,r=e.link.indexOf(t);return e.link.slice(r).split("/")}}class Xa{constructor(e){this.siteAPI=e}async getMembersAreaPagePrefix(){const{prefixes:e}=await this.siteAPI.getSiteStructure(),t=e.find(e=>{let{applicationId:t}=e;return t===Me.rH});if(!t)throw new Error("Error: missing members area page - failed to find prefix");return t.prefix}}class Za{constructor(e,t){this.contextProps=e,this.contextServices=t,Ze()(this,"routes",[]),Ze()(this,"currentUser",null),Ze()(this,"currentUserRoles",[]),Ze()(this,"notificationsCounter",null),this.contextProps=e,this.contextServices=t,Ys(this,{routes:ho,currentUser:ho,currentUserRoles:ho,notificationsCounter:ho,fetchCurrentUser:vs,fetchCurrentUserRoles:vs,fetchRouteConfigurations:vs,fetchNotificationsCounters:vs})}async fetchCurrentUser(){const{cacheService:e,currentUserService:t}=this.contextServices;e.hasCurrentUser()?this.currentUser=e.getCurrentUser():(this.currentUser=await t.getCurrentUser(),e.setCurrentUser(this.currentUser))}async fetchCurrentUserRoles(){var e;const{cacheService:t,rolesService:r}=this.contextServices;t.hasRoles()?this.currentUserRoles=t.getRoles():(this.currentUserRoles=await r.getMemberRoles((null==(e=this.currentUser)?void 0:e.id)??null),t.setRoles(this.currentUserRoles))}async fetchRouteConfigurations(){var e,t;const{experiments:r}=this.contextProps.flowAPI,{cacheService:n}=this.contextServices;if(n.hasRoutes())return void(this.routes=n.getRoutes());const i=tt.getGlobalControllerConfig(),o=r.enabled(ke.EnablePublicAppData),s=null==i?void 0:i.appParams,a=null==i||null==(e=i.config)?void 0:e.routes,u=o?null==s||null==(t=s.publicData)||null==(t=t.APP)?void 0:t.routes:void 0;this.routes=u??a??[],n.setRoutes(this.routes)}async fetchNotificationsCounters(){var e,t;const{controllerConfig:r,experiments:n}=this.contextProps.flowAPI;if(!n.enabled(ke.EnableNotifications))return;const i=await Kr({memberId:null==(e=this.currentUser)?void 0:e.contactId,metaSiteId:null==(t=r.platformAPIs.bi)?void 0:t.metaSiteId,flowAPI:this.contextProps.flowAPI,wixCodeApi:this.contextProps.wixCodeApi});this.notificationsCounter=i}}class Qa extends Za{constructor(e,t){super(e,t),Ze()(this,"membersAreaPagePrefix",""),Ys(this,{membersAreaPagePrefix:ho,fetchMembersAreaPagePrefix:vs,fetchInitialData:vs})}async fetchMembersAreaPagePrefix(){const{pageService:e}=this.contextServices,t=await e.getMembersAreaPagePrefix();this.membersAreaPagePrefix=t.replace("/","")}async fetchInitialData(){const{isSSR:e}=this.contextProps.flowAPI.environment;if(e){await this.fetchDataWrapper();const{currentUser:e,currentUserRoles:t,routes:r,membersAreaPagePrefix:n,notificationsCounter:i}=this;return this.contextServices.warmupDataService.setData(Ve,JSON.stringify({currentUser:e,currentUserRoles:t,routes:r,membersAreaPagePrefix:n,notificationsCounter:i}))}const t=this.contextServices.warmupDataService.getData(Ve),r=t?JSON.parse(t):null;return r?(this.currentUser=r.currentUser,this.currentUserRoles=r.currentUserRoles,this.routes=r.routes,this.membersAreaPagePrefix=r.membersAreaPagePrefix,void(this.notificationsCounter=r.notificationsCounter)):this.fetchDataWrapper()}async fetchDataWrapper(){await this.fetchCurrentUser(),await Promise.all([this.fetchRouteConfigurations(),this.fetchCurrentUserRoles(),this.fetchMembersAreaPagePrefix(),this.fetchNotificationsCounters()])}}const eu=async e=>{const{contextProps:t,contextServices:r}=(e=>{const{flowAPI:t,controllerConfig:r}=e,{wixCodeApi:n,appParams:i,$w:o}=r,s={$w:o,flowAPI:t,wixCodeApi:n,appParams:i},{currentUserService:a,rolesService:u,cacheService:l,warmupDataService:c}=Dn({flowAPI:t,controllerConfig:r}),f=new Xa(n.site),d=new Qa(s,{currentUserService:a,cacheService:l,rolesService:u,warmupDataService:c,pageService:f});return{contextProps:s,contextServices:{currentUserService:a,cacheService:l,rolesService:u,menuService:new za(o,d,t.experiments),stateService:d}}})(e),{environment:n}=t.flowAPI,{user:i}=t.wixCodeApi,{stateService:o,cacheService:s,menuService:a}=r,u=i.currentUser.loggedIn&&!n.isEditor;return{async pageReady(){u&&(await o.fetchInitialData(),a.initializeMenuItems({...o,cacheService:s})),((e,t)=>{e.wixCodeApi.user.onLogin(async()=>{await t.stateService.fetchInitialData(),t.menuService.initializeMenuItems({...t.stateService,cacheService:t.cacheService})})})(t,r),tt.setMembersLoginWidgets([...tt.getMembersLoginWidgets(),...rt(t.$w)])}}};class tu extends Ja{constructor(e,t,r){super(e,t,r),Ys(this,{initializeMenuItems:vs})}initializeMenuItems(e){if(this.menuContext=e,this.menuContext.cacheService.hasLoginMenuItems())return this.menuItems=this.menuContext.cacheService.getLoginMenuItems(),void this.bindMenuItems();this.filterMenuItemsVisibleForRoles(),this.setNotificationsCount(),this.menuContext.cacheService.setLoginMenuItems(this.menuItems),this.bindMenuItems()}}class ru extends Za{constructor(e,t){super(e,t),this.contextProps=e,this.contextServices=t,Ys(this,{fetchInitialData:vs})}async fetchInitialData(){const{isSSR:e}=this.contextProps.flowAPI.environment;if(e){await this.fetchDataWrapper();const{currentUser:e,currentUserRoles:t,routes:r,notificationsCounter:n}=this;return this.contextServices.warmupDataService.setData(Ve,JSON.stringify({currentUser:e,currentUserRoles:t,routes:r,notificationsCounter:n}))}const t=this.contextServices.warmupDataService.getData(Ve),r=t?JSON.parse(t):null;return r?(this.currentUser=r.currentUser,this.currentUserRoles=r.currentUserRoles,this.routes=r.routes,void(this.notificationsCounter=r.notificationsCounter)):this.fetchDataWrapper()}async fetchDataWrapper(){await this.fetchCurrentUser(),await Promise.all([this.fetchRouteConfigurations(),this.fetchCurrentUserRoles(),this.fetchNotificationsCounters()])}}const nu=async e=>{const{contextProps:t,contextServices:r}=(e=>{const{flowAPI:t,controllerConfig:r}=e,{wixCodeApi:n,appParams:i,$w:o}=r,s={$w:o,flowAPI:t,wixCodeApi:n,appParams:i},{currentUserService:a,rolesService:u,cacheService:l,warmupDataService:c}=Dn({flowAPI:t,controllerConfig:r}),f=new ru(s,{currentUserService:a,cacheService:l,rolesService:u,warmupDataService:c});return{contextProps:s,contextServices:{currentUserService:a,cacheService:l,rolesService:u,menuService:new tu(o,f,t.experiments),stateService:f}}})(e),{environment:n}=t.flowAPI,{user:i}=t.wixCodeApi,{stateService:o,cacheService:s,menuService:a}=r,u=i.currentUser.loggedIn&&!n.isEditor;return{async pageReady(){u&&(await o.fetchInitialData(),a.initializeMenuItems({...o,cacheService:s})),((e,t)=>{e.wixCodeApi.user.onLogin(async()=>{await t.stateService.fetchInitialData(),t.menuService.initializeMenuItems({...t.stateService,cacheService:t.cacheService})})})(t,r),tt.setMembersLoginWidgets([...tt.getMembersLoginWidgets(),...rt(t.$w)])}}},iu=async e=>(await(async(e,t)=>{const[r,n]=await Promise.all([Ne(e.controllerConfig.wixCodeApi),xe(e.controllerConfig.wixCodeApi)]);return r?nu:n||(e=>{var t;return null==e||null==(t=e.connections)||null==(t=t[0])||null==(t=t.config)?void 0:t.isMembersAreaV2})(t)?eu:vn})(e.flowAPI,e.controllerConfig))(e),ou=async e=>{let{controllerConfig:t,appData:r,flowAPI:n}=e;const{wixCodeApi:i,$w:o}=t,s="Editor"===i.window.viewMode,a=t;return ln(a),{async pageReady(){const e=await(null==r?void 0:r.initApplication());i.user.onLogin(t=>qe("onLogin",()=>cn(t,n.httpClient).then(()=>sn(a,e,n)))()),s?n.environment.isMobile&&fn(o,i,e.parsedRouters):sn(a,e,n)}}};class su{constructor(e,t,r,n,i){this.routes=e,this.settingsRoutes=t,this.location=r,this.site=n,this.window=i}async hasSocialPages(e,t){const r=await this.getRoutes(e);if(!r.length)return Promise.resolve(!1);const n=r.some(e=>!e.private);return null==e||e(n),Promise.resolve(n)}async getRoutes(e){return null==e||e(this.routes),Promise.resolve(this.routes)}async getSettingsRoutes(e){return null==e||e(this.settingsRoutes),Promise.resolve(this.settingsRoutes)}async navigateToSection(e,t){var r,n;let{memberId:i="",tpaInnerRoute:o="",widgetId:s,appDefinitionId:a}=e;if(!s){var u,l;const e=await this.getPageUrlByAppDefId(a,t);return null==(u=(l=this.location).to)||u.call(l,e),Promise.resolve()}const c=await this.findRouteByWidgetId(s,t);if(!c)throw null==t||t(Le.CannotFindPageToNavigateTo),new Error(Le.CannotFindPageToNavigateTo);const f=await this.getMembersAreaSectionURL({suffix:c.path,memberId:i,tpaInnerRoute:o,onError:t});var d,p;return s===It.FollowingFollowers?(null==(d=(p=this.location).to)||d.call(p,`${this.location.baseUrl}${f}`),Promise.resolve()):(null==(r=(n=this.location).to)||r.call(n,f),Promise.resolve())}async navigateToMember(e,t){let{memberId:r,memberSlug:n}=e;if(!r)throw null==t||t(Le.MissingMemberId),new Error(Le.MissingMemberId);const i=await this.getNavigableHomePage(t);if(!i)throw null==t||t(Le.CannotNavigateToMemberNoPublicPage),new Error(Le.CannotNavigateToMemberNoPublicPage);{var o,s;const e=await this.getMembersAreaSectionURL({suffix:i.suffix,memberId:n||r,onError:t});null==(o=(s=this.location).to)||o.call(s,e)}return Promise.resolve()}async getNavigatableRoles(e){const t=await this.getNavigableHomePage(e);if(t){return{navigatableMembersRoles:t.visibleForRoles??[],isNavigationAllowed:!0}}return{navigatableMembersRoles:[],isNavigationAllowed:!1}}async getSectionUrl(e,t){let{widgetId:r,memberId:n="",memberSlug:i="",tpaInnerRoute:o="",appDefinitionId:s}=e;if(!r)return this.getPageUrlByAppDefId(s,t);let a=this.location.baseUrl;"/"===a.slice(-1)&&(a=a.slice(0,-1));const u=await this.findRouteByWidgetId(r,t);if(!u)throw null==t||t(`${Le.RouteNotFound} ${r}`),new Error(`${Le.RouteNotFound} ${r}`);return`${a}${await this.getMembersAreaSectionURL({suffix:u.path,memberId:n,memberSlug:i,tpaInnerRoute:o,onError:t})}`}async getMemberPagePrefix(e,t,r){return{prefix:await this.getMembersAreaPagePrefix(r)}}setNotificationCount(e){return tt.getMembersLoginWidgets().forEach(t=>{var r;null!=(r=t.navBarItems)&&r.length&&(t.navBarItems=[{...t.navBarItems[0],displayCount:e>0?e:null}])}),Promise.resolve()}getIsMembersAreaSeoEnabled(){return Promise.resolve(!0)}async isAppSectionInstalled(e){let{widgetId:t}=e;return!!await this.findRouteByWidgetId(t)}async openLightbox(e,t){const r=await this.getLightboxIdByTpaPageId(e);if(!r)throw new Error(`Lightbox ${e} is not installed`);return this.window.openLightboxById(r,t)}async getInstalledLightboxes(){const{lightboxes:e}=await this.getSiteStructure();return e.map(e=>{let{tpaPageId:t}=e;return t})}async getPageUrlByAppDefId(e,t){const{pages:r}=await this.getSiteStructure(),n=r.find(t=>t.applicationId===e&&!t.prefix);if(null==n||!n.url)throw null==t||t(Le.CannotFindPageToNavigateTo),new Error(Le.CannotFindPageToNavigateTo);return n.url}async getNavigableHomePage(e){const t=(await this.getRoutes()).filter(e=>!e.private);if(!t.length)return;const r=t.find(e=>e.home),n=await this.getMembersAreaPagePrefix(e);if(r)return{prefix:n,suffix:r.path,visibleForRoles:r.vfr};{const e=t[0];return{prefix:n,suffix:e.path,visibleForRoles:e.vfr}}}getSiteStructure(){return this.site.getSiteStructure({includePageId:!0})}async getMembersAreaPagePrefix(e){const{prefixes:t}=await this.getSiteStructure(),r=t.find(e=>{let{applicationId:t}=e;return t===De});if(!r)throw null==e||e(Le.MissingMembersAreaPage),new Error(Le.MissingMembersAreaPage);return r.prefix}async getMembersAreaSectionURL(e){let{suffix:t,memberId:r,memberSlug:n,tpaInnerRoute:i,onError:o}=e;const s=r?`/${n||r}/${t}`:`/${t}`,a=`${await this.getMembersAreaPagePrefix(o)}${s}`;if(!i)return a;return`${a}${"/"!==(null==i?void 0:i.charAt(0))?`/${i}`:i}`}async findRouteByWidgetId(e,t){return(await this.getRoutes()).find(t=>t.widgetId===e)}async getLightboxIdByTpaPageId(e){const{lightboxes:t}=await this.getSiteStructure(),r=t.find(t=>t.tpaPageId===e);return null==r?void 0:r.id}}const au=()=>tt.getWixCodeAPI().site.getPublicAPI(De),uu=()=>{const e=(()=>{var e;const t=(null==(e=tt.getGlobalControllerConfig())||null==(e=e.config)?void 0:e.routes)??[],r=tt.getRoutes();return r.length?r:t})(),t=tt.getSettingsRoutes(),r=tt.getWixCodeAPI();if(null==e||!e.length)throw new Error(Le.MissingRoutes);if(!r)throw new Error(Le.NotInitializedWixCodeApi);return new su(e,t,r.location,r.site,r.window)};class lu{constructor(e,t,r,n,i){this.routes=e,this.settingsRoutes=t,this.location=r,this.site=n,this.window=i}async hasSocialPages(e,t){const r=(await this.getRoutes(e)).length>0;return null==e||e(r),Promise.resolve(r)}async getRoutes(e){return null==e||e(this.routes),Promise.resolve(this.routes)}async getSettingsRoutes(e){return null==e||e(this.settingsRoutes),Promise.resolve(this.settingsRoutes)}async navigateToSection(e,t){let{memberId:r="",tpaInnerRoute:n="",widgetId:i,appDefinitionId:o,sectionId:s}=e;const a=await this.findRouteByWidgetId(i);return a?this.navigateByRoute({routeData:a,memberId:r,tpaInnerRoute:n,widgetId:i},t):this.navigateByPagePath({appDefinitionId:o,sectionId:s},t)}async navigateToMember(e,t){let{memberId:r,memberSlug:n}=e;if(!r)throw null==t||t(Le.MissingMemberId),new Error(Le.MissingMemberId);const i=await this.getNavigableHomePage(t);if(!i)throw null==t||t(Le.CannotNavigateToMemberNoPublicPage),new Error(Le.CannotNavigateToMemberNoPublicPage);{var o,s;const e=await this.getMembersAreaSectionURL({suffix:i.suffix,memberId:n||r},t);null==(o=(s=this.location).to)||o.call(s,e)}return Promise.resolve()}async getNavigatableRoles(e){const t=await this.getNavigableHomePage(e);if(t){return{navigatableMembersRoles:t.visibleForRoles??[],isNavigationAllowed:!0}}return{navigatableMembersRoles:[],isNavigationAllowed:!1}}async getSectionUrl(e,t){let{appDefinitionId:r,sectionId:n,memberId:i,memberSlug:o,widgetId:s,tpaInnerRoute:a}=e;const u=await this.findRouteByWidgetId(s);if(u){const e=await this.getMembersAreaSectionURL({suffix:u.route.path,memberId:i,memberSlug:o,tpaInnerRoute:a},t);return this.prependBaseUrl(e)}const{url:l}=await this.site.getSectionUrl({appDefinitionId:r,sectionId:n});if(!l)throw null==t||t(Le.SectionUrlNotFound),new Error(Le.SectionUrlNotFound);return l}async getMemberPagePrefix(e,t,r){return{prefix:await this.getMembersAreaPagePrefix(r)}}setNotificationCount(e){return tt.getMembersLoginWidgets().forEach(t=>{var r;null!=(r=t.navBarItems)&&r.length&&(t.navBarItems=[{...t.navBarItems[0],displayCount:e}])}),Promise.resolve()}getIsMembersAreaSeoEnabled(){return Promise.resolve(!0)}async isAppSectionInstalled(e){let{appDefinitionId:t,sectionId:r,widgetId:n}=e;return!(!await this.findRouteByWidgetId(n)&&!await this.findPage({appDefinitionId:t,sectionId:r}))}async openLightbox(e,t){const r=await this.getLightboxIdByTpaPageId(e);if(!r)throw new Error(`Lightbox ${e} is not installed`);return this.window.openLightboxById(r,t)}async getInstalledLightboxes(){const{lightboxes:e}=await this.getSiteStructure();return e.map(e=>{let{tpaPageId:t}=e;return t})}async getPagePath(e){const t=await this.findPage(e);return null==t?void 0:t.url}async findPage(e){let{appDefinitionId:t,sectionId:r}=e;const{pages:n}=await this.getSiteStructure();return n.find(e=>e.applicationId===t&&e.tpaPageId===r&&!e.prefix)}async prependBaseUrl(e){let t=this.location.baseUrl;return"/"===t.slice(-1)&&(t=t.slice(0,-1)),`${t}${e}`}async getNavigableHomePage(e){const t=(await this.getRoutes()).filter(e=>!e.private);if(!t.length)return;const r=t.find(e=>e.home),n=await this.getMembersAreaPagePrefix(e);if(r)return{prefix:n,suffix:r.path,visibleForRoles:r.vfr};{const e=t[0];return{prefix:n,suffix:e.path,visibleForRoles:e.vfr}}}getSiteStructure(){return this.site.getSiteStructure({includePageId:!0})}async getMembersAreaPagePrefix(e){const t=await this.findPage({appDefinitionId:De,sectionId:"member_page"});if(null==t||!t.url)throw null==e||e(Le.MissingMembersAreaPage),new Error(Le.MissingMembersAreaPage);return t.url}async getMemberSettingsPagePrefix(e){const t=await this.findPage({appDefinitionId:De,sectionId:"member_settings_page"});if(null==t||!t.url)throw null==e||e(Le.MissingMembersAreaSettingsPage),new Error(Le.MissingMembersAreaSettingsPage);return t.url}async getMembersAreaSectionURL(e,t){let{suffix:r,memberId:n,memberSlug:i,tpaInnerRoute:o}=e;const s=n?`/${i||n}/${r}`:`/${r}`,a=`${await this.getMembersAreaPagePrefix(t)}${s}`;if(!o)return a;return`${a}${"/"!==(null==o?void 0:o.charAt(0))?`/${o}`:o}`}async getMemberSettingsSectionURL(e,t){return`${await this.getMemberSettingsPagePrefix(t)}/${e}`}async findRouteByWidgetId(e){const t=(await this.getRoutes()).find(t=>t.widgetId===e);if(t)return{route:t,type:je.Profile};const r=(await this.getSettingsRoutes()).find(t=>t.widgetId===e);return r?{route:r,type:je.Settings}:null}async navigateToMembersAreaSection(e,t){var r,n;let{suffix:i,memberId:o,tpaInnerRoute:s,widgetId:a}=e;const u=await this.getMembersAreaSectionURL({suffix:i,memberId:o,tpaInnerRoute:s},t);var l,c;return a===It.FollowingFollowers?(null==(l=(c=this.location).to)||l.call(c,`${this.location.baseUrl}${u}`),Promise.resolve()):(null==(r=(n=this.location).to)||r.call(n,u),Promise.resolve())}async navigateToMemberSettingsSection(e,t){var r,n;const i=await this.getMemberSettingsSectionURL(e,t);return null==(r=(n=this.location).to)||r.call(n,i),Promise.resolve()}async navigateByRoute(e,t){let{routeData:r,memberId:n,widgetId:i,tpaInnerRoute:o}=e;switch(r.type){case je.Profile:return this.navigateToMembersAreaSection({suffix:r.route.path,memberId:n,tpaInnerRoute:o,widgetId:i},t);case je.Settings:return this.navigateToMemberSettingsSection(r.route.path,t)}}async navigateByPagePath(e,t){var r,n;let{appDefinitionId:i,sectionId:o}=e;const s=await this.getPagePath({appDefinitionId:i,sectionId:o});if(!s)throw null==t||t(Le.CannotFindPageToNavigateTo),new Error(Le.CannotFindPageToNavigateTo);return null==(r=(n=this.location).to)||r.call(n,s),Promise.resolve()}async getLightboxIdByTpaPageId(e){const{lightboxes:t}=await this.getSiteStructure(),r=t.find(t=>t.tpaPageId===e);return null==r?void 0:r.id}}const cu=async()=>{const e=tt.getWixCodeAPI();return await e.site.getPublicAPI(De)},fu=()=>{const e=tt.getSettingsRoutes(),t=tt.getRoutes(),r=tt.getWixCodeAPI();if(!r)throw new Error(Le.NotInitializedWixCodeApi);return new lu(t,e,r.location,r.site,r.window)},du=(e,t,r)=>{const n=new Tn(t.window.warmupData);let i=null;return{getAppData:()=>(i||(i=async function(e){let{wixCodeApi:t,appParams:r,flowAPI:n,warmupDataService:i}=e;const o=en.getCurrentUser(),s=en.getRoles(),a=en.getViewedUser(),u=o.loggedIn&&0===Object.keys(s).length,l=null==t.site.getAppToken?void 0:t.site.getAppToken(r.appDefinitionId),c="backend"===t.window.rendering.env,f=(r.appRouters||[]).map(e=>({...e,config:JSON.parse(e.config)})),d=f.map(e=>e.config),p=async()=>{const[e,t]=await Promise.all([nn(l,c),u?on(l):{}]);return{counters:e,roles:t}};let h;n.environment.isSSR?(h=await p(),i.setData(Ve,h)):h=i.getData(Ve)||await p();const{counters:g,roles:v}=h;u&&en.setRoles(v);const m=ze(r),b=en.getRoles()[o.id]||[],_=en.getRoles()[a.id]||[],y=f.find(e=>"public"===e.config.type);return{counters:g,parsedRouters:f,parsedRoutersConfigs:d,parsedConfigItems:m,currentUserRoles:b,viewedUserRoles:_,publicRouterPrefix:(null==y?void 0:y.prefix)??""}}({appParams:e,wixCodeApi:t,flowAPI:r,warmupDataService:n})),i)}};var pu=function(e){return e.V1="v1",e.V2="v2",e.V3="v3",e}(pu||{});Os({isolateGlobalState:!0});const hu={[pu.V1]:()=>({hasSocialPages:(e,t)=>qe("publicApi.hasSocialPages",()=>Qr.hasSocialPages(e,t))(),getViewedUser:(e,t)=>qe("publicApi.getViewedUser",()=>Qr.getViewedUser(e,t))(),navigateToSection:(e,t)=>qe("publicApi.navigateToSection",()=>Qr.navigateToSection(e,t))(),navigateToMember:(e,t)=>qe("publicApi.navigateToMember",()=>Qr.navigateToMember(e,t))(),getNavigatableRoles:e=>qe("publicApi.getNavigatableRoles",()=>Qr.getNavigatableRoles(e))(),getSectionUrl:(e,t)=>qe("publicApi.getSectionUrl",()=>Qr.getSectionUrl(e,t))(),getMemberPagePrefix:(e,t,r)=>qe("publicApi.getMemberPagePrefix ",()=>Qr.getMemberPagePrefix(e,t,r))(),setNotificationCount:e=>qe("publicApi.setNotificationCount",()=>Qr.setNotificationCount({config:Xr,userService:en,displayCount:e}))(),enterPublicProfilePreviewMode:()=>qe("publicApi.enterPublicProfilePreviewMode",()=>Qr.enterPublicProfilePreviewMode({userService:en,config:Xr}))(),leavePublicProfilePreviewMode:()=>qe("publicApi.leavePublicProfilePreviewMode",()=>Qr.leavePublicProfilePreviewMode({userService:en,config:Xr}))(),openBlockedMemberEmptyState:async()=>{throw new Error("openBlockedMemberEmptyState is only supported in members area v2")},clearMenus:()=>qe("publicApi.clearMenus",()=>Qr.clearMenus({config:Xr}))(),getRoutes:()=>{throw new Error("getRoutes is only supported in members area v2")},getSettingsRoutes:()=>{throw new Error("getRoutes is only supported in members area v3")},getIsMembersAreaSeoEnabled:()=>qe("publicApi.getIsMembersAreaSeoEnabled",()=>Qr.getIsMembersAreaSeoEnabled({config:Zr}))(),isAppSectionInstalled:e=>qe("publicApi.isAppSectionInstalled",()=>Qr.isAppSectionInstalled(e))(),openLightbox:()=>{throw new Error("openLightbox is only supported in members area v2 and v3")},getInstalledLightboxes:()=>Promise.resolve([])}),[pu.V2]:()=>({hasSocialPages:(e,t)=>qe("publicApi.hasSocialPages",()=>uu().hasSocialPages(e,t))(),getViewedUser:(e,t)=>qe("publicApi.getViewedUser",async()=>(await au()).getViewedUser(e,t))(),navigateToSection:(e,t)=>qe("publicApi.navigateToSection",()=>uu().navigateToSection(e,t))(),navigateToMember:(e,t)=>qe("publicApi.navigateToMember",()=>uu().navigateToMember(e,t))(),getNavigatableRoles:e=>qe("publicApi.getNavigatableRoles",()=>uu().getNavigatableRoles(e))(),getSectionUrl:(e,t)=>qe("publicApi.getSectionUrl",()=>uu().getSectionUrl(e,t))(),getMemberPagePrefix:(e,t,r)=>qe("publicApi.getMemberPagePrefix ",()=>uu().getMemberPagePrefix(e,t,r))(),setNotificationCount:e=>qe("publicApi.setNotificationCount",()=>uu().setNotificationCount(e))(),enterPublicProfilePreviewMode:()=>qe("publicApi.enterPublicProfilePreviewMode",async()=>(await au()).enterPublicProfilePreviewMode())(),leavePublicProfilePreviewMode:()=>qe("publicApi.leavePublicProfilePreviewMode",async()=>(await au()).leavePublicProfilePreviewMode())(),openBlockedMemberEmptyState:()=>qe("publicApi.openBlockedMemberEmptyState",async()=>(await au()).openBlockedMemberEmptyState())(),clearMenus:()=>qe("publicApi.clearMenus",async()=>(await au()).clearMenus())(),getRoutes:e=>qe("publicApi.getRoutes",()=>uu().getRoutes(e))(),getSettingsRoutes:e=>qe("publicApi.getSettingsRoutes",()=>uu().getSettingsRoutes(e))(),getIsMembersAreaSeoEnabled:()=>qe("publicApi.getIsMembersAreaSeoEnabled",()=>uu().getIsMembersAreaSeoEnabled())(),isAppSectionInstalled:e=>qe("publicApi.isAppSectionInstalled",()=>uu().isAppSectionInstalled(e))(),openLightbox:(e,t)=>qe("publicApi.openLightbox",()=>uu().openLightbox(e,t))(),getInstalledLightboxes:()=>qe("publicApi.getInstalledLightboxes",()=>uu().getInstalledLightboxes())()}),[pu.V3]:()=>({hasSocialPages:(e,t)=>qe("v3.publicApi.hasSocialPages",()=>fu().hasSocialPages(e,t))(),getViewedUser:(e,t)=>qe("v3.publicApi.getViewedUser",async()=>(await cu()).getViewedUser(e,t))(),navigateToSection:(e,t)=>qe("v3.publicApi.navigateToSection",()=>fu().navigateToSection(e,t))(),navigateToMember:(e,t)=>qe("v3.publicApi.navigateToMember",()=>fu().navigateToMember(e,t))(),getNavigatableRoles:e=>qe("v3.publicApi.getNavigatableRoles",()=>fu().getNavigatableRoles(e))(),getSectionUrl:(e,t)=>qe("v3.publicApi.getSectionUrl",()=>fu().getSectionUrl(e,t))(),getMemberPagePrefix:(e,t,r)=>qe("v3.publicApi.getMemberPagePrefix ",()=>fu().getMemberPagePrefix(e,t,r))(),setNotificationCount:e=>qe("v3.publicApi.setNotificationCount",()=>fu().setNotificationCount(e))(),enterPublicProfilePreviewMode:()=>qe("v3.publicApi.enterPublicProfilePreviewMode",async()=>(await cu()).enterPublicProfilePreviewMode())(),leavePublicProfilePreviewMode:()=>qe("v3.publicApi.leavePublicProfilePreviewMode",async()=>(await cu()).leavePublicProfilePreviewMode())(),openBlockedMemberEmptyState:()=>qe("v3.publicApi.openBlockedMemberEmptyState",async()=>(await cu()).openBlockedMemberEmptyState())(),clearMenus:()=>qe("v3.publicApi.clearMenus",async()=>(await cu()).clearMenus())(),getRoutes:e=>qe("v3.publicApi.getRoutes",()=>fu().getRoutes(e))(),getSettingsRoutes:e=>qe("v3.publicApi.getSettingsRoutes",()=>fu().getSettingsRoutes(e))(),getIsMembersAreaSeoEnabled:()=>qe("v3.publicApi.getIsMembersAreaSeoEnabled",()=>fu().getIsMembersAreaSeoEnabled())(),isAppSectionInstalled:e=>qe("v3.publicApi.isAppSectionInstalled",()=>fu().isAppSectionInstalled(e))(),openLightbox:(e,t)=>qe("v3.publicApi.openLightbox",()=>fu().openLightbox(e,t))(),getInstalledLightboxes:()=>qe("v3.publicApi.getInstalledLightboxes",()=>fu().getInstalledLightboxes())()})},gu=async()=>{const e=await(async()=>{const e=tt.getWixCodeAPI(),[t,r]=await Promise.all([Ne(e),xe(e)]);return t?pu.V3:r?pu.V2:pu.V1})();return(0,hu[e])()},vu=async(e,t,r,n,i)=>{var o;const s=null==(o=e.publicData)?void 0:o.APP,a=(null==s?void 0:s.routes)??[],u=(null==s?void 0:s.settingsRoutes)??[],l=(e=>Rt(e)?Ot(e):e)(a);(e=>{const t=Math.random();Ye=e,Je=.1>=t})(i.panoramaClient),tt.setFlowAPI(i),tt.setWixCodeAPI(r),tt.setRoutes(l),tt.setSettingsRoutes(u);const c=du(e,r,i),f=qe("initAppForPage",()=>rn(e,t,r,i,n))();return{initApplication:async()=>(await f,c.getAppData())}},mu=()=>gu();var bu={disabled:{on:"disable",off:"enable"},hidden:{on:"hide",off:"show"},collapsed:{on:"collapse",off:"expand"},deleted:{on:"delete",off:"restore"}};var _u,yu,wu=function(e,t,r){return void 0===r&&(r=[]),function(n,i){if(!i)throw new Error("No selector found "+n);var o=r.length>0?function(e,t,r){if(!e||"object"!=typeof e)return r;for(var n=e,i=0,o=t;i<o.length;i++){var s=o[i];if(!n||"object"!=typeof n)return r;n=n[s]}return void 0!==n?n:r}(e(n),r):e(n),s=[],a="data"in i;a&&function(e,t,r){if(void 0!==t){var n={};e.onItemReady(r.action(function(e,i,o){var s=wu(e,r),a=t(i,s,o);if(a){var u=Su(e,r)(a);n[i._id]=u}})),e.onItemRemoved(r.action(function(e){n[e._id]()}))}}(o,i.item,t);var u=function(e){return"currentState"in e}(i);if(u&&i.currentState){var l=t.reaction(i.currentState,function(e){o.changeState(e)},{fireImmediately:!0});s.push(l)}for(var c=function(i,l){if(void 0===l)return"continue";if(a&&"item"===i)return"continue";if(u&&"currentState"===i)return"continue";if(i.startsWith("on"))return o[i](t.action(l)),"continue";var c=te(r,[i]);if(function(e){return"object"==typeof e}(l)){var f=wu(e,t,c)(n,l);return s.push(f),"continue"}if(i){var d=t.reaction(l,function(t){if(s=o,(a=i)in bu&&bu[a].on in s&&bu[a].off in s){var r=function(e){return bu[e]}(i)[t?"on":"off"];o[r]&&o[r]()}else!function(e,t,r){if(!e||"object"!=typeof e)return e;var n=te(t),i=n.pop();if(i){for(var o=e,s=0,a=n;s<a.length;s++){var u=a[s];o[u]&&"object"==typeof o[u]||(o[u]={}),o=o[u]}o[i]=r}}(e(n),c,t);var s,a},{fireImmediately:!0});s.push(d)}},f=0,d=Object.entries(i);f<d.length;f++){var p=d[f];c(p[0],p[1])}return function(){return s.forEach(function(e){return e()})}}},Su=function(e,t){return function(r){for(var n=wu(e,t),i=[],o=0,s=Object.entries(r);o<s.length;o++){var a=s[o],u=a[0],l=a[1];if(l){var c=n(u,l);i.push(c)}}return function(){return i.forEach(function(e){return e()})}}},Pu=function(e){return function(t){if(!t)throw new Error("Trying to initialize state without $w.");return{$bindAll:Su(t,e),$bind:wu(t,e)}}},Iu=function(e,t){var r,n;return null!==(n=null===(r=t.observable)||void 0===r?void 0:r.call(t,e))&&void 0!==n?n:e},Au=function(e){return function(t){if(!t)throw new Error("Trying to initialize state without default state.");return{state:Iu(t,e)}}};const Eu=e=>function(t){void 0===t&&(t={});const r="function"==typeof e.factory?e.factory(t):e;return function(e,t){return Object.defineProperty(t,"updateDefaults",{value:function(t){return e.updateDefaults(t)}}),t}(r,r.logger())},Ou=Eu;var Ru=e,Cu=t,Mu=i,xu={initState:(_u={initState:Au(yu={configure:function(){Os({isolateGlobalState:!0})},observable:ho,action:vs,reaction:function(e,t,r){var n,i,o;void 0===r&&(r=Gn);var s,a,u,l=null!=(n=r.name)?n:"Reaction",c=vs(l,r.onError?(s=r.onError,a=t,function(){try{return a.apply(this,arguments)}catch(e){s.call(this,e)}}):t),f=!r.scheduler&&!r.delay,d=ws(r),p=!0,h=!1,g=r.compareStructural?Ri.structural:r.equals||Ri.default,v=new rs(l,function(){p||f?m():h||(h=!0,d(m))},r.onError,r.requiresObservable);function m(){if(h=!1,!v.isDisposed){var t=!1,n=u;v.track(function(){var r=Ao(!1,function(){return e(v)});t=p||!g(u,r),u=r}),(p&&r.fireImmediately||!p&&t)&&c(u,n,v),p=!1}}return null!=(i=r)&&null!=(i=i.signal)&&i.aborted||v.schedule_(),v.getDisposer_(null==(o=r)?void 0:o.signal)}}),initBind:Pu(yu)}).initState,initBind:_u.initBind,observable:ho};const Nu=!1;var Tu={DSN:"https://1447e27dc6864379bd4824d259480b74@sentry-next.wixpress.com/7858",id:"undefined",projectName:"santa-members-viewer-app",teamName:"undefined",errorMonitor:!0},Du={enabled:!1,icuEnabled:!1},Uu=null,Lu=null;const ku=o.exports,Bu=function(e){var t=e.initAppForPage,r=e.sentryConfig,n=void 0===r?null:r,i=e.experimentsConfig,o=void 0===i?null:i,s=e.inEditor,a=void 0!==s&&s,u=e.projectName,l=e.defaultTranslations,c=e.translationsConfig,f=e.biConfig,d=e.biLogger,p=e.appName,h=void 0===p?null:p,v=e.optionalDeps,m=e.localeDistPath,b=e.prepopulatedData,_=e.shouldUseEssentials;return function(e,r,i,s){return z(void 0,void 0,void 0,function(){var p,y,w,S,P,I,A,E,O;return X(this,function(R){switch(R.label){case 0:return[4,$(r.platformApiProvider)];case 1:return p=R.sent(),y=p.userAPI,w=p.windowAPI,S=p.siteAPI,P=p.seoAPI,I=new V({experimentsConfig:o,projectName:u,sentryConfig:n,platformBI:s.bi,biLoggerFactory:s.biLoggerFactory,essentials:s.essentials,monitoring:s.monitoring,userAPI:y,windowAPI:w,siteAPI:S,seoAPI:P,appData:e,translationsConfig:c,defaultTranslations:l,inEditor:a,biConfig:f,biLogger:d,appName:h,optionalDeps:v,localeDistPath:m,prepopulatedData:b,shouldUseEssentials:_,basePath:g()}),H(I),A=I.init(),Y(A),[4,A];case 2:if(R.sent(),!t)return[3,6];R.label=3;case 3:return R.trys.push([3,5,,6]),[4,t(e,r,i,s,I)];case 4:return E=R.sent(),q(E),[3,6];case 5:throw O=R.sent(),a||(console.error('\u2757\ufe0fError \u{1f449} "'.concat(h,'" app \u{1f449} `viewer.app.ts` module \u2757\n'),O),I.reportError(O)),O;case 6:return[2,J()]}})})}}({initAppForPage:o.initAppForPage,sentryConfig:Tu,experimentsConfig:{scopes:["members-area"],centralized:!0},inEditor:!1,biLogger:Ou,multilingualDisabled:Nu,projectName:"santa-members-viewer-app",biConfig:null,appName:"Members Area Viewer Script",appDefinitionId:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",fedopsConfig:Lu,translationsConfig:Du,defaultTranslations:Uu,shouldUseEssentials:!0,optionalDeps:{initI18n:null,createHttpClient:null,createExperiments:null},localeDistPath:"assets/locales"}),Fu=(ju={initI18n:null,blocksControllerService:null,createHttpClient:null,createExperiments:null,velocycleMobx:xu},Vu=[{method:gn,wrap:Ce,exports:Ru,widgetType:"PLATFORM_WIDGET",translationsConfig:Du,multilingualDisabled:Nu,experimentsConfig:{scopes:["members-area"],centralized:!0},fedopsConfig:Lu,sentryConfig:Tu,persistentAcrossPages:!1,biLogger:Ou,shouldUseEssentials:!0,withErrorBoundary:!1,biConfig:null,controllerFileName:"/home/builduser/work/12acb351b62a96cd/packages/members-viewer-app/src/components/members/controller.ts",appName:"Members Area Viewer Script",appDefinitionId:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",projectName:"santa-members-viewer-app",componentName:"members",localeDistPath:"assets/locales",defaultTranslations:Uu,id:"members"},{method:iu,wrap:Ce,exports:Cu,widgetType:"PLATFORM_WIDGET",translationsConfig:Du,multilingualDisabled:Nu,experimentsConfig:{scopes:["members-area"],centralized:!0},fedopsConfig:Lu,sentryConfig:Tu,persistentAcrossPages:!1,biLogger:Ou,shouldUseEssentials:!0,withErrorBoundary:!1,biConfig:null,controllerFileName:"/home/builduser/work/12acb351b62a96cd/packages/members-viewer-app/src/components/members-login-bar/controller.ts",appName:"Members Area Viewer Script",appDefinitionId:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",projectName:"santa-members-viewer-app",componentName:"members-login-bar",localeDistPath:"assets/locales",defaultTranslations:Uu,id:"members-login-bar"},{method:ou,wrap:Ce,exports:Mu,widgetType:"PLATFORM_WIDGET",translationsConfig:Du,multilingualDisabled:Nu,experimentsConfig:{scopes:["members-area"],centralized:!0},fedopsConfig:Lu,sentryConfig:Tu,persistentAcrossPages:!1,biLogger:Ou,shouldUseEssentials:!0,withErrorBoundary:!1,biConfig:null,controllerFileName:"/home/builduser/work/12acb351b62a96cd/packages/members-viewer-app/src/components/members-menu/controller.ts",appName:"Members Area Viewer Script",appDefinitionId:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",projectName:"santa-members-viewer-app",componentName:"members-menu",localeDistPath:"assets/locales",defaultTranslations:Uu,id:"members-menu"}],void 0===(Wu=!0)&&(Wu=!1),function(e,t){var r=[];e.forEach(function(e){var n,i=e.type,o=(n=i,Vu.find(function(e){return e.id===n}));if(o||function(e){var t,r,n;return(null===(t=e.appParams)||void 0===t?void 0:t.blocksData)||(null===(n=null===(r=e.appParams)||void 0===r?void 0:r.appData)||void 0===n?void 0:n.blocksPreviewData)}(e)&&(o={widgetType:s,method:null,exports:{}}),(null==o?void 0:o.widgetType)!==s&&!Wu){var a=null==t?void 0:t[i];if(!a)return;if(!o){var u=function(e){return Z(e)?null:e.descriptor}(a);if(!u)throw new Error("Can't resolve controller descriptor for \"".concat(i,'" controller.'));o=u}o.method=function(e){if(Z(e))return e;var t=e[Object.keys(e).find(function(e){return e.toLowerCase().includes("controller")})||"default"];if("function"!=typeof t)throw new Error("Seems like a bundle you have registered as Controller URL in Dev Center doesn't contain exported controller.\nPlease, verify you are using relevant controller bundle generated by editor flow.");return t}(a),o.wrap=function(e){return Z(e)?null:e.wrap}(a)||void 0,o.exports=a}o&&r.push({controllerDescriptor:o,controllerConfig:e})});var n=r.map(function(e){var t=e.controllerDescriptor,r=e.controllerConfig;if(t.wrap)return t.wrap(ju,t,r,D,U,J)});return n});var ju,Vu,Wu;const Gu=Fu})(),n})());
//# sourceMappingURL=viewerScript.bundle.min.js.map